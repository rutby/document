---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by mac.
--- DateTime: 8/2/21 4:44 PM
---
local str = [[
syntax = "proto3";  // 指定使用 proto3 语法
package protobuf;
option java_package = "net.im30.aps.model.protobuf";
import "ArmyUnitInfo.proto";

message ReportAllianceInfo {
	string allianceId = 1;
	string alAbbr = 2;
	string alName = 3;
	string alIcon = 4;
}

message ReportPlayerInfo {
	string uid = 1;
	string name = 2;
	string pic = 3;
	int32 picVer = 4;
	int32 srcServerId = 5;
	int32 pointId = 6;
	ReportAllianceInfo allianceInfo = 7;
	int32 headFrame = 8; //头像框 0无 1有
}

message BaseRoundReport {
	int32 triggerIndex = 1;
	int32 round = 2;
	int32 value = 3;
	int32 type = 4;
	int32 skillId = 5;
	int32 skillLevel = 6;
	int32 heroId = 7;
	int32 targetIndex = 8;
}

message EffectRoundReport {
	BaseRoundReport baseReport = 1;
	int32 time = 2; //持续时间
}

message ReportRewardItem {
	string type = 1;
	int32 value = 2;
}

message ReportRewardResource {
	int32 type = 1;
	int32 value = 2;
}

message ReportRewardHeroExp {
	int32 heroId = 1;
	int32 level = 2;
	int32 expAdd = 3;
	int32 nowExp = 4;
	int32 oldExp = 5;
}

message ReportReward {
	repeated ReportRewardItem rewardItems = 1; // 奖励道具
	repeated ReportRewardItem rewardResourceItems = 2; // 奖励资源道具
	repeated ReportRewardHeroExp rewardHeroExps = 3; // 奖励英雄经验
	repeated ReportRewardResource rewardResources = 4;// 掠夺资源
}

// 行军战斗单位
message ArmyCombatUnit {
	SimpleCombatUnit simpleCombatUnit = 1;
	ArmyUnitInfo armyInfo = 2;
}

// 集结系战斗单位
message CombineCombatUnit {
	SimpleCombatUnit simpleCombatUnit = 1;
	repeated ArmyCombatUnit members = 2;
}

// 单一战斗单位
message SimpleCombatUnit {
	int32 initHealth = 1;
	int32 health = 2;
	int64 uuid = 3;
	string uid = 4;
}

// 战斗单位信息
message CombatUnit {
	int32 type = 1;
	ArmyCombatUnit armyCombatUnit = 2;
	CombineCombatUnit combineCombatUnit = 3;
	SimpleCombatUnit simpleCombatUnit = 4;
}

// 伤害百分比
message DamagePercentInfo {
	int64 targetUuid = 1;
	float damagePercent = 2;
}

message ArmyResultBase {
	int32 pointId = 1;
	CombatUnit armyObj = 2;
	CombatUnit afterArmyObj = 3;
	repeated int32 destroyValue = 4;
	// 单位受伤占比
	repeated DamagePercentInfo damagePercent = 5;
}

message BuildArmyResult {
	ArmyResultBase base = 1;
	int32 level = 2;
	int32 buildId = 3;
}

message CityArmyResult {
	ArmyResultBase base = 1;
	int32 level = 2;
}

message MonsterArmyResult {
	ArmyResultBase base = 1;
	int32 monsterId = 2;
}

message AllianceCityArmyResult {
	ArmyResultBase base = 1;
	int32 cityId = 2;
	int32 health = 3;
	int32 initHealth = 4;
	int32 afterHealth = 5;
	string cityName = 6;
}


// 战斗单位结果
message ArmyResult {
	int32 type = 1;
	bool isDefeat = 2;
	BuildArmyResult buildArmyResult = 3;
	CityArmyResult cityArmyResult = 4;
	ArmyResultBase simpleArmyResult = 5;
	MonsterArmyResult monsterArmyResult = 6;
	AllianceCityArmyResult allianceCityArmyResult = 7;
}

// 战斗战报
message FightReport {
	int64 uuid = 1;
	ReportPlayerInfo selfInfo = 2;
	ReportPlayerInfo otherInfo = 3;
	ArmyResult selfArmyResult = 4;
	ArmyResult otherArmyResult = 5;
	ReportReward reward = 6;
	int32 fightResult = 7; // 战斗结果
	repeated BattleEffectGroup otherBattleEffectGroups = 8;
}

message BattlePointInfo {
	int32 battleServerId = 1;
	int32 serverType = 2;
	int32 pointId = 3;
	int32 worldId = 4;
}

message FightResLost {
	int32 type = 1;
	int32 value = 2;
}

// 攻击损失
message FightLost {
	repeated FightResLost resLostArr = 1;
}

// 战争战报
message BattleReport {
	int32 battleResult = 1;
	int64 startTime = 2;
	int32 startRound = 3;
	BattlePointInfo battlePointInfo = 4;
	repeated FightReport fightReports = 5;
	FightLost fightLost = 6;
	repeated BattleEffectGroup selfBattleEffectGroups = 7;
}


// 详细战报玩家信息
message DetailReportPlayerInfo {
	int32 index = 1;
	string name = 2;
	string alAbbr = 3;
	bool isSelf = 4;
	int32 infoType = 5;
}


// 详细战报
message BattleDetailInfo {
	repeated BaseRoundReport roundReports = 1;
	repeated EffectRoundReport effectReports = 2;
	repeated DetailReportPlayerInfo playerInfos = 3;// 详细战报玩家信息
}

// 战斗增益
message BattleEffectGroup {
	int64 memberUuid = 1;
	repeated BattleEffectInfo battleEffectInfos = 2;
}

message BattleEffectInfo {
	int32 effectId = 1;
	float value = 2;
}

message ReportRewardNeedCollect {
	int32 pointId = 1;
	bool inUserWorld = 2;
	int64 rewardUuid = 3;
}

// 怪物掉落奖励邮件
message MonsterCollectRewardMail {
	int64 startTime = 1;
	int32 monsterId = 2;
	ReportRewardNeedCollect needCollectReward = 3;
}

message DestroyMail {
	int64 time = 1;
	int32 type = 2; // 0 己方攻击 1 对方攻击
	int32 pointId = 3;
	ReportPlayerInfo destroyPlayerInfo = 4;
	DestroyUnitInfo destroyUnitInfo = 5;
	int32 attackType = 6;
	ReportAllianceInfo allianceInfo = 7;
}

message DestroyUnitInfo {
	int32 type = 1;
	int32 itemId = 2;
	int32 initDurability = 3; // 初始耐久
	int32 durability = 4; // 当前耐久
	int32 dmg = 5; // 摧毁耐久值
	int32 level = 6; // 等级
	string extraInfo = 7;// 联盟城名称
}


]]
return str
