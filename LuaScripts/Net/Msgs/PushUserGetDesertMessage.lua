---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Imaginaerum.
--- DateTime: 2022/11/10 14:23
---
local PushUserGetDesertMessage = BaseClass("PushUserGetDesertMessage", SFSBaseMessage)
-- 基类，用来调用基类方法
local base = SFSBaseMessage
local Localization = CS.GameEntry.Localization
local function OnCreate(self)
    base.OnCreate(self)
end

local function HandleMessage(self, t)
    base.HandleMessage(self, t)
    DataCenter.DesertDataManager:UpdateOneDesertData(t)
    EventManager:GetInstance():Broadcast(EventId.UserGetDesert)
    if t["uuid"]~=nil then
        local uuid = t["uuid"]
        WorldDesertEffectManager:GetInstance():CheckShowDesert(uuid)
        local desertData = DataCenter.DesertDataManager:GetSelfDesertDataByUuid(uuid)
        if desertData ~=nil then
            local level = desertData.level
            local count = DataCenter.DesertDataManager:GetOwnDesertCountByLevel(desertData.level)
            DataCenter.GuideManager:CheckDoTriggerGuide(GuideTriggerType.OwnDesert, level .. ";" .. count)
        end
    end
end

PushUserGetDesertMessage.OnCreate = OnCreate
PushUserGetDesertMessage.HandleMessage = HandleMessage

return PushUserGetDesertMessage