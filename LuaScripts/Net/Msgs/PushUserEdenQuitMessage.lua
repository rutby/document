---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Imaginaerum.
--- DateTime: 2023/9/12 12:09
---
local PushUserEdenQuitMessage = BaseClass("PushUserEdenQuitMessage", SFSBaseMessage)
-- 基类，用来调用基类方法
local base = SFSBaseMessage
local Localization = CS.GameEntry.Localization
local function OnCreate(self)
    base.OnCreate(self)
end

local function HandleMessage(self, t)
    base.HandleMessage(self, t)
    if t["serverInfo"]~=nil then
        local message = t["serverInfo"]
        Setting:SetString(SettingKeys.SERVER_IP, message["ip"])
        Setting:SetInt(SettingKeys.SERVER_PORT, message["port"])
        Setting:SetString(SettingKeys.SERVER_ZONE, message["zone"])
    end
    UIUtil.ShowMessage(Localization:GetString("111146"), 1, GameDialogDefine.CONFIRM, GameDialogDefine.CANCEL, function()
        CS.ApplicationLaunch.Instance:ReStartGame()
    end, function()
        CS.ApplicationLaunch.Instance:ReStartGame()
    end, function()
        CS.ApplicationLaunch.Instance:ReStartGame()
    end)
    
end

PushUserEdenQuitMessage.OnCreate = OnCreate
PushUserEdenQuitMessage.HandleMessage = HandleMessage

return PushUserEdenQuitMessage