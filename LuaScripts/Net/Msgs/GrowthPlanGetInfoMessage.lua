---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Beef.
--- DateTime: 2022/2/14 16:53
---

local GrowthPlanGetInfoMessage = BaseClass("GrowthPlanGetInfoMessage", SFSBaseMessage)
local base = SFSBaseMessage

local function OnCreate(self, packId)
    base.OnCreate(self)
    self.sfsObj:PutUtfString("exchangeId", packId)
end

local function HandleMessage(self, t)
    base.HandleMessage(self, t)
    
    local packId = t["exchangeId"]
    if packId then
        -- Cache
        local cacheDict = WelfareController.getWelfareCache(WelfareMessageKey.GrowthPlanInfo) or {}
        cacheDict[packId] = t
        WelfareController.setWelfareCache(WelfareMessageKey.GrowthPlanInfo, cacheDict)
        
        -- 礼包中心页面
        EventManager:GetInstance():Broadcast(EventId.GrowthPlanGetInfo, t)
        
        -- 礼包中心红点
        EventManager:GetInstance():Broadcast(EventId.RefreshWelfareRedDot)
    end
end

GrowthPlanGetInfoMessage.OnCreate = OnCreate
GrowthPlanGetInfoMessage.HandleMessage = HandleMessage

return GrowthPlanGetInfoMessage