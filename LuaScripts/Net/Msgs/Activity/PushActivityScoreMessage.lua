---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by guqu.
--- DateTime: 2020/11/6 15:34
---
local PushActivityScoreMessage = BaseClass("PushActivityScoreMessage", SFSBaseMessage)
local base = SFSBaseMessage
local Localization = CS.GameEntry.Localization

local function OnCreate(self)
    base.OnCreate(self)
end

local function HandleMessage(self, t)
    base.HandleMessage(self, t)
    if t["score"]~=nil then
        DataCenter.ActivityListDataManager:PushEventScore(t)
        EventManager:GetInstance():Broadcast(EventId.UpdateAllianceGiftNum)
        local type = t["type"]
        local msg = ""
        if type == ActivityEventType.KINGDOM_PERSONAL then
            msg = "79000043"
        end
        local addScore = 0
        if t["addScore"]~=nil then
            addScore = t["addScore"]
        end
        UIUtil.ShowTips(Localization:GetString(msg,string.GetFormattedSeperatorNum(addScore)))
    end
    
end

PushActivityScoreMessage.OnCreate = OnCreate
PushActivityScoreMessage.HandleMessage = HandleMessage

return PushActivityScoreMessage