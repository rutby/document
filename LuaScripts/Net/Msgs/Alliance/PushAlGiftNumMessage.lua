---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by guqu.
--- DateTime: 2020/9/8 11:31
---
local PushAlGiftNumMessage = BaseClass("PushAlGiftNumMessage", SFSBaseMessage)
local base = SFSBaseMessage
local Localization = CS.GameEntry.Localization

local function OnCreate(self)
    base.OnCreate(self)
end

local function HandleMessage(self, t)
    base.HandleMessage(self, t)
    if t["allianceNewMail"]~=nil then
        DataCenter.AllianceGiftDataManager:UpdateGiftNum(t["allianceNewMail"])
        EventManager:GetInstance():Broadcast(EventId.UpdateAllianceGiftNum)
        if t["groupId"] then
            local giftName = ""
            
            local groupID = t["groupId"]
            local nameDialog = GetTableData(TableName.AllianceGiftGroup,groupID, "name")
            giftName = Localization:GetString(nameDialog)
            
            if t["fromMsg"] then
                if t["fromMsg"].fromType == "monster" then
                    giftName = Localization:GetString(nameDialog, t["fromMsg"].level)
                end
            end
            
            UIUtil.ShowTips(Localization:GetString("390881", giftName))
        end
    end
end

PushAlGiftNumMessage.OnCreate = OnCreate
PushAlGiftNumMessage.HandleMessage = HandleMessage

return PushAlGiftNumMessage