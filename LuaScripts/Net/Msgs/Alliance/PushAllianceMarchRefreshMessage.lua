---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by guqu.
--- DateTime: 2020/8/10 16:00
---
local PushAllianceMarchRefreshMessage = BaseClass("PushAllianceMarchRefreshMessage", SFSBaseMessage)
-- 基类，用来调用基类方法
local base = SFSBaseMessage
local Localization = CS.GameEntry.Localization
local function OnCreate(self)
    base.OnCreate(self)
end

local function HandleMessage(self, t)
    base.HandleMessage(self, t)
    DataCenter.AllianceWarDataManager:UpdateOneAllianceWarList(t)
    EventManager:GetInstance():Broadcast(EventId.AllianceWarUpdate)
    --当参与者有数据时
    if next(t["members"]) then
        local members = t["members"]
        for i = 1, #members do
            --并且自己时参与者弹出提示并改变状态
            if members[i].ownerUid == LuaEntry.Player.uid then
                UIUtil.ShowTips(Localization:GetString("128029",t["attackName"]))
                break
            end
        end
    end
end

PushAllianceMarchRefreshMessage.OnCreate = OnCreate
PushAllianceMarchRefreshMessage.HandleMessage = HandleMessage

return PushAllianceMarchRefreshMessage