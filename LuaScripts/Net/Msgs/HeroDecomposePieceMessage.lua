---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 1.
--- DateTime: 2022/10/12 15:32
---
local HeroDecomposePieceMessage = BaseClass("HeroDecomposePieceMessage", SFSBaseMessage)
local base = SFSBaseMessage

local function OnCreate(self, param)
    base.OnCreate(self)

    if param ~= nil then
        local oneArr = SFSArray.New()
        for k,v in pairs(param) do
            local one = SFSObject.New()
            one:PutInt("goodId", k)
            one:PutInt("num", v)
            oneArr:AddSFSObject(one)
        end
        self.sfsObj:PutSFSArray("decomposeArr", oneArr)
    end
end

local function HandleMessage(self, t)
    base.HandleMessage(self, t)
    if t["getArr"] then
        local message = {}
        local reward = {}
        message["reward"] = reward
        table.walk(t["getArr"], function (_, v)
            local tmp = {}
            tmp["type"] = RewardType.GOODS
            local value = {}
            tmp.value = value
            value["itemId"] = toInt(v.goodsId)
            value["num"] = v.num
            table.insert(reward, tmp)
        end)
        DataCenter.RewardManager:ShowCommonReward(message)
    end
end

HeroDecomposePieceMessage.OnCreate = OnCreate
HeroDecomposePieceMessage.HandleMessage = HandleMessage
return HeroDecomposePieceMessage