---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Imaginaerum.
--- DateTime: 2023/5/23 20:43
---
local ExitDragonServerMessage = BaseClass("ExitDragonServerMessage", SFSBaseMessage)
local base = SFSBaseMessage
local Localization = CS.GameEntry.Localization
local function OnCreate(self)
    base.OnCreate(self)
end

local function HandleMessage(self, t)
    base.HandleMessage(self, t)
    if t["errorCode"] ~= nil then
        local errorCode = t["errorCode"]
        if errorCode ~= SeverErrorCode then
            UIUtil.ShowTips(Localization:GetString(t["errorCode"]))
        end
    else
        DataCenter.BuildManager:FreeBuildingFoldUpNewHandle(t)
        local pos = LuaEntry.Player:GetMainWorldPos()
        GoToUtil.GotoDragonPos(SceneUtils.TileIndexToWorld(pos,ForceChangeScene.World))
    end
    EventManager:GetInstance():Broadcast(EventId.OnQuitDragonUI,UIQuitDragonType.Close)
end

ExitDragonServerMessage.OnCreate = OnCreate
ExitDragonServerMessage.HandleMessage = HandleMessage

return ExitDragonServerMessage