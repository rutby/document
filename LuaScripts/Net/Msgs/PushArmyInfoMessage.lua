---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Imaginaerum.
--- DateTime: 2021/7/13 17:19
---
local PushArmyInfoMessage = BaseClass("PushArmyInfoMessage", SFSBaseMessage)
local base = SFSBaseMessage

local function OnCreate(self)
    base.OnCreate(self)
end

local function HandleMessage(self, message)
    base.HandleMessage(self, message)
    if message["errorCode"] ~= nil then
        UIUtil.ShowTips(Localization:GetString(message["errorCode"]))
        return
    end
    if message["heros"]~=nil then
        DataCenter.HeroDataManager:UpdateHeroes(message["heros"])
    end
    if message["soldiers"]~=nil then
        for k,v in pairs(message["soldiers"]) do
            DataCenter.ArmyManager:UpdateOneArmy(v)
        end
    end

    -- 有push兵种变动的时候需要刷新 暂时捐兵功能要用
    EventManager:GetInstance():Broadcast(EventId.PushArmyInfoEvent)
end

PushArmyInfoMessage.OnCreate = OnCreate
PushArmyInfoMessage.HandleMessage = HandleMessage

return PushArmyInfoMessage