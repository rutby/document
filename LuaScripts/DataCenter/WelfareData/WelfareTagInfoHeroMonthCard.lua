---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by darcy.
--- DateTime: 2021/1/11 3:19 下午
---

require "DataCenter.WelfareData.WelfareTagInfo"

---@class WelfareTagInfoHeroMonthCard : WelfareTagInfo 月卡页签信息
local WelfareTagInfoHeroMonthCard = BaseClass("WelfareTagInfoHeroMonthCard", WelfareTagInfo)
local M = WelfareTagInfoHeroMonthCard

function M:isShow()
    return WelfareTagInfo.isShow(self)-- and HeroMonthCardManager.getCard() ~= nil
end

function M:hasRedPoint()
    local card = HeroMonthCardManager.getCard()
    if card == nil then
        return false
    end
    return card:canGetReward()
end

function M:getInfo()
    return HeroMonthCardManager.getCard()
end

--- 月卡显示规则
--- 首先由配置 show_icon 决定
--- 其次如果未购买则显示
--- 购买了如果没领取显示
--- 购买了没有未领取次数 不显示
function M:isShowIcon()
    local monthCard = HeroMonthCardManager.getCard()
    if monthCard == nil then
        return false
    end
    if not monthCard:isBought() then
        return WelfareTagInfo.isShowIcon(self)
    end
    return WelfareTagInfo.isShowIcon(self) and self:hasRedPoint()
end

function M:hasSpecialBg()
    return true
end

function M:getBgName()
    return "UI_HeroDevelop_BG"
end

return M