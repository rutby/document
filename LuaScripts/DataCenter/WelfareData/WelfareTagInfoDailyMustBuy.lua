---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by zzl.
--- DateTime: 
---

require "DataCenter.WelfareData.WelfareTagInfo"

---@class WelfareTagInfoDailyMustBuy : WelfareTagInfo 每日特惠
local WelfareTagInfoDailyMustBuy = BaseClass("WelfareTagInfoDailyMustBuy", WelfareTagInfo)
local M = WelfareTagInfoDailyMustBuy

function M:isShow()
    local unlockLv = LuaEntry.DataConfig:TryGetNum("Daily_must_buy", "k4", 0)
    local unlock = DataCenter.BuildManager.MainLv >= unlockLv
    return WelfareTagInfo.isShow(self) and unlock
end

function M:getRedDotNum()
    return DataCenter.DailyMustBuyManager:GetCanGetStageNum()
end

---@return 
function M:getInfo()
    return GiftPackageData.getIsShowGiftPacks("7")
end

function M:isShowIcon()
    local info = self:getInfo()
    return info ~= nil and WelfareTagInfo.isShowIcon(self)
end

function M:getBgName()
    return "DailyPackage"
end

function M:isFullBg()
    return true
end

--- 是否还能购买 用于排序
function M:CanBuy()
    local packs = self:getInfo()
    if not table.IsNullOrEmpty(packs) then
        return true
    end
    local redDotNum = self:getRedDotNum()
    return redDotNum > 0
end

return M