---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 1.
--- DateTime: 2023/3/13 16:03
---

local PresidentInfo = BaseClass("PresidentInfo")

local function __init(self)
    self.uid = ""
    self.serverId = 0
    self.pic = ""
    self.picVer = 0
    self.name = ""
    self.allianceAbbr = ""
    self.headSkinId = 0
    self.headSkinET = 0
    self.beKingTime = 0
    self.country = ""
    self.declaration = ""
    self.occupyAllianceId = ""
    self.assignFinishTime = 0
    self.finishTime = 0
end

local function __delete(self)
    self.uid = ""
    self.serverId = 0
    self.pic = ""
    self.picVer = 0
    self.name = ""
    self.allianceAbbr = ""
    self.country = ""
    self.headSkinId = 0
    self.headSkinET = 0
    self.beKingTime = 0
    self.declaration = ""
    self.occupyAllianceId = ""
    self.assignFinishTime = 0
    self.finishTime = 0
end

local function ParseData(self, message)
    if message == nil then
        return
    end
    if message["finishTime"] then
        self.finishTime = message["finishTime"]
    end
    if message["kingInfo"] and table.count(message["kingInfo"]) > 0 then
        if message["kingInfo"]["uid"] then
            self.uid = message["kingInfo"]["uid"]
        end
        if message["kingInfo"]["serverId"] then
            self.serverId = message["kingInfo"]["serverId"]
        end
        if message["kingInfo"]["pic"] then
            self.pic = message["kingInfo"]["pic"]
        end
        if message["kingInfo"]["picVer"] then
            self.picVer = message["kingInfo"]["picVer"]
        end
        if message["kingInfo"]["name"] then
            self.name = message["kingInfo"]["name"]
        end
        if message["kingInfo"]["headSkinId"] then
            self.headSkinId = message["kingInfo"]["headSkinId"]
        end
        if message["kingInfo"]["headSkinET"] then
            self.headSkinET = message["kingInfo"]["headSkinET"]
        end
        if message["kingInfo"]["allianceAbbr"] then
            self.allianceAbbr = message["kingInfo"]["allianceAbbr"]
        end
        if message["kingInfo"]["beKingTime"] then
            self.beKingTime = message["kingInfo"]["beKingTime"]
        end
        if message["kingInfo"]["country"] then
            self.country = message["kingInfo"]["country"]
        end
    else
        self.uid = ""
        self.serverId = 0
        self.pic = ""
        self.picVer = 0
        self.name = ""
        self.allianceAbbr = ""
        self.country = ""
        self.headSkinId = 0
        self.headSkinET = 0
        self.beKingTime = 0
    end
    self.occupyAllianceId = message["occupyAllianceId"]
    local k4 = LuaEntry.DataConfig:TryGetNum("wonder", "k4") * 60 * 1000
    if message["finishTime"] ~= nil then
        self.assignFinishTime = message["finishTime"] + k4
    end
    self.declaration = message["declaration"] or ""
end

local function SetDeclaration(self, declaration)
    self.declaration = declaration
end

function PresidentInfo:HavePresident()
    return self.uid ~= nil and self.uid ~= ""
end

function PresidentInfo:CheckIsEnd()
    local curTime = UITimeManager:GetInstance():GetServerTime()
    if self.finishTime ~= 0 and curTime >= self.finishTime then
        return true
    end
    return false
end


PresidentInfo.__init = __init
PresidentInfo.__delete = __delete
PresidentInfo.ParseData = ParseData
PresidentInfo.SetDeclaration = SetDeclaration

return PresidentInfo