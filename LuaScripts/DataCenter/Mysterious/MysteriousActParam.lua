---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 1020.
--- DateTime: 2023/5/23 18:15
---

local MysteriousActParam = BaseClass("MysteriousActParam")

local function __init(self)
    self.activityId = 0         -- 活动id
    self.maxLotteryCount = 0    -- 最大抽取次数
    self.oneLotteryCount = 0    -- 今日单抽次数
    self.tenLotteryCount = 0    -- 今日十连次数 
    self.numbers = {}   -- number1 number2 number3
    self.round = 1   -- 第几轮
    self.rewardStage = 1    -- 当前已领奖的阶段
end

local function __delete(self)
    self.activityId = nil         -- 活动id
    self.oneLotteryCount = nil    -- 今日单抽次数
    self.tenLotteryCount = nil    -- 今日十连次数 
    self.numbers = nil   -- number1 number2 number3
    self.round = nil   -- 第几轮
    self.rewardStage = nil    -- 当前已领奖的阶段
end

local function ParseData(self, msg)
    if msg == nil then
        return
    end
    if msg.activityId then
        self.activityId = msg.activityId
        self.maxLotteryCount = tonumber(GetTableData("activity_panel", self.activityId, "para1"))   -- 每日最大抽取次數
    end
    if msg.mysteriousInfo then
        local mysteriousInfo = msg.mysteriousInfo
        if mysteriousInfo.oneLotteryCount then
            self.oneLotteryCount = tonumber(mysteriousInfo.oneLotteryCount)
        end
        if mysteriousInfo.tenLotteryCount then
            self.tenLotteryCount = tonumber(mysteriousInfo.tenLotteryCount)
        end
        if mysteriousInfo.numbers then
            local spl = string.split_ss_array(mysteriousInfo.numbers, ";")
            for i = 1, #spl do
                table.insert(self.numbers, tonumber(spl[i]))
            end
        end
        if mysteriousInfo.round then
            self.round = tonumber(mysteriousInfo.round)
        end
        if mysteriousInfo.rewardStage then
            self.rewardStage = tonumber(mysteriousInfo.rewardStage)
        end
    end
end

local function GetMaxLotteryCount(self)
    return self.maxLotteryCount
end

local function GetRemainLotteryCount(self)
    local remainCount = self.maxLotteryCount - self.oneLotteryCount - 10 * self.tenLotteryCount
    return remainCount
end

MysteriousActParam.__init = __init
MysteriousActParam.__delete = __delete
MysteriousActParam.ParseData = ParseData
MysteriousActParam.GetMaxLotteryCount = GetMaxLotteryCount
MysteriousActParam.GetRemainLotteryCount = GetRemainLotteryCount
return MysteriousActParam