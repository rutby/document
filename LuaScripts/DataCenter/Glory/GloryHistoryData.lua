---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Beef.
--- DateTime: 2023/2/28 15:38
---

local GloryHistoryData = BaseClass("GloryHistoryData")
local GloryVsData = require "DataCenter.Glory.GloryVsData"

local function __init(self)
    self.readyTime = 0
    self.startTime = 0
    self.endTime = 0
    self.t = 0
    self.seasonChangeScore = 0
    self.ko = 0
    self.vsDataList = {}
end

local function ParseServerData(self, serverData)
    if serverData.readyTime then
        self.readyTime = serverData.readyTime
    end
    if serverData.startTime then
        self.startTime = serverData.startTime
    end
    if serverData.endTime then
        self.endTime = serverData.endTime
    end
    if serverData.t then
        self.t = serverData.t
    end
    if serverData.seasonChangeScore then
        self.seasonChangeScore = math.abs(serverData.seasonChangeScore)
    end
    if serverData.ko then
        self.ko = serverData.ko
    end
    if serverData.vsInfo then
        self.vsDataList = {}
        for _, v in ipairs(serverData.vsInfo) do
            local vsData = GloryVsData.New()
            vsData:ParseServerData(v)
            table.insert(self.vsDataList, vsData)
        end
    end
end
--是否4个联盟中心全部被摧毁
function GloryHistoryData:IsKo()
    return self.ko == GloryDeclareRecordKoType.Ko
end

local function GetLeftData(self)
    for k,v in ipairs(self.vsDataList) do
        if v.isAtk == GloryDeclareRecordAtkType.Attack then
            return v
        end
    end
end

local function GetRightData(self)
    for k,v in ipairs(self.vsDataList) do
        if v.isAtk == GloryDeclareRecordAtkType.Defence then
            return v
        end
    end
end

GloryHistoryData.__init = __init

GloryHistoryData.ParseServerData = ParseServerData
GloryHistoryData.GetLeftData = GetLeftData
GloryHistoryData.GetRightData = GetRightData

return GloryHistoryData