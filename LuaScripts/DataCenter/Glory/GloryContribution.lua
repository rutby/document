---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Beef.
--- DateTime: 2023/2/28 16:56
---

local GloryContribution = BaseClass("GloryContribution")

local function __init(self)
    self.uid = ""
    self.score = 0
    self.pic = ""
    self.picVer = 0
    self.name = ""
    self.headSkinId = 0
    self.headSkinET = 0
    self.sex = 0
    self.contributionArr = {} -- List<{ type, value }>
    self.power = 0
end

local function ParseServerData(self, serverData)
    if serverData.uid then
        self.uid = serverData.uid
    end
    if serverData.score then
        self.score = serverData.score
    end
    if serverData.pic then
        self.pic = serverData.pic
    end
    if serverData.picVer then
        self.picVer = serverData.picVer
    end
    if serverData.name then
        self.name = serverData.name
    end
    if serverData.headSkinId then
        self.headSkinId = serverData.headSkinId
    end
    if serverData.headSkinET then
        self.headSkinET = serverData.headSkinET
    end
    if serverData.sex then
        self.sex = serverData.sex
    end
    self.contributionArr = {}
    if serverData.contributionArr then
        for k,v in pairs(serverData.contributionArr) do
            self.contributionArr[v.type] = v.value
        end
    end
    if serverData.power then
        self.power = serverData.power
    end
end

function GloryContribution:GetScoreByContributionType(contributionType)
    local result = 0
    local original = self.contributionArr[contributionType]
    if original ~= nil then
        if contributionType == GloryContributionType.OCCUPY_DESERT then
            local rate = LuaEntry.DataConfig:TryGetNum("plant_contribution", "k1")
            result = rate * original
        elseif contributionType == GloryContributionType.SEASON_BUILDING then
            local rate = LuaEntry.DataConfig:TryGetNum("plant_contribution", "k2")
            result = rate * original
        elseif contributionType == GloryContributionType.DONATE_ALLIANCE_STORE then
            local rate = LuaEntry.DataConfig:TryGetNum("plant_contribution", "k3")
            result = rate * original
        elseif contributionType == GloryContributionType.DECLARE_SCORE then
            local rate = LuaEntry.DataConfig:TryGetNum("plant_contribution", "k4")
            result = rate * original
        elseif contributionType == GloryContributionType.OCCUPY_ENEMY_DESERT then
            local rate = LuaEntry.DataConfig:TryGetNum("plant_contribution", "k5")
            result = rate * original
        end
    end
    
    return result
end

GloryContribution.__init = __init

GloryContribution.ParseServerData = ParseServerData

return GloryContribution