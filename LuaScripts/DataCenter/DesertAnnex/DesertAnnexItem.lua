---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Beef.
--- DateTime: 2023/3/28 19:54
---

local DesertAnnexItem = BaseClass("DesertAnnexItem")

local icon_path = "Icon"

local function __init(self)
    self.param = nil
    self.req = nil
end

local function OnCreate(self)
    self.gameObject = self.req.gameObject
    self.transform = self.gameObject.transform
    self.icon_sprite = self.transform:Find(icon_path):GetComponent(typeof(CS.UnityEngine.SpriteRenderer))
    self:Refresh()
end

local function OnDestroy(self)
    self.gameObject = nil
    self.transform = nil
    if self.req ~= nil then
        self.req:Destroy()
        self.req = nil
    end
end

local function Init(self, param, req)
    self.param = param
    self.req = req
end

local function Refresh(self)
    if self.param.type == DesertAnnexItemType.Mine then
        local path = string.format(LoadPath.CommonNewPath, "Common_icon_bomb")
        local data = self.param.data
        if data~=nil and data.mineId == MineIdEnum.LandmineBig then
            path = string.format(LoadPath.CommonNewPath, "Common_icon_bomb_s")
        end
        self.icon_sprite:LoadSprite(path)
    elseif self.param.type == DesertAnnexItemType.BuildStatus then
        local data = self.param.data
        local template = DataCenter.BuildStatusManager:GetTemplate(data.id)
        self.icon_sprite:LoadSprite(string.format(LoadPath.CommonNewPath, template.icon))
    end
end

DesertAnnexItem.__init = __init
DesertAnnexItem.OnCreate = OnCreate
DesertAnnexItem.OnDestroy = OnDestroy

DesertAnnexItem.Init = Init
DesertAnnexItem.Refresh = Refresh

return DesertAnnexItem