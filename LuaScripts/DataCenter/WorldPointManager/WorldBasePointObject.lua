---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Imaginaerum.
--- DateTime: 19/3/2024 上午11:24
---
local base = WorldPointObject
local WorldBasePointObject = BaseClass("WorldBasePointObject",WorldPointObject)

function WorldBasePointObject:CreateGameObject()
    base.CreateGameObject(self)
    local info = DataCenter.WorldPointManager:GetPointInfo(self.pointIndex)
    if info~=nil then
        --self:AddOldObject()
        if self.instance ~= nil then
            return
        end
        local prefabPath = WorldBuildUtil.GetWorldPointModelPath(info)
        if prefabPath~=nil and prefabPath~="" then
            self.instance = CS.GameEntry.Resource:InstantiateAsync(prefabPath)
            self.instance:completed('+',function()
                self.gameObject = self.instance.gameObject
                if self.gameObject~=nil then
                    self.gameObject.transform:SetParent(CS.SceneManager.World.DynamicObjNode)
                    self.gameObject.transform.position = SceneUtils.TileIndexToWorld(self.pointIndex,ForceChangeScene.World)
                    self.gameObject:SetActive(self.isVisible)
                end
                self:SetAutoAdjustLod()
                self:UpdateGameObject()
                self:CheckShowTroopDestination()
                self:SetClickEvent()
            end)
        end
    end
end

return WorldBasePointObject