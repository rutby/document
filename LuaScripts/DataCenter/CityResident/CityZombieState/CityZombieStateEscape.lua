---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Beef.
--- DateTime: 2024/3/26 21:39
---

local CityZombieStateBase = require "DataCenter.CityResident.CityZombieState.CityZombieStateBase"
local CityZombieStateEscape = BaseClass("CityZombieStateEscape", CityZombieStateBase)

local MainPos = Vector3.New(101, 0, 101)

local function OnEnter(self)
    local curPos = self.data:GetPos()
    local dir = Vector3.Normalize(curPos - MainPos)
    local pos = curPos + dir * CityResidentDefines.ZombieEscapeDis
    self.data:PlayAnim(CityResidentDefines.AnimName.Walk1)
    self.data:SetSpeed(DataCenter.CityResidentManager:GetZombieWalkSpeed())
    self.data:GoToPosDirectly(pos)
end

local function OnFinish(self)
    self.data:SetState(CityResidentDefines.ZombieState.InvadeWalk)
end

CityZombieStateEscape.OnEnter = OnEnter
CityZombieStateEscape.OnFinish = OnFinish

return CityZombieStateEscape