---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Beef.
--- DateTime: 2023/11/23 10:52
---

local CityZombieStateBase = require "DataCenter.CityResident.CityZombieState.CityZombieStateBase"
local CityZombieStateBeFire = BaseClass("CityZombieStateBeFire", CityZombieStateBase)

local Duration = 2

local function OnEnter(self)
    self.data.attacker = nil
    self.data:Idle()
    self.data:WaitForFinish(Duration)
    if self.data:HasObj() then
        self.data.obj:Play3DSound("Effect_zombie_beFire")
    end
    DataCenter.CityResidentManager:ShowEffect("Assets/Main/Prefab_Dir/Home/Effect/Common/sence_effect_fire.prefab", nil, self.data:GetPos(), Duration)
    DataCenter.CityResidentManager:RemoveFireBody(self.data.uuid)
end

local function OnFinish(self)
    DataCenter.CityResidentManager:RemoveData(self.data.uuid)
end

local function OnExit(self)
    if self.data:HasObj() then
        self.data.obj:Stop3DSound()
    end
end

CityZombieStateBeFire.OnEnter = OnEnter
CityZombieStateBeFire.OnFinish = OnFinish
CityZombieStateBeFire.OnExit = OnExit

return CityZombieStateBeFire