---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Beef.
--- DateTime: 2023/11/23 10:52
---

local CityZombieStateBase = require "DataCenter.CityResident.CityZombieState.CityZombieStateBase"
local CityZombieStateWanderWalk = BaseClass("CityZombieStateWanderWalk", CityZombieStateBase)

local function OnEnter(self)
    self.data:PlayAnim(CityResidentDefines.AnimName.Walk1)
    self.data:SetSpeed(DataCenter.CityResidentManager:GetZombieWalkSpeed())
    local mask = DataCenter.CityResidentManager:GetCurrentCityMask()
    local arg = nil
    if self.data.spawnId then
        arg = "spawnId=" .. self.data.spawnId
    end
    local pos = WayPointUtil.GetRandomPos(mask, CityResidentDefines.WayPointFlag.Zombie, arg)
    self.data:GoToPos(pos, mask, CityResidentDefines.WayPointFlag.Zombie, arg)
end

local function OnFinish(self)
    self.data:SetState(CityResidentDefines.ZombieState.WanderIdle)
end

CityZombieStateWanderWalk.OnEnter = OnEnter
CityZombieStateWanderWalk.OnFinish = OnFinish

return CityZombieStateWanderWalk