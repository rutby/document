---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Beef.
--- DateTime: 2023/11/23 10:52
---

local CityHeroStateBase = require "DataCenter.CityResident.CityHeroState.CityHeroStateBase"
local CityHeroStateGoToFire = BaseClass("CityHeroStateGoToFire", CityHeroStateBase)

local function OnEnter(self)
    local targetData = self.data.target
    if targetData then
        local dir = Vector3.Normalize(targetData:GetPos() - self.data:GetPos())
        local pos = targetData:GetPos() - dir * 0.4
        self.data:PlayAnim(CityResidentDefines.AnimName.RunHold)
        self.data:SetSpeed(CityResidentDefines.SpeedHeroFire)
        self.data:ShowHeroTorch()
        self.data:GoToCityPos(pos)
    else
        self.data:Refresh()
    end
end

local function OnFinish(self)
    self.data:SetState(CityResidentDefines.HeroState.Fire)
end

CityHeroStateGoToFire.OnEnter = OnEnter
CityHeroStateGoToFire.OnFinish = OnFinish

return CityHeroStateGoToFire