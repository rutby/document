---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Beef.
--- DateTime: 2023/11/23 10:52
---

local CityHeroStateBase = require "DataCenter.CityResident.CityHeroState.CityHeroStateBase"
local CityHeroStatePreAttack = BaseClass("CityHeroStatePreAttack", CityHeroStateBase)

local function OnEnter(self)
    local zombieData = self.data.target
    if zombieData then
        self.data:LookAt(zombieData:GetPos())
        self.data:ShowHeroWeapon()
        self.data:Idle()
        local animName = CityResidentDefines.AnimName.IdleHold
        local duration = 0.5 -- self.data:GetAnimDuration(animName)
        self.data:PlayAnim(animName)
        self.data:WaitForFinish(duration)
    else
        self.data:Refresh()
    end
end

local function OnFinish(self)
    self.data:SetState(CityResidentDefines.HeroState.Attack)
end

CityHeroStatePreAttack.OnEnter = OnEnter
CityHeroStatePreAttack.OnFinish = OnFinish

return CityHeroStatePreAttack