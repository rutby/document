---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Beef.
--- DateTime: 2024/4/8 10:47
---

local CityResidentStateBase = require "DataCenter.CityResident.CityResidentState.CityResidentStateBase"
local CityResidentStateBetray = BaseClass("CityResidentStateBetray", CityResidentStateBase)

local function OnEnter(self)
    local fromPos, _ = DataCenter.CityResidentManager:GetBetrayPos(self.data.betrayIndex)
    if fromPos then
        self.data:ShowTool("")
        self.data:SetAutoAnim(true)
        self.data:GoToCityPos(fromPos)
    else
        self:OnFinish()
    end
end

local function OnExit(self)
    DataCenter.CityHudManager:Destroy(self.data.uuid, CityHudType.ResidentBetray)
end

local function OnFinish(self)
    self.data:Idle()
    self.data:PlayAnim(CityResidentDefines.AnimName.Idle)
    self.data:CheckShowBetrayHud()
end

CityResidentStateBetray.OnEnter = OnEnter
CityResidentStateBetray.OnExit = OnExit
CityResidentStateBetray.OnFinish = OnFinish

return CityResidentStateBetray