---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Beef.
--- DateTime: 2023/11/23 10:52
---

local CityResidentStateBase = require "DataCenter.CityResident.CityResidentState.CityResidentStateBase"
local CityResidentStateGoToEat = BaseClass("CityResidentStateGoToEat", CityResidentStateBase)

local function OnEnter(self)
    local buildData = DataCenter.BuildManager:GetFunbuildByItemID(BuildingTypes.DS_RESTAURANT)
    local tf = DataCenter.CityResidentManager.occupyMgr:TryOccupyFurnitureTransform(self.data.uuid, FurnitureType.DiningTable)
    if tf then
        self.data:PlayAnim(CityResidentDefines.AnimName.CarryFoodWalk)
        self.data:SetSpeed(DataCenter.CityResidentManager:GetResidentWalkSpeed())
        self.data:ShowTool("HandServingTable_Lv2")
        self.data:SetAutoAnim(false)
        self.data:GoToBuildingPos(buildData.uuid, tf.position, true)
        return
    end

    self.data:SetState(CityResidentDefines.State.Rest)
end

local function OnFinish(self)
    self.data:SetState(CityResidentDefines.State.Eat)
end

CityResidentStateGoToEat.OnEnter = OnEnter
CityResidentStateGoToEat.OnFinish = OnFinish

return CityResidentStateGoToEat