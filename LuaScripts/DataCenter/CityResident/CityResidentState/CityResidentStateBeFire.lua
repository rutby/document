---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Beef.
--- DateTime: 2024/3/28 11:34
---

local CityResidentStateBase = require "DataCenter.CityResident.CityResidentState.CityResidentStateBase"
local CityResidentStateBeFire = BaseClass("CityResidentStateBeFire", CityResidentStateBase)

local Duration = 2

local function OnEnter(self)
    self.data.attacker = nil
    self.data:Idle()
    self.data:WaitForFinish(Duration)
    if self.data:HasObj() then
        self.data.obj:Play3DSound("Effect_zombie_beFire")
    end
    DataCenter.CityResidentManager:ShowEffect("Assets/Main/Prefab_Dir/Home/Effect/Common/sence_effect_fire.prefab", nil, self.data:GetPos(), Duration)
    DataCenter.CityResidentManager:RemoveFireBody(self.data.uuid)
end

local function OnFinish(self)
    DataCenter.VitaManager:RemoveResidentData(self.data.uuid)
    DataCenter.CityResidentManager:RemoveData(self.data.uuid)
end

local function OnExit(self)
    if self.data:HasObj() then
        self.data.obj:Stop3DSound()
    end
end

CityResidentStateBeFire.OnEnter = OnEnter
CityResidentStateBeFire.OnFinish = OnFinish
CityResidentStateBeFire.OnExit = OnExit

return CityResidentStateBeFire