---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Beef.
--- DateTime: 2024/4/11 11:25
---

local CityResidentStateBase = require "DataCenter.CityResident.CityResidentState.CityResidentStateBase"
local CityResidentStateBartenderServe = BaseClass("CityResidentStateBartenderServe", CityResidentStateBase)

local function OnEnter(self)
    local buildData = DataCenter.BuildManager:GetFunbuildByItemID(BuildingTypes.DS_BAR)
    if buildData and buildData.level > 0 then
        local dataList = DataCenter.CityResidentManager:GetDataListByState(CityResidentDefines.State.Drink)
        if #dataList > 0 then
            local data = table.randomArrayValue(dataList)
            data:PlayAnim(CityResidentDefines.AnimName.Take)
            data:SetSpeed(DataCenter.CityResidentManager:GetResidentWalkSpeed())
            data:SetAutoAnim(false)
            self.data:GoToBuildingPos(buildData.uuid, data:GetPos(), false)
            return
        end
    end

    self.data:SetState(CityResidentDefines.State.BartenderMix)
end

local function OnFinish(self)
    self.data:SetState(CityResidentDefines.State.BartenderGoSweep)
end

CityResidentStateBartenderServe.OnEnter = OnEnter
CityResidentStateBartenderServe.OnFinish = OnFinish

return CityResidentStateBartenderServe