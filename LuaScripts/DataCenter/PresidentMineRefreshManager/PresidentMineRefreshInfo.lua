---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 1.
--- DateTime: 2023/4/8 17:15
---
local PresidentMineRefreshInfo = BaseClass("PresidentMineRefreshInfo")

local function __init(self)
    self.lastRefreshTime = 0
    self.pointId = 0
    self.activityId = 0
    self.nextRefreshTime = 0
    self.userInfo = {}
end

local function __delete(self)
    self.lastRefreshTime = 0
    self.pointId = 0
    self.activityId = 0
    self.nextRefreshTime = 0
    self.userInfo = {}
end

local function ParseData(self, param)
    self.lastRefreshTime = param["lastRefreshTime"] or 0
    self.pointId = param["pointId"] or 0
    self.activityId = param["activityId"] or 0
    if param["userInfo"] then
        self.userInfo = param["userInfo"]
    end
    
    local cd = LuaEntry.DataConfig:TryGetNum("wonder_stone_skill", "k4") * 60 * 1000
    self.nextRefreshTime = self.lastRefreshTime + cd
end

local function IsInCD(self)
    if self.lastRefreshTime == 0 then
        return false
    end
    local now = UITimeManager:GetInstance():GetServerTime()
    return now < self.nextRefreshTime
end

PresidentMineRefreshInfo.__init = __init
PresidentMineRefreshInfo.__delete = __delete
PresidentMineRefreshInfo.ParseData = ParseData
PresidentMineRefreshInfo.IsInCD = IsInCD

return PresidentMineRefreshInfo