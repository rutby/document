---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by zzl.
--- DateTime: 
---
--[[
跳转商业大亨
]]

local ResLackItemBase = require "DataCenter.ResLackTips.ResLackItemBase"
local ReslackItem_ActDaily = BaseClass("ReslackItem_ActDaily", ResLackItemBase)

function ReslackItem_ActDaily:CheckIsOk( _itemId, _needCnt )
	if _itemId == SpeedLackType then
		return true
	end
    self.type = self._config.para1
    self.para2 = self._config.para2
    if self.para2 and self.para2 ~= "" then
        return true
    end
    local actList = DataCenter.ActivityListDataManager:GetActivityDataByType(OverviewTypeToDailyActivity[tonumber(self.type)].Type)
    if actList and #actList > 0 then
        if actList[1].needMainCityLevel <= DataCenter.BuildManager.MainLv then
            if tonumber(self.type) == 5 then
                --检查矿洞红点
                local overviewInfo = {type = 5}
                local hasRed = DataCenter.DailyActivityManager:GetOverviewDesc(overviewInfo)
                if not hasRed then
                    return false
                else
                    return true
                end
            else
                return true
            end
        end
    end
    return false
end

function ReslackItem_ActDaily:TodoAction()
    GoToUtil.CloseAllWindows()
    local isArrow = true
    if self.para2 and self.para2 ~= "" then
        UIManager:GetInstance():OpenWindow(UIWindowNames.UIEveryDay, { anim = true, UIMainAnim = UIMainAnimType.AllHide }, tonumber(self.type))
    else
        UIManager:GetInstance():OpenWindow(UIWindowNames.UIDailyActivity,tonumber(self.type),isArrow)
    end
end

return ReslackItem_ActDaily
