---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by zzl
--- DateTime: 
---
--[[
ResLackItem_HeroMonthCard
]]

local ResLackItemBase = require "DataCenter.ResLackTips.ResLackItemBase"
local ResLackItem_HeroMonthCard = BaseClass("ResLackItem_HeroMonthCard", ResLackItemBase)

function ResLackItem_HeroMonthCard:CheckIsOk( _resType, _needCnt)
    local list = WelfareController.getShowTagInfos()
    for i, v in pairs(list) do
        if v:getType() == WelfareTagType.HeroMonthCardNew then
            local data = DataCenter.HeroMonthCardManager:GetHeroMonthCardInfo()
            if data then
                local isGetReward = false
                local flag = data.buy == BuyFlag.BUY
                local rewardList = data.rewardArr
                for _, n in ipairs(rewardList) do
                    local rewardState = DataCenter.HeroMonthCardManager:GetRewardState(n)
                    if rewardState == HeroMonthCardRewardState.REWARD_STATE_CAN_RECEIVE and n.reward[1].itemId then
                        if n.reward[1] and tonumber(n.reward[1].itemId) == _resType then
                            isGetReward = true
                            break
                        end
                    end
                end
                if flag and isGetReward then
                    return true
                elseif not flag then
                    return true
                end
            end
        end
    end
    return false
end

function ResLackItem_HeroMonthCard:TodoAction(pos,isRefresh,lacktab)
    GoToUtil.CloseAllWindows()
    GoToUtil.GotoGiftPackView(nil,WelfareTagType.HeroMonthCardNew)
end

return ResLackItem_HeroMonthCard