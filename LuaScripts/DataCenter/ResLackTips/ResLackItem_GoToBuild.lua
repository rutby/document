---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by zzl.
--- DateTime: 
---
--[[
前往建筑打开按钮
]]

local ResLackItemBase = require "DataCenter.ResLackTips.ResLackItemBase"
local ResLackItem_GoToBuild = BaseClass("ResLackItem_GoToBuild", ResLackItemBase)

function ResLackItem_GoToBuild:CheckIsOk( _itemId, _needCnt )
    local build_list = self._config:getValue("para1") or ""
    local build_array = string.split(build_list, ";")
    if (table.count(build_array) == 0) then
        return false
    end
    self.build_array = build_array
    local buildList = DataCenter.BuildManager:GetAllBuildingByItemIdWithoutPickUp(tonumber(self.build_array[1]))
    if buildList~=nil and table.count(buildList)>0 and buildList[1] ~=nil then
        if not buildList[1]:IsUpgradeFinish() and not buildList[1]:IsUpgrading() and not buildList[1]:IsInFix() then
            return true
        end
    end
    return false
end

function ResLackItem_GoToBuild:TodoAction()
    GoToUtil.GotoCityByBuildId(tonumber(self.build_array[1]),tonumber(self.build_array[2]))
end

return ResLackItem_GoToBuild
