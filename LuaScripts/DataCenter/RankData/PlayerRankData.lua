---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by guqu.
--- DateTime: 2020/9/3 16:16
---
local PlayerRankData = BaseClass("PlayerRankData")

local function __init(self)
    self.uid = ""
    self.name = ""
    self.allianceAbbr = ""
    self.allianceName = ""
    self.power =0
    self.kill = 0
    self.baseLevel = 0
    self.rank = 0
    self.type = RankType.None
    self.pic = ""
    self.picVer = 0
    self.monthCardEndTime = 0
    self.country = DefaultNation
    self.headSkinId = nil
    self.headSkinET = nil
    self.buildingBreaks = {}
end

local function __delete(self)
    self.uid = nil
    self.name = nil
    self.allianceAbbr = nil
    self.allianceName = nil
    self.power = nil
    self.kill = nil
    self.baseLevel = nil
    self.rank = nil
    self.type = nil
    self.pic = nil
    self.picVer = nil
    self.monthCardEndTime = nil
    self.country = nil
    self.headSkinId = nil
    self.headSkinET = nil
    self.buildingBreaks = {}
end

local function ParseData(self, message,type)
    self.type = type
    if message ==nil then
        return
    end
    if message["uid"]~=nil  then
        self.uid = message["uid"]
    end
    if message["name"]~=nil  then
        self.name = message["name"]
    end
    if message["abbr"]~=nil  then
        self.allianceAbbr = message["abbr"]
    end
    if message["alliancename"]~=nil  then
        self.allianceName = message["alliancename"]
    end
    if message["power"]~=nil  then
        self.power = message["power"]
    end
    if message["armyKill"]~=nil  then
        self.kill = message["armyKill"]
    end
    if message["rank"]~=nil  then
        self.rank = message["rank"]
    end
    if message["level"]~=nil  then
        self.baseLevel = message["level"]
    end
    if message["pic"]~=nil  then
        self.pic = message["pic"]
    end
    if message["picVer"]~=nil  then
        self.picVer = message["picVer"]
    end
    if message["monthCardEndTime"] then
        self.monthCardEndTime = message["monthCardEndTime"]
    end
    if message["headSkinId"] ~= nil  then
        self.headSkinId = message["headSkinId"]
    end
    if message["headSkinET"] ~= nil  then
        self.headSkinET = message["headSkinET"]
    end
    if message["country"] then
        self.country = message["country"]
    end
    if message["buildingBreaks"] then
        self.buildingBreaks = message["buildingBreaks"]
    end
end

local function SetRank(self,rank)
    self.rank = rank
end

local function GetHeadBgImg(self)
    --local headBgImg = nil
    --
    local serverTimeS = UITimeManager:GetInstance():GetServerSeconds()
    --if self.monthCardEndTime and self.monthCardEndTime > serverTimeS then
    --    headBgImg = "Common_playerbg_golloes"
    --end
    --
    --if headBgImg and headBgImg ~= "" then
    --    return string.format(LoadPath.CommonNewPath,headBgImg)
    --end
    local headBgImg = DataCenter.DecorationDataManager:GetHeadFrame(self.headSkinId, self.headSkinET, self.monthCardEndTime and self.monthCardEndTime > serverTimeS)
    return headBgImg
end

local function GetCountryFlagTemplate(self)
    local country = string.IsNullOrEmpty(self.country) and DefaultNation or self.country
    return DataCenter.NationTemplateManager:GetNationTemplate(country)
end

PlayerRankData.__init = __init
PlayerRankData.__delete = __delete
PlayerRankData.ParseData = ParseData
PlayerRankData.SetRank = SetRank
PlayerRankData.GetHeadBgImg = GetHeadBgImg
PlayerRankData.GetCountryFlagTemplate = GetCountryFlagTemplate
return PlayerRankData