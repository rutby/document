---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 1.
--- DateTime: 2023/2/24 17:32
---


local EquipmentSuitTemplateManager = BaseClass("EquipmentSuitTemplateManager")
local EquipmentSuitTemplate = require "DataCenter.EquipmentManager.EquipmentSuitTemplate"

local function __init(self)
    self.allTemplate = {}
    self.isInit = false
end

local function __delete(self)
    self.allTemplate = {}
    self.isInit = false
end

local function GetTemplate(self, id)
    if not self.isInit then
        self:InitAllTemplate()
    end
    return self.allTemplate[tonumber(id)]
end

local function GetAllTemplate(self)
    if not self.isInit then
        self:InitAllTemplate()
    end
    return self.allTemplate or {}
end

local function InitAllTemplate(self)
    if self.isInit then
        return
    end
    self.isInit = true
    self.allTemplate = {}
    LocalController:instance():visitTable(TableName.Equip_Suit, function(_, lineData)
        local item = EquipmentSuitTemplate.New()
        item:InitData(lineData)
        self.allTemplate[item.id] = item
    end)
end

local function GetSuitIdByEquipmentId(self, equipmentId)
    local allTemplate = self:GetAllTemplate()
    for k, v in pairs(allTemplate) do
        if v:IsContainsEquipment(equipmentId) then
            return k
        end
    end
    return 0
end

EquipmentSuitTemplateManager.__init = __init
EquipmentSuitTemplateManager.__delete = __delete
EquipmentSuitTemplateManager.GetTemplate = GetTemplate
EquipmentSuitTemplateManager.InitAllTemplate = InitAllTemplate
EquipmentSuitTemplateManager.GetAllTemplate = GetAllTemplate
EquipmentSuitTemplateManager.GetSuitIdByEquipmentId = GetSuitIdByEquipmentId

return EquipmentSuitTemplateManager