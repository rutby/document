---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Beef.
--- DateTime: 2023/11/3 10:18
---

local VitaUtil = {}
local Localization = CS.GameEntry.Localization

local ZeroTime = 0
local ZeroTimeOffset = 0
local TimeRate = 500

local function SetZeroTime(zeroTime)
    ZeroTime = zeroTime
end

local function GetZeroTime()
    return ZeroTime
end

local function SetZeroTimeOffset(zeroTimeOffset)
    ZeroTimeOffset = zeroTimeOffset
end

local function GetZeroTimeOffset()
    return ZeroTimeOffset
end

local function SetTimeRate(timeRate)
    TimeRate = timeRate
end

-- 时刻转换
local function VitaTimeToReal(vitaTime)
    local realTime = vitaTime * TimeRate + (ZeroTime + ZeroTimeOffset)
    return realTime
end

-- 时段转换
local function VitaSpanToReal(vitaSpan)
    local realSpan = vitaSpan * TimeRate
    return realSpan
end

local function VitaTimeToDHM(vitaTime)
    local day = toInt(vitaTime // 1440)
    local hour = toInt(vitaTime % 1440 // 60)
    local minute = toInt(vitaTime % 60 // 1)
    return day, hour, minute
end

local function VitaTimeToStringDHM(vitaTime)
    local day, hour, minute = VitaUtil.VitaTimeToDHM(vitaTime)
    if day > 0 then
        return string.format("%dd %02d:%02d", day, hour, minute)
    else
        return string.format("%02d:%02d", hour, minute)
    end
end

local function VitaTimeToStringHM(vitaTime)
    local _, hour, minute = VitaUtil.VitaTimeToDHM(vitaTime)
    return string.format("%02d:%02d", hour, minute)
end

local function VitaTimeTodayMinute(vitaTime)
    return vitaTime % 1440
end

-- 时刻转换
local function RealTimeToVita(realTime)
    if TimeRate ~= 0 then
        local vitaTime = (realTime - (ZeroTime + ZeroTimeOffset)) // TimeRate
        return vitaTime
    end
    return 0
end

-- 时段转换
local function RealSpanToVita(realSpan)
    if TimeRate ~= 0 then
        local vitaSpan = realSpan // TimeRate
        return vitaSpan
    end
    return 0
end

local function GetTempSymbol(val)
    return Localization:GetString("137001")
end

local function ClampAttribute(val)
    return Mathf.Clamp(val, VitaDefines.AttributeMin, VitaDefines.AttributeMax)
end

local function GetAttributeFaceIcon(val)
    if val >= 50 then
        return string.format(LoadPath.UIVita, "survivor_icon_laugh")
    else
        return string.format(LoadPath.UIVita, "survivor_icon_sad")
    end
end

local function GetNextDayNight(dayNight)
    if dayNight == VitaDefines.DayNight.Day then
        return VitaDefines.DayNight.Night
    elseif dayNight == VitaDefines.DayNight.Night then
        return VitaDefines.DayNight.LateAtNight
    elseif dayNight == VitaDefines.DayNight.LateAtNight then
        return VitaDefines.DayNight.Day
    end
end

VitaUtil.SetZeroTime = SetZeroTime
VitaUtil.GetZeroTime = GetZeroTime
VitaUtil.SetZeroTimeOffset = SetZeroTimeOffset
VitaUtil.GetZeroTimeOffset = GetZeroTimeOffset
VitaUtil.SetTimeRate = SetTimeRate

VitaUtil.VitaTimeToReal = VitaTimeToReal
VitaUtil.VitaSpanToReal = VitaSpanToReal
VitaUtil.VitaTimeToDHM = VitaTimeToDHM
VitaUtil.VitaTimeToStringDHM = VitaTimeToStringDHM
VitaUtil.VitaTimeToStringHM = VitaTimeToStringHM
VitaUtil.VitaTimeTodayMinute = VitaTimeTodayMinute
VitaUtil.RealTimeToVita = RealTimeToVita
VitaUtil.RealSpanToVita = RealSpanToVita
VitaUtil.GetTempSymbol = GetTempSymbol
VitaUtil.ClampAttribute = ClampAttribute
VitaUtil.GetAttributeFaceIcon = GetAttributeFaceIcon
VitaUtil.GetNextDayNight = GetNextDayNight

return VitaUtil