---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Imaginaerum.
--- DateTime: 2023/5/25 10:12
---
local DragonBuildTemplate = BaseClass("DragonBuildTemplate")
local Localization = CS.GameEntry.Localization

local function __init(self)
    self.id = 0
    self.size = 0
    self.name = 0
    self.des = 0
    self.coordinate = ""
    self.occupy_time = 0
    self.open_time = 0
    self.circle = 0
    self.alliance_point = 0
    self.circle_alliance_point = 0
    self.pic = ""
    self.circle_pic = ""
end

local function __delete(self)
    self.id = 0
    self.size = 0
    self.name = 0
    self.des = ""
    self.coordinate = ""
    self.occupy_time = 0
    self.open_time = 0
    self.circle = 0
    self.alliance_point = 0
    self.circle_alliance_point = 0
end

local function InitData(self,row)
    if row == nil then
        return
    end

    self.id = tonumber(row:getValue("id")) or 0
    self.size = tonumber(row:getValue("size")) or 0
    self.name = row:getValue("name")
    self.des = row:getValue("des")
    self.coordinate = row:getValue("coordinate")
    self.occupy_time = tonumber(row:getValue("occupy_time")) or 0
    self.open_time = tonumber(row:getValue("open_time")) or 0
    self.circle = tonumber(row:getValue("circle")) or 0
    self.alliance_point = tonumber(row:getValue("alliance_point")) or 0
    self.circle_alliance_point = tonumber(row:getValue("circle_alliance_point")) or 0
    self.pic = row:getValue("pic")
    
    self.effectList = {}
    local effectStr = row:getValue("effect")
    local str =  string.split(effectStr,"|")
    if #str>0 then
        for i =1,#str do
            local param = string.split(str[i],";")
            if #param>=2 then
                local oneData = {}
                oneData.id = param[1]
                oneData.value = tonumber(param[2])
                oneData.descID = GetTableData(TableName.EffectNumDesc, param[1], "des")
                oneData.num_type = toInt(GetTableData(TableName.EffectNumDesc, param[1], "type"))
                table.insert(self.effectList,oneData)
            end
        end
    end
end

local function GetModelPath(self)
    local fullPath = "Assets/Main/Prefab_Dir/DragonBuilding/dragon_"..self.id..".prefab"
    return fullPath
end

local function GetCircleIconPath(self)
    return "Assets/Main/Sprites/UI/UIDragon/"..self.pic
end

local function GetIconPath(self)
    return "Assets/Main/Sprites/UI/UIDragon/"..self.pic
end

DragonBuildTemplate.__init = __init
DragonBuildTemplate.__delete = __delete
DragonBuildTemplate.InitData = InitData
DragonBuildTemplate.GetModelPath = GetModelPath
DragonBuildTemplate.GetCircleIconPath =GetCircleIconPath
DragonBuildTemplate.GetIconPath =GetIconPath
return DragonBuildTemplate