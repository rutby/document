---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 1020.
--- DateTime: 2023/5/23 18:15
---

local ScratchOffGameTemplate = BaseClass("ScratchOffGameTemplate")

local function __init(self)
    self.id = 0
    self.activityId = 0     -- 活动ID
    self.costItemIconPath = ""  -- 抽奖花费道具图标
    self.oneDrawCostNum = 0     -- 单抽正常花费数额
    self.oneDrawFreeCostNum = 0 -- 单抽减免花费数额
    self.tenDrawCostNum = 0         -- 十连正常花费数额
    self.tenDrawFreeCostNum = 0     -- 十连减免花费数额
    self.costItemId = 0         -- 抽奖花费道具id
    self.costItemType = 0      -- 抽奖花费道具类型 1 资源 2 道具
    self.extraRewardItemId = {}      -- 额外奖励道具id
    self.extraRewardItemNum = {}      -- 额外奖励道具数量
    self.extraRewardIconPath = {}   -- 额外奖励图标
    self.heroIdList = {}       -- 英雄ID
    self.heroPicList = {}       -- 英雄图片
end

local function __delete(self)
    self.id = nil
    self.activityId = nil     -- 活动ID
    self.costItemIconPath = nil  -- 抽奖花费道具图标
    self.oneDrawCostNum = nil     -- 单抽正常花费数额
    self.oneDrawFreeCostNum = nil -- 单抽减免花费数额
    self.tenDrawCostNum = nil         -- 十连正常花费数额
    self.tenDrawFreeCostNum = nil     -- 十连减免花费数额
    self.costItemId = nil         -- 抽奖花费道具id
    self.costItemType = nil      -- 抽奖花费道具类型
    self.extraRewardItemId = nil      -- 额外奖励道具id
    self.extraRewardItemNum = nil      -- 额外奖励道具数量
    self.extraRewardIconPath = nil   -- 额外奖励图标
    self.heroIdList = nil       -- 英雄ID
    self.heroPicList = nil       -- 英雄图片
end

local function ParseData(self,row)
    if row ==nil then
        return
    end
    self.id = row:getValue("id")
    self.activityId = row:getValue("activity")
    
    local cost_item = row:getValue("cost_item")
    local spl_cost_item = string.split_ss_array(cost_item,";")
    local costType = spl_cost_item[1]     -- 1 资源 2 道具
    self.costItemType = costType
    local costItemId = spl_cost_item[2]
    self.costItemId = costItemId
    if costType == 2 then
        local icon = DataCenter.ItemTemplateManager:GetItemTemplate(costItemId).icon
        self.costItemIconPath = string.format(LoadPath.ItemPath, icon)
    end
    
    local cost_1 = row:getValue("cost_1")
    local spl_cost_1 = string.split_ss_array(cost_1,";")
    self.oneDrawFreeCostNum = spl_cost_1[1]
    self.oneDrawCostNum = spl_cost_1[2]
    
    local cost_10 = row:getValue("cost_10")
    local spl_cost_10 = string.split_ss_array(cost_10,";")
    self.tenDrawFreeCostNum = spl_cost_10[1]
    self.tenDrawCostNum = spl_cost_10[2]

    local reward_extra = row:getValue("reward_extra")
    local spl_reward_extra = string.split(reward_extra,"|")
    for i = 1,#spl_reward_extra do
        local spl_reward_extra2 = string.split_ss_array(spl_reward_extra[i],";")
        local itemId = spl_reward_extra2[1]
        self.extraRewardItemId[i] = itemId
        self.extraRewardItemNum[i] = spl_reward_extra2[2]      -- 额外奖励道具数量
        local icon = DataCenter.ItemTemplateManager:GetItemTemplate(itemId).icon
        self.extraRewardIconPath[i] = string.format(LoadPath.ItemPath, icon)
    end
    
    local hero_choose = row:getValue("hero_choose")
    if hero_choose then
        local spl_hero_choose = string.split(hero_choose, "|")
        for k,v in ipairs(spl_hero_choose) do
            table.insert(self.heroIdList, tonumber(v))
        end
    end

    local hero_pic = row:getValue("hero_pic")
    if hero_pic then
        local spl_hero_pic = string.split(hero_pic, "|")
        for k,v in ipairs(spl_hero_pic) do
            table.insert(self.heroPicList, v)
        end
    end

end



ScratchOffGameTemplate.__init = __init
ScratchOffGameTemplate.__delete = __delete
ScratchOffGameTemplate.ParseData = ParseData

return ScratchOffGameTemplate