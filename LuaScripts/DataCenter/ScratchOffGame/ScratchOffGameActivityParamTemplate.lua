---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 1020.
--- DateTime: 2023/5/24 15:17
---

local ScratchOffGameActivityParamTemplate = BaseClass("ScratchOffGameActivityParamTemplate")

local function __init(self)
    self.activityId = 0     -- 活动ID
    self.totalLotteryCount = 0  -- 活动总抽取次数(没用)
    self.maxLotteryCount = 0    -- 每日最大抽取次數
    self.oneLotteryCount = 0     -- 今日单抽次数
    self.tenLotteryCount = 0 -- 今日十连次数
    self.score = 0         -- 当前积分
    self.chooseIndex = 0    -- 当前选择的英雄
    self.extraRewardScore = 0   -- 额外奖励分数
    self.diamondPool = 0     -- 奖池钻石数量
end

local function __delete(self)
    self.activityId = nil     -- 活动ID
    self.totalLotteryCount = nil  -- 活动总抽取次数
    self.maxLotteryCount = nil    -- 每日最大抽取次數
    self.oneLotteryCount = nil     -- 今日单抽次数
    self.tenLotteryCount = nil -- 今日十连次数
    self.score = nil         -- 当前积分
    self.chooseIndex = nil      -- 当前选择的英雄
    self.extraRewardScore = nil   -- 额外奖励分数
    self.diamondPool = nil     -- 奖池钻石数量
end

local function ParamData(self, msg)
    if msg ==nil then
        return
    end
    if msg["activityId"] then
        self.activityId = msg["activityId"]          -- 活动ID
        local id =  DataCenter.ScratchOffGameManager:GetScratchIdByActivityId(self.activityId)
        self.maxLotteryCount = GetTableData("activity_scratch", id, "draw_max")   -- 每日最大抽取次數
        self.extraRewardScore = GetTableData("activity_scratch", id, "score_reward_extra")   -- 额外奖励分数
    end
    if msg["scratchInfo"] then
        self.totalLotteryCount = msg["scratchInfo"].totalLotteryCount  -- 活动总抽取次数
        self.oneLotteryCount = msg["scratchInfo"].oneLotteryCount     -- 今日单抽次数
        self.tenLotteryCount = msg["scratchInfo"].tenLotteryCount -- 今日十连次数
        self.score = msg["scratchInfo"].score         -- 当前积分
        self.chooseIndex = math.max(1, msg["scratchInfo"].chooseIndex)       -- 当前选择的英雄
    end
    if msg["diamondPool"] then
        self.diamondPool  = msg["diamondPool"]          -- 奖池钻石数量
    end
end

local function GetRemainLotteryCount(self)
    local remainCount = self.maxLotteryCount - self.oneLotteryCount - 10 * self.tenLotteryCount
    return remainCount
end

ScratchOffGameActivityParamTemplate.__init = __init
ScratchOffGameActivityParamTemplate.__delete = __delete
ScratchOffGameActivityParamTemplate.ParamData = ParamData
ScratchOffGameActivityParamTemplate.GetRemainLotteryCount = GetRemainLotteryCount

return ScratchOffGameActivityParamTemplate