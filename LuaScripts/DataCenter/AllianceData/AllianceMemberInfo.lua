---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by guqu.
--- DateTime: 2020/7/22 22:08
---
local AllianceMemberInfo = BaseClass("AllianceMemberInfo")

local function __init(self)
    --盟内成员信息和申请的玩家信息
    self.mainCityLv =0--大本等级
    self.pic ="" --头像
    self.picVer =0
    self.uid =""
    self.offLineTime = 0--离线时间
    self.pointId =0 --坐标
    self.name =""--名称
    self.rank =0--阶级
    self.online =false --是否在线
    self.power = 0--战力
    self.playerSelf =""--玩家自述
    self.monthCardEndTime = -1--月卡到期时间s
    self.armyKill = 0--杀敌数
    self.careerType = CareerType.None--职业类型
    self.careerLv = 0--职业等级
    self.careerPos = AllianceCareerPosType.No --1 已委任 0 未委任
    self.headSkinId = nil
    self.headSkinET = nil
    self.sex = SexType.None
end

local function __delete(self)
    self.mainCityLv =nil
    self.pic =nil
    self.picVer =nil
    self.uid =nil
    self.offLineTime = nil
    self.pointId =nil
    self.name =nil
    self.rank =nil
    self.online =nil
    self.power =nil
    self.playerSelf =nil
    self.monthCardEndTime = nil
    self.armyKill = nil
    self.careerType = nil
    self.careerLv = nil
    self.careerPos = nil
    self.headSkinId = nil
    self.headSkinET = nil
    self.sex = SexType.None
end

local function ParseData(self,message)
    if message ==nil then
        return
    end
    if message["mainCityLv"]~=nil then
        self.mainCityLv = message["mainCityLv"]
    end
    if message["pic"]~=nil then
        self.pic = message["pic"]
    end
    if message["picVer"]~=nil then
        self.picVer = message["picVer"]
    end
    if message["uid"]~=nil then
        self.uid = message["uid"]
    end
    if message["offLineTime"]~=nil then
        self.offLineTime = message["offLineTime"]
    end
    if message["pointId"]~=nil then
        self.pointId = message["pointId"]
    end
    if message["name"]~=nil then
        self.name = message["name"]
    end
    if message["rank"]~=nil then
        self:SetRank(message["rank"])
    end
    if message["online"]~=nil then
        self.online = message["online"]
    end
    if message["power"]~=nil then
        self.power = message["power"]
    end
    if message["playerSelf"]~=nil then
        self.playerSelf = message["playerSelf"]
    end
    if message["playerName"]~=nil then
        self.name = message["playerName"]
    end
    if message["userId"]~=nil then
        self.uid = message["userId"]
    end
    if message["monthCardEndTime"] then
        self.monthCardEndTime = message["monthCardEndTime"]
    end
    if message["headSkinId"] ~= nil  then
        self.headSkinId = message["headSkinId"]
    end
    if message["headSkinET"] ~= nil  then
        self.headSkinET = message["headSkinET"]
    end
    if message["armyKill"] then
        self.armyKill = message["armyKill"]
    end
    if message["careerType"] then
        self.careerType = message["careerType"]
    end
    if message["careerLv"] then
        self.careerLv = message["careerLv"]
    end
    if message["careerPos"] then
        self.careerPos = message["careerPos"]
    end
    if message["sex"] and SexUtil.IsUnLockSex() then
        self.sex = message["sex"]
    end
end

local function SetRank(self,rank)
    self.rank =rank
end

local function GetRank(self)
	return self.rank
end

local function GetHeadBgImg(self)
    --local headBgImg = nil
    --
    local serverTimeS = UITimeManager:GetInstance():GetServerSeconds()
    --if self.monthCardEndTime and self.monthCardEndTime > serverTimeS then
    --    headBgImg = "Common_playerbg_golloes"
    --end
    local headBgImg = DataCenter.DecorationDataManager:GetHeadFrame(self.headSkinId, self.headSkinET, self.monthCardEndTime and self.monthCardEndTime > serverTimeS)
    return headBgImg

    --
    --if headBgImg and headBgImg ~= "" then
    --    return string.format(LoadPath.CommonNewPath,headBgImg)
    --end
end

local function CheckIfIsInactivePlayer(self)
    if self.online then
        return false 
    end
    local confTimeH = DataCenter.AllianceMemberDataManager:GetInactiveConfTime(self.power)
    local offlineInterval = UITimeManager:GetInstance():GetServerTime() - self.offLineTime
    if offlineInterval >= (confTimeH * 3600000) then
        return true
    end
end

local function SetCareerPos(self,pos)
    self.careerPos = pos
end

AllianceMemberInfo.__init = __init
AllianceMemberInfo.__delete = __delete
AllianceMemberInfo.ParseData = ParseData
AllianceMemberInfo.SetRank = SetRank
AllianceMemberInfo.GetRank = GetRank
AllianceMemberInfo.GetHeadBgImg = GetHeadBgImg
AllianceMemberInfo.SetCareerPos = SetCareerPos
AllianceMemberInfo.CheckIfIsInactivePlayer = CheckIfIsInactivePlayer

return AllianceMemberInfo