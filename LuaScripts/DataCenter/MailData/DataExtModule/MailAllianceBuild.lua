---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Imaginaerum.
--- DateTime: 2023/3/1 10:42
---
local repaidJson = require "rapidjson"
local Localization = CS.GameEntry.Localization
local MailAllianceBuild = BaseClass("MailAllianceBuild")
--"obj":{"placeUser":{"careerType":5,"country":"CN","sex":1,"alName":"3345","pic":"","picver":1,"serverId":998,"uid":"9000019158000998","careerLevel":7,"name":"rushgo","headFrame":1,"power":25269515,"abbr":"334"},"type":1,"building":{"allianceId":"cae4c0b198ad486f85112bc131da1304","buildSpeed":0,"pointId":959867,"srcServer":998,"level":1,"durability":100,"buildId":41000,"alAbbr":"334","uuid":947698299782293107,"serverId":998,"lastBuildTime":1677556038638,"status":0}}}
local function _init(self)
    self.type = 1--type 1 建造 2 修复 3 拆除
    self.placeUser  = nil
    self.building = nil
end

local function ParseContent(self, mailContent)
    self._jsonContent = mailContent
    if (table.IsNullOrEmpty(self._jsonContent)) then
        return
    end
    self.type = self._jsonContent["type"] or 1

    self.placeUser = self._jsonContent["placeUser"]
    self.building = self._jsonContent["building"]
end

local function GetTitle(self)
    local name = ""
    local buildName = ""
    local buildId = self.building.buildId
    local template = DataCenter.AllianceMineManager:GetAllianceMineTemplate(buildId)
    if template~=nil then
        buildName = Localization:GetString(template.name)
    end
    if self.type== 1 then
        name = Localization:GetString("110570",buildName)
    elseif self.type == 2 then
        name = Localization:GetString("110572",buildName)
    elseif self.type == 3 or self.type == 4 then
        name = Localization:GetString("110566",buildName)
    end
    return name
end
MailAllianceBuild._init = _init
MailAllianceBuild.ParseContent = ParseContent
MailAllianceBuild.GetTitle = GetTitle
return MailAllianceBuild