---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Imaginaerum.
--- DateTime: 2023/5/26 11:14
---
local Localization = CS.GameEntry.Localization
local MailArmyResultBase = require "DataCenter.MailData.BattleReport.MailArmyResultBase"
local MailArmyResult_DragonBuild = BaseClass("MailArmyResult_DragonBuild", MailArmyResultBase)

function MailArmyResult_DragonBuild:InitData(armyResult)
    MailArmyResultBase.InitData(self, armyResult)

    self._isDefeat = armyResult["isDefeat"]
    local armyResultByType = self:GetArmyResultByType(armyResult)
    self._cityLevel = armyResultByType["level"] or 0
    self._buildId = armyResultByType["buildId"] or 0

    local _armyResultBase = armyResultByType["base"]
    if (_armyResultBase == nil) then
        return
    end

    local armyObj = _armyResultBase["armyObj"] or {}
    self._armyObj = self:InitCombatUnitData(armyObj)

    local afterArmyObj = _armyResultBase["afterArmyObj"] or {}
    self._afterArmyObj = self:InitCombatUnitData(afterArmyObj)

    self:CheckArmyObj()

    self:InitDestroyValue(_armyResultBase)
    self:InitDamagePercentInfo(_armyResultBase)
end

function MailArmyResult_DragonBuild:GetName()
    local template = DataCenter.DragonBuildTemplateManager:GetTemplate(self._buildId)
    if template~=nil then
        return Localization:GetString(template.name)
    end
end
function MailArmyResult_DragonBuild:GetPic()
    local template = DataCenter.DragonBuildTemplateManager:GetTemplate(self._buildId)
    if template~=nil then
        return template:GetCircleIconPath()
    end
end

function MailArmyResult_DragonBuild:GetBuildId()
    return self._buildId
end
function MailArmyResult_DragonBuild:GetName_ForShare()
    local param = {["type"] = "dialog"}
    local template = DataCenter.DragonBuildTemplateManager:GetTemplate(self._buildId)
    if template~=nil then
        param["name"] = template.name
    end

    return param
end

return MailArmyResult_DragonBuild