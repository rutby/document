---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 1.
--- DateTime: 2022/12/5 10:38
---


local DecorationTemplate = BaseClass("DecorationTemplate")
local Localization = CS.GameEntry.Localization

function DecorationTemplate:__init()
    self.id = 0
    self.type = 0
    self.name = 0
    self.goods_desc = 0
    self.icon = ""
    self.img = ""
    self.type_gain = 0
    self.quality = 0
    self.order = 0
    self.model = ""--城内模型名字
    self.model_world = ""--世界模型名字
    self.gainMethod = {}
    self.wearEffect = {}
    self.ownEffect = {}
    self.hot = 0
    self.gain_desc = 0
    self.model_effect = {}--行军特效  炮口|弹道|被攻击
    self.marchModelName = {}--行军预制体名字
end

function DecorationTemplate:__delete()
    self.id = 0
    self.type = 0
    self.name = 0
    self.goods_desc = 0
    self.icon = ""
    self.img = ""
    self.type_gain = 0
    self.quality = 0
    self.order = 0
    self.model = ""--城内模型名字
    self.model_world = ""--世界模型名字
    self.gainMethod = {}
    self.wearEffect = {}
    self.ownEffect = {}
    self.hot = 0
    self.gain_desc = 0
    self.model_effect = {}--行军特效  炮口|弹道|被攻击
    self.marchModelName = {}--行军预制体名字
end

function DecorationTemplate:InitData(row)
    if row == nil then
        return
    end
    self.id = row:getValue("id") or 0
    self.type = row:getValue("type") or 0
    self.name = row:getValue("name") or 0
    self.goods_desc = row:getValue("goods_desc") or 0
    self.icon = string.format(LoadPath.ItemPath, row:getValue("icon") or "")
    local img = row:getValue("image") or ""
    if self.type == DecorationType.DecorationType_TittleName then
        self.img = string.format(LoadPath.UITitleIcon, img)
    else
        self.img = string.format(LoadPath.UIDecoration, img)
    end
    self.type_gain = row:getValue("type_gain") or 0
    self.quality = row:getValue("quality") or 0
    self.order = row:getValue("order") or 0
    self.model = row:getValue("model") or ""
    self.model_world = row:getValue("model_world") or ""
    self.marchModelName = {}
    self.marchModelName[MarchPrefabType.Self] = self.model_world
    self.marchModelName[MarchPrefabType.Alliance] = self.model_world .. "_Blue"
    self.marchModelName[MarchPrefabType.Camp] = self.model_world .. "_Yellow"
    self.marchModelName[MarchPrefabType.Other] = self.model_world .. "_Red"
    
    self.gainMethod = {}
    local str = row:getValue("para_gain") or ""
    local vec1 = string.split_ss_array(str, "|")
    for k, v in ipairs(vec1) do
        local effectVec = string.split_ii_array(v, ";")
        if effectVec[2] ~= nil then
            local para = {}
            para.id = effectVec[1]
            para.time = effectVec[2]
            para.index = k
            para.skinId = self.id
            table.insert(self.gainMethod, para)
        end
    end

    self.wearEffect = {}
    str = row:getValue("effect_wear") or ""
    vec1 = string.split_ss_array(str, "|")
    for k, v in ipairs(vec1) do
        local effectVec = string.split_ii_array(v, ";")
        if effectVec[2] ~= nil then
            local para = {}
            para.key = effectVec[1]
            para.value = effectVec[2]
            table.insert(self.wearEffect, para)
        end
    end

    self.ownEffect = {}
    str = row:getValue("effect_gain") or ""
    vec1 = string.split_ss_array(str, "|")
    for k, v in ipairs(vec1) do
        local effectVec = string.split_ii_array(v, ";")
        if effectVec[2] ~= nil then
            local para = {}
            para.key = effectVec[1]
            para.value = effectVec[2]
            table.insert(self.ownEffect, para)
        end
    end
    self.hot = row:getValue("hot") or 0
    if self.type == DecorationType.DecorationType_TittleName then
        self.gain_desc = row:getValue("gain_desc") or 0
    else
        self.gain_desc = 0
    end
    self.model_effect = {}
    local temp =  row:getValue("model_effect") or ""
    if temp ~= "" then
        self.model_effect = string.split_ss_array(temp, "|")
    end
end

function DecorationTemplate:IsHot()
    return self.hot == 1
end

function DecorationTemplate:IsDefault()
    return self.type_gain == DecorationGainType.DecorationGainType_Default
end

--获得行军炮口特效名字
function DecorationTemplate:GetMarchEffectPK()
    return self.model_effect[1] or MarchEffectDefaultPK
end

--获得行军炮弹特效名字
function DecorationTemplate:GetMarchEffectPD()
    return self.model_effect[2] or MarchEffectDefaultPD
end

--获得行军攻击特效名字
function DecorationTemplate:GetMarchEffectHit()
    return self.model_effect[3] or MarchEffectDefaultHit
end

--获得行军飞行高度
function DecorationTemplate:GetMarchEffectHeight()
    return MarchEffectDefaultHeight
end

--获得行军预制体名字
function DecorationTemplate:GetMarchPrefabName(marchPrefabType)
    return self.marchModelName[marchPrefabType]
end

return DecorationTemplate