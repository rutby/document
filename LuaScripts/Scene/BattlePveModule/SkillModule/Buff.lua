---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by mac.
--- DateTime: 3/25/22 10:36 AM
---
--[[
    Buff对象.这个是用来存储BUFF对应的起始回合数以及持续轮次.用来控制该BUFF是否还生效,
    对应的表现，还是走Skill
]]
local Buff = BaseClass("Buff")

function Buff:__init()
    self.m_startRoundIdx = 0
    self.m_lastRoundCnt = 0
end

function Buff:SetData( buffItem )
    self.m_actionItem = buffItem:GetActionItem()
    self.m_startRoundIdx = buffItem:GetStartRoundIndex()
    self.m_lastRoundCnt = buffItem:GetLastTimes()
end

--[[
    关于buff的处理这个地方有两个作用.
    一个是用来挂buff标识
    一个是用来做数值响应
]]
function Buff:DoAction()
    self.m_lastRoundCnt = self.m_lastRoundCnt - 1
    self:DoAction_Show()
    self:DoAction_Effect()
    if (self.m_lastRoundCnt < 0) then
        -- 表示BUFF到期了
        self:RemoveBuff()
    end
end

-- 显示
function Buff:DoAction_Show()
    -- 这个地方用来挂特效.比如说加血.我们就直接播一次粒子特效
    -- 如果是护盾这种的,就第一次我们挂上,中间不处理,最后一次移除
end

-- 数值
function Buff:DoAction_Effect()
    if (self.m_actionItem ~= nil) then
        PveActorMgr:GetInstance():PlaySkillWithActionItem(self.m_actionItem)
    end
end

function Buff:RemoveBuff()
    
end

return Buff