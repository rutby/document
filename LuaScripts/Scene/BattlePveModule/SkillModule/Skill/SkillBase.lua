---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by mac.
--- DateTime: 3/24/22 8:40 PM
---
--[[
    技能基础类.在这个类上面对外一个接口
    doAttack,这个承接一个ActionItem,在每个技能上做每个技能的处理
]]

local SkillBase = BaseClass("SkillBase")


function SkillBase:__init()
    self.m_callback = nil
end


function SkillBase:DoAttack( actionItem, callback )
    self.m_actionItem = actionItem
    self.m_callback = callback
end

function SkillBase:DoNext(isSpecialSkill)
    if (PveActorMgr:GetInstance():IsStopPlay()) then
        if (self.m_atkModelObj ~= nil) then
            self.m_atkModelObj:PlayStopFire()
        end
        self:DoCallback()
        return
    end
   local time = 2.5
    if isSpecialSkill then
        time =1
    end
    local speed = PveActorMgr:GetInstance():GetSpeed()
    -- 技能延时1.5s再走下一步吧
    TimerManager:GetInstance():DelayInvoke(function()
        if (self.m_atkModelObj ~= nil) then
            self.m_atkModelObj:PlayStopFire()
        end
        self:DoCallback()
    end, time* speed)
end

function SkillBase:DoCallback()
    if (self.m_callback ~= nil) then
        self.m_callback()
    end
end

return SkillBase