---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Imaginaerum.
--- DateTime: 2022/3/15 15:21
---
local WorldNewsTip = BaseClass("WorldNewsTip")
local UIEventTrigger = CS.UIEventTrigger
local collider_path = "Img/Collider"

local function OnCreate(self, request)
    self.request = request
    self.gameObject = request.gameObject
    self.transform = request.gameObject.transform
    self.collider = self.transform:Find(collider_path):GetComponent(typeof(UIEventTrigger))
    self.collider.onPointerClick = function()
        self:OnClick()
    end
end

local function OnDestroy(self)
    self.request = nil
    self.data = nil
    if self.collider~=nil and IsNull(self.collider)== false then
        self.collider.onPointerClick = nil
    end
    self.collider = nil
end

local function OnClick(self)
    CS.SceneManager.World:SetUseInput(false)
    GoToUtil.GotoOpenView(UIWindowNames.UIWorldNewsTips,{anim = true},self.data.id)
end

local function SetData(self, data)
    self.data = data
    local pos = SceneUtils.TileIndexToWorld(self.data.id,ForceChangeScene.World)
    self:SetPos(pos)
end

local function SetPos(self, pos)
    local t = pos
    self.transform:Set_position(t.x, t.y, t.z)
end

WorldNewsTip.OnCreate = OnCreate
WorldNewsTip.OnDestroy = OnDestroy
WorldNewsTip.OnClick = OnClick
WorldNewsTip.SetData = SetData
WorldNewsTip.SetPos = SetPos
return WorldNewsTip