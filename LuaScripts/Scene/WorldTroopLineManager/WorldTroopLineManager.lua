---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Imaginaerum.
--- DateTime: 27/3/2024 上午11:31
---
local WorldTroopLine = require"Scene.WorldTroopLineManager.WorldTroopLine"
local WorldTroopLineManager = BaseClass("WorldTroopLineManager", Singleton)
local ResourceManager = CS.GameEntry.Resource
function WorldTroopLineManager:__init()
    self.troopLines = {}
end

function WorldTroopLineManager:__delete()
    self:DestroyAll()
    self.troopLines = {}
end
function WorldTroopLineManager:StartUp()
    self.troopLines = {}
end
function WorldTroopLineManager:Close()
    self:DestroyAll()
    self.troopLines = {}
end
function WorldTroopLineManager:DestroyAll()
    if self.troopLines~=nil then
        for k,v in pairs(self.troopLines) do
            v:Destroy()
        end
    end
    self.troopLines = {}
end

function WorldTroopLineManager:DestroyTroopLine(marchUuid)
    if self.troopLines[marchUuid]~=nil then
        self.troopLines[marchUuid]:Destroy()
        self.troopLines[marchUuid] = nil
    end
end

function WorldTroopLineManager:CreateTroopLine(marchUuid,marchType)
    if marchType == NewMarchType.MONSTER or marchType == NewMarchType.BOSS then
        return
    end
    local line = self.troopLines[marchUuid]
    if line~=nil then
        line:Clear()
        line:SetColor()
    else
        local newLine = WorldTroopLine.New()
        newLine:OnCreateMarchLine(marchUuid)
        self.troopLines[marchUuid] = newLine
    end
end
function WorldTroopLineManager:UpdateTroopLine(marchUuid,pathStr,targetPos,realTargetPos,needRefresh,clear)
    if pathStr == nil or pathStr == "" then
        return
    end
    local line = self.troopLines[marchUuid]
    if line == nil then
        return
    end
    if clear == true then
        line:Clear()
    end
    line:SetMovePath(pathStr,targetPos,realTargetPos,needRefresh)
end

function WorldTroopLineManager:IsTroopLineCreate(marchUuid)
    return (self.troopLines[marchUuid]~=nil)
end

return WorldTroopLineManager