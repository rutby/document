---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by wjy.
--- DateTime: 2023/1/10
---
---

local AddSkillTriggerEvent = BaseClass("AddSkillTriggerEvent")
local AddKillEffect = "Assets/_Art/Effect_B/Prefab/Arms/APS/VFX_animal_grow_big.prefab"

function AddSkillTriggerEvent:__init()
    --Logger.LogError("__init")
end

function AddSkillTriggerEvent:__delete()
    --Logger.LogError("__delete")
end
function AddSkillTriggerEvent:Execute(param)
    -- 随机player身上加特定skill
    local rand = {}
    local heros = DataCenter.LWBattleManager.logic.team.teamUnits

    for _, hero in pairs(heros) do
        table.insert(rand,hero)
    end
    if #rand > 0 then
        local tar = rand[math.random(#rand)]
        local skillMeta = DataCenter.HeroSkillTemplateManager:GetTemplate(param.para)
        if skillMeta == nil then
            Logger.LogError("找不到技能，id为:" .. param.para)
        end
        tar.skillManager:AddSkill(skillMeta)
        DataCenter.LWBattleManager.logic:ShowEffectObj(
            AddKillEffect, nil,nil,5,tar.transform
        )
    end
end

return AddSkillTriggerEvent 