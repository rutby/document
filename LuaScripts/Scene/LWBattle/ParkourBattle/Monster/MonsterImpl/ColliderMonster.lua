---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by w.
--- DateTime: 2023/1/9 20:12
---
local base = require "Scene.LWBattle.ParkourBattle.Monster.MonsterImpl.ColliderMonsterBase"
---@class Scene.LWBattle.ParkourBattle.Monster.MonsterImpl.ColliderMonster : Scene.LWBattle.ParkourBattle.Monster.MonsterImp.ColliderMonsterBase
local ColliderMonster = BaseClass("ColliderMonster",base)
local HPBarCell = require "DataCenter.ZombieBattle.HpBar.HpBarCell"
local Const = require("Scene.LWBattle.Const")



function ColliderMonster:OnLoadComplete()
    base.OnLoadComplete(self)
    --hp
    if self.monsterMeta.hp_bar_num > 0 then
        self.hpBar = HPBarCell.New(Const.HPBarStyle.Enemy,self.transform,self.monsterMeta.hp_bar_height)
        self.hpBar:LoadAndSetHp(self.curBlood, self.maxBlood)
    end
end

function ColliderMonster:OnUpdate()
    base.OnUpdate(self)
    if self.hpBar then
        self.hpBar:Update()
    end
end


function ColliderMonster:BeAttack(hurt,hitPoint,hitDir,whiteTime,stiffTime,dir)
    base.BeAttack(self,hurt,hitPoint,hitDir,whiteTime,stiffTime,dir)
    if self.curBlood > 0 and self.hpBar then
        self.hpBar:SetHp(self.curBlood, self.maxBlood, self:GetShieldValue())
    end
end


function ColliderMonster:DestroyView()
    base.DestroyView(self)
    if self.hpBar then
        self.hpBar:Destroy()
        self.hpBar = nil
    end
end


return ColliderMonster
