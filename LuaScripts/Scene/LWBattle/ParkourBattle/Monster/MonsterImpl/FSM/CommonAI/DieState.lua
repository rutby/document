---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by w.
--- DateTime: 2023/1/10 14:43
---

local Const = require("Scene.LWBattle.Const")
local DieState = BaseClass("DieState")

function DieState:__init(unit)
    self.zombie = unit
end

function DieState:__delete()
    self.zombie = nil
    if self.timer then
        self.timer:Stop()
        self.timer=nil
    end
    
end

function DieState:OnEnter()
    self.zombie:RemoveDestination()
    self.zombie:PlaySimpleAnim(ZombieAnim.Dead,1)
    self.zombie:EnableRagdoll()
    local delay
    if self.zombie.monsterMeta.monster_type == Const.MonsterType.Boss then
        delay = 4
    else
        delay = 1
    end
    self.timer=TimerManager:DelayInvoke(function()
        self.zombie.mgr:RemoveMonster(self.zombie.guid)
    end, delay)
end
function DieState:OnExit()
    self.zombie:DisableRagdoll()
end
function DieState:OnUpdate()
    
end


return DieState