---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 1022.
--- DateTime: 2023/10/25 11:34
---护盾特效
local VFXBase = require("Scene.PVEBattleLevel.VFX.VFXBase")
local ShieldVFX = BaseClass("ShieldVFX",VFXBase)

function ShieldVFX:InitAsset()
    VFXBase.InitAsset(self)
    self.m_animator = self.m_transform:GetComponentInChildren(typeof(CS.UnityEngine.Animator))
end

function ShieldVFX:PlayEnd()
    self.endTime = Time.time
    if not IsNull(self.m_animator) then
        self.m_animator:SetTrigger("End")
    end
end

function ShieldVFX:CheckComplete()
    local isComplete = VFXBase.CheckComplete(self)
    if self.endTime and not isComplete then
        return Time.time - self.endTime > 3 --如果一直没有完成，则在播放结束动画后3秒完成
    end
    return isComplete
end

function ShieldVFX:Destroy()
    VFXBase.Destroy(self)
    self.m_animator = nil
end

return ShieldVFX