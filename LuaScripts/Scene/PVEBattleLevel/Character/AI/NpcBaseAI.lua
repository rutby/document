---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by ycheng.
--- DateTime: 2022/12/6 15:48
---
local NpcBaseAI = BaseClass("NpcMovePathAI", ListenerHandler)
local States = require("Util.States")

function NpcBaseAI:__init(owner,completeHandler)
    self.m_owner = owner
    self.m_starting = false
    self.onCompleteCallBack = completeHandler
    self.m_states = States.New(self)
    
    self:__initState()
end 
--子类复写
function NpcBaseAI:__initState()
    
end 

function NpcBaseAI:SetData(data,callback)
    self.m_data = data
    self.onCallback = callback
end 

function NpcBaseAI:OnUpdate(deltaTime)
    if self.m_starting then
        self.m_states:Update(deltaTime)
    end
end

function NpcBaseAI:Start()
    self.m_starting = true
end

function NpcBaseAI:Stop()
    self.m_starting = false
end

function NpcBaseAI:OnAIComplete()
    self:Stop()
    if self.onCompleteCallBack ~= nil then
        self.onCompleteCallBack()
    end
end

function NpcBaseAI:TriggerCallBack()
    if self.onCallback ~= nil then
        self.onCallback()
    end
end

function NpcBaseAI:OnStateComplete(type,data)
end

function NpcBaseAI:Destroy()
    self.m_owner = nil
    self.m_data = nil
    self.onCompleteCallBack = nil
    self.onCallback = nil
    self.m_states:Dispose()
    self.m_states = nil
end

return NpcBaseAI