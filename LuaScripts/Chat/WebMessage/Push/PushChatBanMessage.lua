---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by shimin.
--- DateTime: 2020/12/17 16:53
---

local WebSocketBaseMessage = require("Chat.WebMessage.Config.WebSocketBaseMessage")
local PushChatBanMessage = BaseClass("PushChatBanMessage", WebSocketBaseMessage)

local function OnCreate(self)
    --base.OnCreate(self)
end

local function HandleMessage(self, serverData)
    --base.HandleMessage(self, serverData)
    if serverData.data ~= nil and serverData.data ~= "" then
       if serverData.params then 
            local params = serverData.params
            local uid = params.uid
            local chatBantime = 0;
            if chatBantime == 9223372036854775807 or chatBantime == -1 then 
                chatBantime = -1
            else 
                chatBantime = math.floor(chatBantime/1000)
            end 
            local banName = params.banGmName
            
			ChatManager2:GetInstance().Restrict:chatBanOrUnBan(uid,banName,chatBantime,1)
			ChatManager2:GetInstance().User:updateBanTime(uid,chatBantime)
            -- CCSafeNotificationCenter::sharedNotificationCenter()->postNotification(MSG_CHAT_BAN);
        end  
    end
end

PushChatBanMessage.OnCreate = OnCreate
PushChatBanMessage.HandleMessage = HandleMessage
return PushChatBanMessage