---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Imaginaerum.
--- DateTime: 2021/7/20 14:52
---
local FormationHeroSelectList = BaseClass("FormationHeroSelectList",UIBaseContainer)
local base = UIBaseContainer
local FormationHeroSelectItem = require "UI.UIFormationDefence.UIFormationDefenceTable.Component.FormationHeroSelectItem"
local Localization = CS.GameEntry.Localization

local scroll_view_path = "ScrollView"
local select_hero_btn_path = "BtnBack"
local hero_des_path = "heroDes"
local function OnCreate(self)
    base.OnCreate(self)
    self.close_select_btn = self:AddComponent(UIButton,select_hero_btn_path)
    self.close_select_btn:SetOnClick(function()  
SoundUtil.PlayEffect(SoundAssets.Music_Effect_Button)
        self.view:OnReturnClick()
    end)
    self.hero_des = self:AddComponent(UITextMeshProUGUIEx,hero_des_path)
    self.hero_des:SetLocalText(300539) 
    self.ScrollView = self:AddComponent(UIScrollView,scroll_view_path)
    self.ScrollView:SetOnItemMoveIn(function(itemObj, index)
        self:OnItemMoveIn(itemObj, index)
    end)
    self.ScrollView:SetOnItemMoveOut(function(itemObj, index)
        self:OnItemMoveOut(itemObj, index)
    end)
    self.list ={}
end

local function OnDestroy(self)
    self.ScrollView = nil
    self.close_select_btn = nil
    base.OnDestroy(self)
end

local function OnEnable(self)
    base.OnEnable(self)
end

local function OnDisable(self)
    base.OnDisable(self)
end


local function RefreshData(self)
    self:ClearScroll(self)
    self.list = self.view.ctrl:GetCurrentHeroDataList()
    if self.list~=nil then
        self.ScrollView:SetTotalCount(#self.list)
        self.ScrollView:RefillCells()
    end
end

local function OnItemMoveIn(self,itemObj, index)
    itemObj.name = tostring(index)
    local cellItem = self.ScrollView:AddComponent(FormationHeroSelectItem, itemObj)
    cellItem:SetItemShow(self.list[index])
end

local function OnItemMoveOut(self, itemObj, index)
    self.ScrollView:RemoveComponent(itemObj.name, FormationHeroSelectItem)
end

local function ClearScroll(self)
    self.ScrollView:ClearCells()
    self.ScrollView:RemoveComponents(FormationHeroSelectItem)
end

FormationHeroSelectList.OnCreate = OnCreate
FormationHeroSelectList.OnDestroy = OnDestroy
FormationHeroSelectList.RefreshData = RefreshData
FormationHeroSelectList.OnEnable = OnEnable
FormationHeroSelectList.OnDisable = OnDisable
FormationHeroSelectList.OnItemMoveIn = OnItemMoveIn
FormationHeroSelectList.OnItemMoveOut = OnItemMoveOut
FormationHeroSelectList.ClearScroll = ClearScroll
return FormationHeroSelectList