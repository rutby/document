---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by zzl.
--- DateTime: 
---

local SelectDiffCell = BaseClass("SelectDiffCell", UIBaseContainer)
local base = UIBaseContainer
local Localization = CS.GameEntry.Localization
local bg = {[1] = "tower_icon_green",[2] = "tower_icon_blue",[3] = "tower_icon_purple",[4] = "tower_icon_orange",[5] = "tower_icon_red"}
local bgBoard = {[1] = "tower_bg_choose_green",[2] = "tower_bg_choose_blue",[3] = "tower_bg_choose_purple",[4] = "tower_bg_choose_orange",[5] = "tower_bg_choose_red"}

function SelectDiffCell:OnCreate()
    base.OnCreate(self)
    self:ComponentDefine()
    self:DataDefine()
end

function SelectDiffCell:OnDestroy()
    self:DataDestroy()
    base.OnDestroy(self)
end

function SelectDiffCell:ComponentDefine()
    self._diffCell_btn = self:AddComponent(UIButton,"")
    self._diffCell_btn:SetOnClick(function()
        SoundUtil.PlayEffect(SoundAssets.Music_Effect_Button)
        self:OnClickDiff()
    end)
    
    self._diffCell_txt = self:AddComponent(UITextMeshProUGUIEx,"Txt_DiffCell")
    
    self._lock_img = self:AddComponent(UIImage,"Img_Lock")
    self._icon_img = self:AddComponent(UIImage,"icon")
end

function SelectDiffCell:DataDefine()

end

function SelectDiffCell:DataDestroy()

end

function SelectDiffCell:ReInit(index,param,actId,finishDifficulty)
    self.param = param
    self._diffCell_btn:LoadSprite(string.format(LoadPath.UIMonsterTower, bgBoard[index]))
    self._icon_img:LoadSprite(string.format(LoadPath.UIMonsterTower, bg[index]))
    self._diffCell_txt:SetLocalText(param.difficulty_des)
    self._lock_img:SetActive(finishDifficulty < index)
    self.actId = actId
    self.index = index
    self.finishDifficulty = finishDifficulty
end

function SelectDiffCell:OnClickDiff()

    --if self.finishDifficulty < self.index then
    --    UIUtil.ShowTipsId(372425)
    --    return
    --end
    
    local isDown = true
    if self.index >= 3 then
        isDown = false
    end
    --打开tips
    local height = self._diffCell_btn.rectTransform.rect.height * 0.5
    UIManager:GetInstance():OpenWindow(UIWindowNames.UIActMonsterTowerDiffTips,self._diffCell_btn.transform.position,isDown,self.index,height,self.actId,self.finishDifficulty,self.param.difficulty_des)
end


return SelectDiffCell