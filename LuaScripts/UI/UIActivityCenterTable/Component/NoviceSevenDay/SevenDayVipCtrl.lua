---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by guqu.
--- DateTime: 2020/10/20 18:09
---

local SevenDayVipCtrl = BaseClass("SevenDayVipCtrl", UIBaseCtrl)
local Localization = CS.GameEntry.Localization

function SevenDayVipCtrl : CloseSelf(self)
    UIManager:GetInstance():DestroyWindow(UIWindowNames.UISevenTask)
end

function SevenDayVipCtrl : Close(self)
    UIManager:GetInstance():DestroyWindowByLayer(UILayer.Normal)
end

function SevenDayVipCtrl : RewardItemList(list)
    local showList = {}
    table.walk(list,function (k,v)
        local id = v.itemId
        if id~=nil then
            local goods = DataCenter.ItemTemplateManager:GetItemTemplate(id)
            if goods~=nil then
                local oneData = {}
                oneData.itemId = id
                local iconName = string.format(LoadPath.ItemPath,goods.icon)
                oneData.iconName = iconName
                oneData.extraIcon = nil
                oneData.count = v.count
                oneData.cost = v.cost
                oneData.rewardType = v.rewardType
                oneData.itemName = goods.name
                oneData.itemDesc = goods.description
                oneData.itemColor = DataCenter.ItemTemplateManager:GetToolBgByColor(goods.color)
                local itemType = goods.type
                if itemType == 2 then -- SPD
                    if goods.para1 ~= nil and goods.para1 ~= "" then
                        local para1 = goods.para1
                        local temp = string.split(para1,';')
                        if temp ~= nil and #temp > 1 then
                            oneData.itemFlag = temp[1]..temp[2]
                        end
                    end
                elseif itemType == 3 then -- USE
                    local type2 = goods.type2
                    if type2 ~= 999 and goods.para ~= nil and goods.para ~= "" then
                        local res_num = tonumber(goods.para)
                        oneData.itemFlag = string.GetFormattedStr(res_num)
                    end
                elseif itemType == 5 then
                    if goods.para3 ~= nil and goods.para3 ~= "" then
                        local res_num = tonumber(goods.para3)
                        oneData.itemFlag = string.GetFormattedStr(res_num)
                    end
                end
                table.insert(showList,oneData)
            end
        else
            if v.rewardType == RewardType.OIL or v.rewardType == RewardType.METAL
                    or v.rewardType == RewardType.WATER or v.rewardType == RewardType.GOLD
                    or v.rewardType == RewardType.MONEY or v.rewardType == RewardType.ELECTRICITY or v.rewardType == RewardType.FORMATION_STAMINA then
                local oneData = {}
                local template = DataCenter.ResourceTemplateManager:GetResourceTemplate(RewardToResType[v.rewardType])
                oneData.iconName = DataCenter.RewardManager:GetPicByType(v.rewardType)
                oneData.itemName = ResourceTypeTxt[v.rewardType]
                oneData.itemDesc = template.description
                oneData.count = v.count
                oneData.cost = v.cost
                oneData.rewardType = v.rewardType
                oneData.itemColor = DataCenter.ItemTemplateManager:GetToolBgByColor(ItemColor.WHITE)
                oneData.itemFlag = nil
                table.insert(showList,oneData)
            end
        end
    end)
    return showList
end

function SevenDayVipCtrl : GetSevenDayTaskReward(taskId)
    SFSNetwork.SendMessage(MsgDefines.TaskRewardGet,{id = taskId})
end

return SevenDayVipCtrl