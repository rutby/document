---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 1.
--- DateTime: 2023/3/27 16:31
---


local HeroEvolveSkillIcon = BaseClass("HeroEvolveSkillIcon", UIBaseContainer)
local base = UIBaseContainer

local icon_path = "icon"
local select_path = "select"

-- 创建
local function OnCreate(self)
    base.OnCreate(self)
    self:DataDefine()
    self:ComponentDefine()
end

-- 销毁
local function OnDestroy(self)
    self:ComponentDestroy()
    self:DataDestroy()
    base.OnDestroy(self)
end

--控件的定义
local function ComponentDefine(self)
    self.icon = self:AddComponent(UIImage, icon_path)
    self.select = self:AddComponent(UIImage, select_path)
    
    self.btn = self:AddComponent(UIButton, "")
    self.btn:SetOnClick(function()
        self:OnSelectClick()
    end)
end

--控件的销毁
local function ComponentDestroy(self)

end

--变量的定义
local function DataDefine(self)

end

--变量的销毁
local function DataDestroy(self)

end

local function OnSelectClick(self)
    EventManager:GetInstance():Broadcast(EventId.HeroEvolveSkillIconSelect, self.data.skillId)
end

local function OnAddListener(self)
    base.OnAddListener(self)
    self:AddUIListener(EventId.HeroEvolveSkillIconSelect, self.OnSelectEvent)
end

local function OnRemoveListener(self)
    self:RemoveUIListener(EventId.HeroEvolveSkillIconSelect, self.OnSelectEvent)
    base.OnRemoveListener(self)
end

local function OnSelectEvent(self, para)
    self.curSelect = para
    self:RefreshState()
end

local function SetData(self, data)
    self.data = data
    self:RefreshView()
end

local function RefreshView(self)
    self.icon:LoadSprite(self.data.icon_path)
    self:RefreshState()
end

local function RefreshState(self)
    self.select:SetActive(self.curSelect == self.data.skillId)
end

HeroEvolveSkillIcon.OnCreate = OnCreate
HeroEvolveSkillIcon.OnDestroy = OnDestroy
HeroEvolveSkillIcon.ComponentDefine = ComponentDefine
HeroEvolveSkillIcon.ComponentDestroy = ComponentDestroy
HeroEvolveSkillIcon.DataDefine = DataDefine
HeroEvolveSkillIcon.DataDestroy = DataDestroy
HeroEvolveSkillIcon.OnSelectClick = OnSelectClick
HeroEvolveSkillIcon.SetData = SetData
HeroEvolveSkillIcon.OnAddListener = OnAddListener
HeroEvolveSkillIcon.OnRemoveListener = OnRemoveListener
HeroEvolveSkillIcon.OnSelectEvent = OnSelectEvent
HeroEvolveSkillIcon.RefreshView = RefreshView
HeroEvolveSkillIcon.RefreshState = RefreshState

return HeroEvolveSkillIcon