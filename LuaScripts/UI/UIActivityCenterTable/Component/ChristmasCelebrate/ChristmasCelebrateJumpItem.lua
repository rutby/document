---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 1.
--- DateTime: 2022/12/5 14:18
---ChristmasCelebrateJumpItem.lua

local ChristmasCelebrateJumpItem = BaseClass("ChristmasCelebrateJumpItem", UIBaseContainer)
local base = UIBaseContainer
local Localization = CS.GameEntry.Localization

local icon_path = "UICommonItem/clickBtn/ItemIcon"
local jumpName_path = "name"
local jumpDesc_path = "desc"
local jumpBtn_path = "jumpBtn"
local getDesc_path = "getDesc"
local jumpBtnTxt_path = "jumpBtn/jumpTxt"

-- 创建
local function OnCreate(self)
    base.OnCreate(self)
    self:DataDefine()
    self:ComponentDefine()
end

-- 销毁
local function OnDestroy(self)
    self:ComponentDestroy()
    self:DataDestroy()
    base.OnDestroy(self)
end

--控件的定义
local function ComponentDefine(self)
    self.iconN = self:AddComponent(UIImage, icon_path)
    self.jumpNameN = self:AddComponent(UIText, jumpName_path)
    self.jumpDescN = self:AddComponent(UIText, jumpDesc_path)
    self.getDescN = self:AddComponent(UIText, getDesc_path)
    self.getDescN:SetActive(false)
    self.jumpBtnN = self:AddComponent(UIButton, jumpBtn_path)
    self.jumpBtnN:SetOnClick(function()
        self:OnClickJumpBtn()
    end)
    self.jumpBtnTxtN = self:AddComponent(UIText, jumpBtnTxt_path)
    self.jumpBtnTxtN:SetText(Localization:GetString("110003"))
end

--控件的销毁
local function ComponentDestroy(self)
    self.iconN = nil
    self.jumpNameN = nil
    self.jumpDescN = nil
    self.jumpBtnN = nil
    self.jumpBtnTxtN = nil
end

--变量的定义
local function DataDefine(self)
    self.curJumpType = nil
end

--变量的销毁
local function DataDestroy(self)
    self.curJumpType = nil
end

local function SetItem(self, tempIndex, strConf)
    local arrConf = string.split(strConf, ";")
    local icon, name, desc, jumpType = table.unpack(arrConf)
    
    self.curJumpType = tonumber(jumpType)

    self.iconN:LoadSprite(string.format("Assets/Main/Sprites/UI/UIChristmasCelebrate/%s.png", icon))
    self.jumpNameN:SetLocalText(name)
    self.jumpDescN:SetLocalText(desc)
end

local function OnClickJumpBtn(self)
    if self.curJumpType == 2 then
        GoToUtil.GotoResourceBuild()
    elseif self.curJumpType == 3 then
        GoToUtil.GotoWorldResource(14)
    elseif self.curJumpType == 4 then
        SceneUtils.ChangeToWorld(function()
            GoToUtil.GotoOpenView(UIWindowNames.UISearch,UISearchType.Monster, DataCenter.MonsterManager:GetCurCanAttackMaxLevel())
        end)
    end
end


ChristmasCelebrateJumpItem.OnCreate = OnCreate
ChristmasCelebrateJumpItem.OnDestroy = OnDestroy
ChristmasCelebrateJumpItem.ComponentDefine = ComponentDefine
ChristmasCelebrateJumpItem.ComponentDestroy = ComponentDestroy
ChristmasCelebrateJumpItem.DataDefine = DataDefine
ChristmasCelebrateJumpItem.DataDestroy = DataDestroy

ChristmasCelebrateJumpItem.SetItem = SetItem
ChristmasCelebrateJumpItem.OnClickJumpBtn = OnClickJumpBtn

return ChristmasCelebrateJumpItem

