---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by zzl
--- DateTime: 
---

local LeadingQuestReward = BaseClass("LeadingQuestReward", UIBaseContainer)
local base = UIBaseContainer
local Localization = CS.GameEntry.Localization
local UIRankRewardCell = require "UI.UISeasonRankReward.Component.UISeasonRankRewardCell"
-- 创建
function LeadingQuestReward:OnCreate()
    base.OnCreate(self)
    self:DataDefine()
    self:ComponentDefine()
end

-- 销毁
function LeadingQuestReward:OnDestroy()
    self:DataDestroy()
    self:ComponentDestroy()
    base.OnDestroy(self)
end

--控件的定义
function LeadingQuestReward:ComponentDefine()
    self.scroll_view = self:AddComponent(UIScrollView, "ScrollView")
    self.scroll_view:SetOnItemMoveIn(function(itemObj, index)
        self:OnCreateCell(itemObj, index)
    end)
    self.scroll_view:SetOnItemMoveOut(function(itemObj, index)
        self:OnDeleteCell(itemObj, index)
    end)

    self._rankNum_txt = self:AddComponent(UITextMeshProUGUI,"Rect_RewardTips/Txt_RankNum")
    self._reward_txt = self:AddComponent(UITextMeshProUGUI,"Rect_RewardTips/Txt_Reward")
end

--控件的销毁
function LeadingQuestReward:ComponentDestroy()

end

--变量的定义
function LeadingQuestReward:DataDefine()
  
end

--变量的销毁
function LeadingQuestReward:DataDestroy()
    self:SetCellDestroy()
end

function LeadingQuestReward:SetData(actId)
    self:SetCellDestroy()

    self._rankNum_txt:SetLocalText(302128)
    self._reward_txt:SetLocalText(131004)

    self.listReward = {}
    local activityLine = LocalController:instance():getLine(TableName.ActivityPanel, actId)
    self.listReward.strLevel = string.split(activityLine.para1,"|")
    self.listReward.strReward = string.split(activityLine.para2,"|")
    
    self.scroll_view:SetTotalCount(#self.listReward.strLevel)
    self.scroll_view:RefillCells()
end

function LeadingQuestReward:OnCreateCell(itemObj, index)
    itemObj.name = tostring(index)
    local item = self.scroll_view:AddComponent(UIRankRewardCell, itemObj)
    item:ShowRewards(self.listReward.strLevel[index],self.listReward.strReward[index])
end

function LeadingQuestReward:OnDeleteCell(itemObj, index)
    self.scroll_view:RemoveComponent(itemObj.name, UIRankRewardCell)
end

function LeadingQuestReward:SetCellDestroy()
    self.scroll_view:ClearCells()
    self.scroll_view:RemoveComponents(UIRankRewardCell)
end


return LeadingQuestReward