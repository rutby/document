---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Imaginaerum.
--- DateTime: 2022/8/18 20:36
---
local UIIDCardAuthenticateView = BaseClass("UIIDCardAuthenticateView",UIBaseView)
local base = UIBaseView
local Localization = CS.GameEntry.Localization
local Setting = CS.GameEntry.Setting
local function OnCreate(self)
    base.OnCreate(self)
    self:ComponentDefine()
    UIManager.Instance:DestroyWindow(UIWindowNames.UIIDCardDesTips)
end

local function OnDestroy(self)
    self:ComponentDestroy()
    base.OnDestroy(self)
end

local function ComponentDefine(self)
    self.textTitle = self:AddComponent(UITextMeshProUGUIEx, 'UICommonMidPopUpTitle/bg_mid/titleText')
    self.btnClose = self:AddComponent(UIButton, 'UICommonMidPopUpTitle/bg_mid/CloseBtn')
    self.btnSure = self:AddComponent(UIButton,"Root/BtnRect/BtnSure")
    self._sure_txt = self:AddComponent(UITextMeshProUGUIEx,"Root/BtnRect/BtnSure/TextSure")
    self.textTitle:SetLocalText(121408)
    self._sure_txt:SetLocalText(121415)
    self.IDCheck = self:AddComponent(UIBaseContainer,"Root/IDCheck")
    self.InputField1 = self:AddComponent(UITMPInput, 'Root/IDCheck/InputField1')
    self.textTitle1  = self:AddComponent(UITextMeshProUGUIEx, 'Root/IDCheck/InputField1/TextTitle1')
    self.inputField2 = self:AddComponent(UITMPInput, 'Root/IDCheck/InputField2')
    self.textTitle2  = self:AddComponent(UITextMeshProUGUIEx, 'Root/IDCheck/InputField2/TextTitle2')
    self.btnClose:SetOnClick(BindCallback(self.ctrl, self.ctrl.Close))
    self.btnSure:SetOnClick(BindCallback(self, self.OnBtnClick))
    self.txtId = self:AddComponent(UITextMeshProUGUIEx, 'Root/IDCheck/id/TextId')
    self.txtDes1 = self:AddComponent(UITextMeshProUGUIEx, 'Root/IDCheck/TextDes1')
    self.txtDes2 = self:AddComponent(UITextMeshProUGUIEx, 'Root/IDCheck/TextDes2')
    self.txtDesError = self:AddComponent(UITextMeshProUGUIEx, 'Root/IDCheck/Text_error')
    self.textTitle1:SetLocalText(121411)
    self.txtId:SetLocalText(121412)
    self.textTitle2:SetLocalText(121413)
    self.txtDes1:SetLocalText(121409)
    self.txtDes2:SetLocalText(121410)
    self.txtDesError:SetLocalText(121414)
    self.txtDesError:SetActive(false)
end

local function ComponentDestroy(self)
    self.textTitle = nil
    self.btnClose = nil
    self.btnSure = nil
    self._sure_txt = nil

    self.IDCheck = nil
    self.InputField1 = nil
    self.textTitle1  = nil
    self.inputField2 = nil
    self.textTitle2  = nil
end

local function OnAddListener(self)
    base.OnAddListener(self)
    self:AddUIListener(EventId.IDCardCheckSuccess, self.IDCardCheckSuccess)
    self:AddUIListener(EventId.IDCardCheckFail, self.IDCardCheckFail)
end

local function OnRemoveListener(self)
    base.OnRemoveListener(self)
    self:RemoveUIListener(EventId.IDCardCheckSuccess, self.IDCardCheckSuccess)
    self:RemoveUIListener(EventId.IDCardCheckFail, self.IDCardCheckFail)
end

local function IDCardCheckSuccess(self,data)
    self.ctrl:CloseSelf()
    CS.ApplicationLaunch.Instance.Loading:OnAuthSuccess()
end

local function IDCardCheckFail(self,data)
    self.txtDesError:SetActive(true)
end


local function OnBtnClick(self)
    local name = self.InputField1:GetText()
    local IDCard = self.inputField2:GetText()

    if name~=nil and name~="" and IDCard~=nil and IDCard~="" then
        SFSNetwork.SendMessage(MsgDefines.IDCardAuthenticate,name,IDCard)
    end
end


UIIDCardAuthenticateView.OnCreate= OnCreate
UIIDCardAuthenticateView.OnDestroy = OnDestroy
UIIDCardAuthenticateView.ComponentDefine = ComponentDefine
UIIDCardAuthenticateView.ComponentDestroy = ComponentDestroy
UIIDCardAuthenticateView.OnAddListener = OnAddListener
UIIDCardAuthenticateView.OnRemoveListener = OnRemoveListener
UIIDCardAuthenticateView.OnBtnClick = OnBtnClick
UIIDCardAuthenticateView.IDCardCheckSuccess =IDCardCheckSuccess
UIIDCardAuthenticateView.IDCardCheckFail =IDCardCheckFail
return UIIDCardAuthenticateView