---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Beef.
--- DateTime: 2022/7/27 21:47
---

local UIHeroOfficialLockTip = BaseClass("UIHeroOfficialLockTip", UIBaseContainer)
local base = UIBaseContainer
local Localization = CS.GameEntry.Localization

local close_path = "Close"
local root_path = "Root"
local title_path = "Root/TitleBg/Title"
local subtitle_path = "Root/Line/Subtitle"
local effect_bg_path = "Root/EffectBg"
local effect_val_path = "Root/EffectBg/EffectVal"
local desc_path = "Root/Desc"
local left_arrow_path = "Root/LeftArrow"
local right_arrow_path = "Root/RightArrow"

local function OnCreate(self)
    base.OnCreate(self)
    self:DataDefine()
    self:ComponentDefine()
end

local function OnDestroy(self)
    self:ComponentDestroy()
    self:DataDestroy()
    base.OnDestroy(self)
end

local function ComponentDefine(self)
    self.root_anim = self:AddComponent(UIAnimator, root_path)
    self.close_btn = self:AddComponent(UIButton, close_path)
    self.close_btn:SetOnClick(function()
        self:OnCloseClick()
    end)
    self.title_text = self:AddComponent(UITextMeshProUGUIEx, title_path)
    self.subtitle_text = self:AddComponent(UITextMeshProUGUIEx, subtitle_path)
    self.subtitle_text:SetLocalText(133005)
    self.effect_bg_go = self:AddComponent(UIBaseContainer, effect_bg_path)
    self.effect_val_text = self:AddComponent(UITextMeshProUGUIEx, effect_val_path)
    self.desc_text = self:AddComponent(UITextMeshProUGUIEx, desc_path)
    self.left_arrow_go = self:AddComponent(UIBaseContainer, left_arrow_path)
    self.right_arrow_go = self:AddComponent(UIBaseContainer, right_arrow_path)
end

local function ComponentDestroy(self)
    self.root_anim = nil
    self.close_btn = nil
    self.title_text = nil
    self.subtitle_text = nil
    self.effect_bg_go = nil
    self.effect_val_text = nil
    self.desc_text = nil
    self.left_arrow_go = nil
    self.right_arrow_go = nil
end

local function DataDefine(self)
    self.camp = 0
    self.pos = 0
end

local function DataDestroy(self)
    self.camp = nil
    self.pos = nil
end

local function OnEnable(self)
    base.OnEnable(self)
end

local function OnDisable(self)
    base.OnDisable(self)
end

local function SetData(self, camp, pos)
    self.camp = camp
    self.pos = pos
    self.template = DataCenter.HeroOfficialManager:GetTemplate(camp, pos)

    self.title_text:SetLocalText(self.template.name)
    self.desc_text:SetLocalText(133002, "Lv." .. self.template.unlockLv)

    local desc = GetTableData(TableName.EffectNumDesc, self.template.effect, "des")
    local maxVal = DataCenter.HeroOfficialManager:GetEffectMaxVal(self.camp, self.pos)
    local format = "<color=white>%s:</color> +%s"
    if self.template:GetValType() == "1" then
        format = format .. "%%"
    end
    format = format .. " " .. Localization:GetString("110019")
    self.effect_val_text:SetText(string.format(format, Localization:GetString(desc), maxVal))
end

local function Show(self)
    self:SetActive(true)
    self.root_anim:Play("CommonPopup_movein", 0, 0)
end

local function OnCloseClick(self)
    self:SetActive(false)
end

UIHeroOfficialLockTip.OnCreate= OnCreate
UIHeroOfficialLockTip.OnDestroy = OnDestroy
UIHeroOfficialLockTip.ComponentDefine = ComponentDefine
UIHeroOfficialLockTip.ComponentDestroy = ComponentDestroy
UIHeroOfficialLockTip.DataDefine = DataDefine
UIHeroOfficialLockTip.DataDestroy = DataDestroy
UIHeroOfficialLockTip.OnEnable = OnEnable
UIHeroOfficialLockTip.OnDisable = OnDisable

UIHeroOfficialLockTip.SetData = SetData
UIHeroOfficialLockTip.Show = Show
UIHeroOfficialLockTip.OnCloseClick = OnCloseClick

return UIHeroOfficialLockTip