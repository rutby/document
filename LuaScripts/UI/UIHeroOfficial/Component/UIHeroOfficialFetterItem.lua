---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Beef.
--- DateTime: 2022/7/28 15:03
---

local UIHeroOfficialFetterItem = BaseClass("UIHeroOfficialFetterItem", UIBaseContainer)
local CampDetailItem = require "UI.UIFormation.UIFormationTableNew.Component.CampDetailItem"
local base = UIBaseContainer
local Localization = CS.GameEntry.Localization
local UIGray = CS.UIGray

local this_path = ""
local icon_path = "Icon"
local desc_path = "Desc"
local line_path = "Line"
local unlock_path = "Unlock"

local BgLocked = "Assets/Main/Sprites/UI/UITroopsNew/UITroopsNew_img_msgbg_gray.png"
local BgUnlocked = "Assets/Main/Sprites/UI/UITroopsNew/UITroopsNew_img_msgbg2.png"
local LvToNum =
{
    [1] = 2,
    [2] = 3,
    [3] = 4,
    [4] = 5,
}

local CampDesc =
{
    [HeroCamp.UNION] = 132239,
    [HeroCamp.MAFIA] = 132240,
    [HeroCamp.ZELOT] = 132241,
    [HeroCamp.NEW_HUMAN] = 132242,
}

local function OnCreate(self)
    base.OnCreate(self)
    self:DataDefine()
    self:ComponentDefine()
end

local function OnDestroy(self)
    self:ComponentDestroy()
    self:DataDestroy()
    base.OnDestroy(self)
end

local function ComponentDefine(self)
    self.bg_image = self:AddComponent(UIImage, this_path)
    self.icon_image = self:AddComponent(CampDetailItem, icon_path)
    self.desc_text = self:AddComponent(UITextMeshProUGUIEx, desc_path)
    self.line_go = self:AddComponent(UIBaseContainer, line_path)
    self.unlock_text = self:AddComponent(UITextMeshProUGUIEx, unlock_path)
end

local function ComponentDestroy(self)
    self.bg_image = nil
    self.icon_image = nil
    self.desc_text = nil
    self.line_go = nil
    self.unlock_text = nil
end

local function DataDefine(self)
    
end

local function DataDestroy(self)
    
end

local function OnEnable(self)
    base.OnEnable(self)
end

local function OnDisable(self)
    base.OnDisable(self)
end

local function SetTemplate(self, template)
    local buildingLv = DataCenter.HeroOfficialManager:GetBuildingLv()
    local isLocked = buildingLv < template.unlockLv
    local val = template.maxVal
    if template:GetValType() == "1" then
        val = val .. "%"
    end
    local desc = Localization:GetString(CampDesc[template.camp], val)

    self.bg_image:LoadSprite(isLocked and BgLocked or BgUnlocked)
    local num = 0
    if template.buffLv~=nil and LvToNum[template.buffLv]~=nil then
        num = LvToNum[template.buffLv]
    end
    local oneData = {}
    oneData.camp = template.camp
    oneData.num = 5
    local list = {oneData}
    self.icon_image:InitData(list)
    UIGray.SetGray(self.icon_image.transform, isLocked)
    self.line_go:SetActive(isLocked)
    self.unlock_text:SetActive(isLocked)
    self.desc_text:SetText(desc)
    self.unlock_text:SetLocalText(133006, "Lv." .. template.unlockLv)
end

UIHeroOfficialFetterItem.CampDesc = CampDesc
UIHeroOfficialFetterItem.OnCreate = OnCreate
UIHeroOfficialFetterItem.OnDestroy = OnDestroy
UIHeroOfficialFetterItem.ComponentDefine = ComponentDefine
UIHeroOfficialFetterItem.ComponentDestroy = ComponentDestroy
UIHeroOfficialFetterItem.DataDefine = DataDefine
UIHeroOfficialFetterItem.DataDestroy = DataDestroy
UIHeroOfficialFetterItem.OnEnable = OnEnable
UIHeroOfficialFetterItem.OnDisable = OnDisable

UIHeroOfficialFetterItem.SetTemplate = SetTemplate

return UIHeroOfficialFetterItem