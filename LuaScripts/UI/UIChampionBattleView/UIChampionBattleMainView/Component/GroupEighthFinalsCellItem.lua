---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 1.
--- DateTime: 2021/8/2 14:08
---
local GroupEighthFinalsCellItem = BaseClass("GroupEighthFinalsCellItem", UIBaseContainer)
local base = UIBaseContainer

local this_path = ""
local image_first_path = "Image_First"
local image_other_path = "Image_Other"
local rank_text_path = "rank"
local head_path = "head_bg/UIPlayerHead/HeadIcon"
local Foreground_path = "head_bg/UIPlayerHead/Foreground"
local allianceName_path = "allianceName"
local playerName_path = "playerName"

local function OnCreate(self)
    base.OnCreate(self)

    self:DataDefine()
    self:ComponentDefine()
end

local function ComponentDefine(self)
    self.image_first = self:AddComponent(UIImage, image_first_path)
    self.image_other = self:AddComponent(UIImage, image_other_path)
    self.rank_text = self:AddComponent(UIText, rank_text_path)
    self.Foreground = self:AddComponent(UIImage, Foreground_path)
    --self.head = self:AddComponent(UIImage, head_path)
    self.allianceName = self:AddComponent(UIText, allianceName_path)
    self.playerName = self:AddComponent(UIText, playerName_path)
    self.playerIcon = self:AddComponent(UIPlayerHead, head_path)
end

local function DataDefine(self)

end

local function OnDestroy(self)
    self:ComponentDestroy()
    self:DataDestroy()
    
    base.OnDestroy(self)
end

local function ComponentDestroy(self)
    self.image_first = nil
    self.image_other = nil
    self.rank_text = nil
    self.Foreground = nil
    self.head = nil
    self.allianceName = nil
    self.playerName = nil
end

local function DataDestroy(self)
    self.param = nil
end

local function SetData(self, param, rank) 
    self.param = param
    self.rank = rank
    self:Refresh()
end

local function Refresh(self)
    self.rank_text:SetText(self.rank)
    if self.param == nil then
        self.image_first:SetActive(false)
        self.image_other:SetActive(true)
        --self.head_bg = nil
        --self.head = nil
        self.allianceName:SetText("")
        self.playerName:SetText("")
        self.playerIcon:SetData(nil, nil, 0)
        self.view.ctrl:SetHeadImg(self.playerIcon, self.Foreground, "", "", 0, 0)
    else
        self.image_first:SetActive(self.rank == 1)
        self.image_other:SetActive(self.rank ~= 1)
        --self.head_bg = nil
        --self.head = nil
        local abbr = ""
        if self.param.abbr ~= nil and self.param.abbr ~= "" then
            abbr = "["..self.param.abbr.."]"
        end
        self.allianceName:SetText(abbr)
        self.playerName:SetText(self.param.name)
        self.view.ctrl:SetHeadImg(self.playerIcon, self.Foreground, self.param.uid, self.param.pic, self.param.picver, self.param.headFrame, self.param.headSkinId, self.param.headSkinET)
    end
end

GroupEighthFinalsCellItem.OnCreate = OnCreate
GroupEighthFinalsCellItem.OnDestroy = OnDestroy
GroupEighthFinalsCellItem.ComponentDefine = ComponentDefine
GroupEighthFinalsCellItem.ComponentDestroy = ComponentDestroy
GroupEighthFinalsCellItem.SetData = SetData
GroupEighthFinalsCellItem.DataDefine = DataDefine
GroupEighthFinalsCellItem.DataDestroy = DataDestroy
GroupEighthFinalsCellItem.Refresh = Refresh

return GroupEighthFinalsCellItem