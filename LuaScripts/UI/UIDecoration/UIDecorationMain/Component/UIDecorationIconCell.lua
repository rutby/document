---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 1.
--- DateTime: 2022/12/5 12:06
---


local UIDecorationIconCell = BaseClass("UIDecorationIconCell", UIBaseContainer)
local base = UIBaseContainer

local select_effect_path = "select"
local icon_path = "icon"
local btn_path = ""
local unlock_effect_path = "cover"
local in_use_path = "in_use_img"
local red_point_path = "redPoint"
local new_path = "newItem"
local item_bg_path = "Cell_BG/ItemBgColor"

--创建
function UIDecorationIconCell:OnCreate()
    base.OnCreate(self)
    self:ComponentDefine()
    self:DataDefine()
end

-- 销毁
function UIDecorationIconCell:OnDestroy()
    self:ComponentDestroy()
    self:DataDestroy()
    base.OnDestroy(self)
end

function UIDecorationIconCell:ComponentDefine()
    self.select_effect = self:AddComponent(UIBaseContainer, select_effect_path)
    self.icon = self:AddComponent(UIImage, icon_path)
    self.btn = self:AddComponent(UIButton, btn_path)
    self.btn:SetOnClick(function()
        SoundUtil.PlayEffect(SoundAssets.Music_Effect_Button)
        self:ClickBtn()
    end)
    self.unlock_effect = self:AddComponent(UIBaseContainer, unlock_effect_path)
    self.in_use = self:AddComponent(UITextMeshProUGUIEx, in_use_path)
    --self.in_use:SetLocalText(129001)
    self.red_point = self:AddComponent(UIBaseContainer, red_point_path)
    self.new = self:AddComponent(UIBaseContainer, new_path)
    self.item_bg = self:AddComponent(UIImage, item_bg_path)
end

function UIDecorationIconCell:ComponentDestroy()

end

function UIDecorationIconCell:DataDefine()
    self.param = {}
end

function UIDecorationIconCell:DataDestroy()
    self.param = {}
end

function UIDecorationIconCell:OnEnable()
    base.OnEnable(self)
end

function UIDecorationIconCell:OnDisable()
    base.OnDisable(self)
end

function UIDecorationIconCell:ReInit(param)
    self.param = param
    self:RefreshView()
end

function UIDecorationIconCell:RefreshView()
    if self.param.data ~= nil then
        self.icon:LoadSprite(self.param.data.icon)
        self.item_bg:LoadSprite(self.param.data.colorBg)
        self.unlock_effect:SetActive(not self.param.data.isUnlock)
        self.in_use:SetActive(self.param.data.inUse)
        self.red_point:SetActive(self.param.data.showRedPoint)
        self.new:SetActive(self.param.data.showNew)
    end
    self:RefreshSelect()
end

function UIDecorationIconCell:ClickBtn()
    if not self.param.select then
        if self.param.onBtnClick ~= nil then
            self.param.onBtnClick(self.param.index)
        end
    end
end

function UIDecorationIconCell:OnAddListener()
    base.OnAddListener(self)
end

function UIDecorationIconCell:OnRemoveListener()
    base.OnRemoveListener(self)
end

function UIDecorationIconCell:Select(select)
    if self.param.select ~= select then
        self.param.select = select
        self:RefreshSelect()
    end
end

function UIDecorationIconCell:RefreshSelect()
    self.select_effect:SetActive(self.param.select)
end

return UIDecorationIconCell