---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 1.
--- DateTime: 2022/12/5 12:06
---

local UIDecorationTypes = BaseClass("UIDecorationTypes", UIBaseContainer)
local base = UIBaseContainer
local UIDecorationTypeCell = require "UI.UIDecoration.UIDecorationMain.Component.UIDecorationTypeCell"

local scroll_view_path = ""

--创建
local function OnCreate(self)
    base.OnCreate(self)
    self:ComponentDefine()
    self:DataDefine()
end

-- 销毁
local function OnDestroy(self)
    self:ComponentDestroy()
    self:DataDestroy()
    base.OnDestroy(self)
end

local function ComponentDefine(self)
    self.scroll_view = self:AddComponent(UIScrollView, scroll_view_path)
    self.scroll_view:SetOnItemMoveIn(function(itemObj, index)
        self:OnCreateCell(itemObj, index)
    end)
    self.scroll_view:SetOnItemMoveOut(function(itemObj, index)
        self:OnDeleteCell(itemObj, index)
    end)
end

local function ComponentDestroy(self)
    self:ClearScroll()
    self.scroll_view = nil
end

local function DataDefine(self)

end

local function DataDestroy(self)

end

local function OnEnable(self)
    base.OnEnable(self)
end

local function OnDisable(self)
    base.OnDisable(self)
end

local function SetData(self, dataList, currentSelect)
    self.dataList = dataList
    self.currentSelect = currentSelect
    self:RefreshScrollView()
end

local function RefreshScrollView(self)
    self:ClearScroll()
    local count = table.count(self.dataList)
    self.scroll_view:SetTotalCount(count)
    self.scroll_view:RefillCells()
end

local function OnCreateCell(self,itemObj, index)
    itemObj.name = tostring(index)
    local cellItem = self.scroll_view:AddComponent(UIDecorationTypeCell, itemObj)
    local data =  self.dataList[index]
    cellItem:ReInit(data, self.currentSelect)
end

local function OnDeleteCell(self,itemObj, index)
    self.scroll_view:RemoveComponent(itemObj.name, UIDecorationTypeCell)
end

local function ClearScroll(self)
    self.scroll_view:ClearCells()
    self.scroll_view:RemoveComponents(UIDecorationTypeCell)
end

UIDecorationTypes.RefreshScrollView = RefreshScrollView
UIDecorationTypes.OnDeleteCell = OnDeleteCell
UIDecorationTypes.OnCreateCell = OnCreateCell
UIDecorationTypes.ClearScroll = ClearScroll
UIDecorationTypes.OnCreate = OnCreate
UIDecorationTypes.OnDestroy = OnDestroy
UIDecorationTypes.OnEnable = OnEnable
UIDecorationTypes.OnDisable = OnDisable
UIDecorationTypes.ComponentDefine = ComponentDefine
UIDecorationTypes.ComponentDestroy = ComponentDestroy
UIDecorationTypes.DataDefine = DataDefine
UIDecorationTypes.DataDestroy = DataDestroy
UIDecorationTypes.SetData = SetData

return UIDecorationTypes