---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Imaginaerum.
--- DateTime: 8/1/2024 下午5:49
---
local AllianceWarMemHead = BaseClass("AllianceWarMemHead",UIBaseContainer)
local base = UIBaseContainer
local icon_path ="UIPlayerHead/LeftHeadIcon"
local headFg_path = "UIPlayerHead/frameBg"
local join_btn_path = "join_btn"
local function OnCreate(self)
    base.OnCreate(self)
    self.icon = self:AddComponent(UIPlayerHead, icon_path)
    self.headFg = self:AddComponent(UIImage, headFg_path)
    self.join_btn = self:AddComponent(UIButton, join_btn_path)
    self.join_btn:SetOnClick(function()
        SoundUtil.PlayEffect(SoundAssets.Music_Effect_Button)
        self:OnJoinBtnClick()
    end)
end

-- 销毁
local function OnDestroy(self)
    base.OnDestroy(self)
end

-- 显示
local function OnEnable(self)
    base.OnEnable(self)
end

-- 隐藏
local function OnDisable(self)
    base.OnDisable(self)
end
local function SetItemShow(self,warUuid,uuid)
    self.icon:SetActive(true)
    self.headFg:SetActive(true)
    self.dataInfo = self.view.ctrl:GetPlayerItemData(warUuid,uuid)
    self.icon:SetData(self.dataInfo.ownerUid,self.dataInfo.ownerIcon,self.dataInfo.ownerIconVer)
    self.isShow = false
    self.join_btn:SetActive(false)
end

local function ShowHide(self, isShow, uuid)
    self.icon:SetActive(false)
    self.headFg:SetActive(false)
    self.isShow = isShow
    self.uuid = uuid
    self.join_btn:SetActive(isShow)
end

function AllianceWarMemHead:OnJoinBtnClick()
    self.view.ctrl:OnJoinClick(self.uuid)
end

function AllianceWarMemHead:RefreshJoinShow(isShow)
    if self.isShow ~= isShow then
        self.isShow = isShow
        self.join_btn:SetActive(isShow)
    end
end

AllianceWarMemHead.OnCreate = OnCreate
AllianceWarMemHead.OnDestroy = OnDestroy
AllianceWarMemHead.OnEnable = OnEnable
AllianceWarMemHead.OnDisable = OnDisable
AllianceWarMemHead.SetItemShow = SetItemShow
AllianceWarMemHead.ShowHide = ShowHide
return AllianceWarMemHead