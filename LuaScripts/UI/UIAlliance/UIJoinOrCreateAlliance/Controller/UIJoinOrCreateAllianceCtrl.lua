---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by guqu.
--- DateTime: 2020/10/14 17:21
---
local UIJoinOrCreateAllianceCtrl = BaseClass("UIJoinOrCreateAllianceCtrl", UIBaseCtrl)
local Localization = CS.GameEntry.Localization
local function CloseSelf(self)
    UIManager:GetInstance():DestroyWindow(UIWindowNames.UIJoinOrCreateAlliance)
end

local function Close(self)
    UIManager:GetInstance():DestroyWindowByLayer(UILayer.Normal)
end

local function GetItemTypeName(self,type)
    if type == 1 then
        return Localization:GetString("110037")
    elseif type == 2 then
        return Localization:GetString("100645")
    end
end

local function InitData(self)
    self:SendSearchMessageToServer(1,1,"",0, true)
end


local function GetAllianceIdList(self)
    local list = DataCenter.AllianceTempListManager:GetSearchAllianceIdList()
    return list
end

local function SendSearchMessageToServer(self,type,page,key,language, isRecommend)

    SFSNetwork.SendMessage(MsgDefines.AlSearch,type,page,key,language, isRecommend)
end


local function GetOneAllianceByUid(self,uid)
    return DataCenter.AllianceTempListManager:GetSearchAllianceDataByUid(uid)
end

local function SendApplyMessageToServer(self,allianceId,applyType,language)
    local seasonId = DataCenter.SeasonDataManager:GetSeasonId()
    if seasonId == 5 then
        if DataCenter.RobotWarsManager:GetSelfCamp()>0 and DataCenter.GloryManager:IsSameCampByAllianceId(allianceId) == false then
            return UIUtil.ShowTipsId(111093)
        end
    end
    SFSNetwork.SendMessage(MsgDefines.AlApply,allianceId,applyType,language)
end

local function SendCancelApplyMessageToServer(self,allianceId)
    SFSNetwork.SendMessage(MsgDefines.AlCancelApply,allianceId)
end

UIJoinOrCreateAllianceCtrl.CloseSelf =CloseSelf
UIJoinOrCreateAllianceCtrl.Close =Close
UIJoinOrCreateAllianceCtrl.GetAllianceIdList =GetAllianceIdList
UIJoinOrCreateAllianceCtrl.GetItemTypeName= GetItemTypeName
UIJoinOrCreateAllianceCtrl.SendApplyMessageToServer =SendApplyMessageToServer
UIJoinOrCreateAllianceCtrl.SendCancelApplyMessageToServer =SendCancelApplyMessageToServer
UIJoinOrCreateAllianceCtrl.InitData =InitData
UIJoinOrCreateAllianceCtrl.SendSearchMessageToServer =SendSearchMessageToServer
UIJoinOrCreateAllianceCtrl.GetOneAllianceByUid =GetOneAllianceByUid
return UIJoinOrCreateAllianceCtrl