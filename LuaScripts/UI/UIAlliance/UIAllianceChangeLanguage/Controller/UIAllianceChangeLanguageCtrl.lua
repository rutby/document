---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by guqu.
--- DateTime: 2020/11/11 15:53
---
local UIAllianceChangeLanguageCtrl = BaseClass("UIAllianceChangeLanguageCtrl", UIBaseCtrl)
local function CloseSelf(self)
    UIManager:GetInstance():DestroyWindow(UIWindowNames.UIAllianceChangeLanguage)
end

local function Close(self)
    UIManager:GetInstance():DestroyWindowByLayer(UILayer.Normal)
end

local function GetLanguageList(self)
    local list ={}

    LocalController:instance():visitTable("language",function (k,v)
        local mark= v.mark
        if mark~=0 then
            local languageId = v.lang_id
            table.insert(list,languageId)
        end
    end)
    
    --local languageList = DataTable:GetCsvDt("language")
    --if languageList~=nil and languageList.Rows then
    --    table.walk(languageList.Rows,function (k,v)
    --        local mark= v:TryGetInt("mark")
    --        if mark~=0 then
    --            local languageId = v:GetString("lang_id") 
    --            table.insert(list,languageId)
    --        end
    --    end)
    --end
    return list
end
local function OnSetBtnClick(self,value)
    --EventManager:GetInstance():Broadcast(EventId.AllianceLanguage,value)
    --SFSNetwork.SendMessage(MsgDefines.AllianceChangeAttributes,"","",-1,"",value)
    self:CloseSelf()
end

UIAllianceChangeLanguageCtrl.CloseSelf =CloseSelf
UIAllianceChangeLanguageCtrl.Close =Close
UIAllianceChangeLanguageCtrl.GetLanguageList =GetLanguageList
UIAllianceChangeLanguageCtrl.OnSetBtnClick =OnSetBtnClick
return UIAllianceChangeLanguageCtrl