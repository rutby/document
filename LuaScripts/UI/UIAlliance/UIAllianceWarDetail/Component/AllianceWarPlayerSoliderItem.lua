---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by guqu.
--- DateTime: 2020/8/19 20:47
---
local AllianceWarPlayerSoliderItem = BaseClass("AllianceWarPlayerSoliderItem",UIBaseContainer)
local base = UIBaseContainer
local Localization = CS.GameEntry.Localization

local icon_path = "UISoldierItem/Icon"
local lv_path = "UISoldierItem/LevelText"
local count_path = "count"
local info_path = "Btn_Info"

local function OnCreate(self)
    base.OnCreate(self)
    self.icon = self:AddComponent(UIImage,icon_path)
    self.lv = self:AddComponent(UITextMeshProUGUIEx,lv_path)
    self.count = self:AddComponent(UITextMeshProUGUIEx,count_path)
    self._info_btn = self:AddComponent(UIButton,info_path)
    self._info_btn:SetOnClick(function ()
        --self:OnShowClick()
    end)
    self.data = nil
end

local function OnDestroy(self)
    self.icon =nil
    self.count = nil
    self.data = nil
    base.OnDestroy(self)
end

local function SetData(self,data,count)
    self.data = data
    self.icon:LoadSprite(string.format(LoadPath.SoldierIcons,data.icon))
    self.count:SetText("x "..string.GetFormattedSeperatorNum(count))
    self.lv:SetText(self.data.level)
end

local function OnShowClick(self)
    if self.data then
        self.view:SetSoliderInfo(self.transform,self.data.name)
    end
end

AllianceWarPlayerSoliderItem.OnCreate = OnCreate
AllianceWarPlayerSoliderItem.OnDestroy = OnDestroy
AllianceWarPlayerSoliderItem.SetData = SetData
AllianceWarPlayerSoliderItem.OnShowClick = OnShowClick
return AllianceWarPlayerSoliderItem