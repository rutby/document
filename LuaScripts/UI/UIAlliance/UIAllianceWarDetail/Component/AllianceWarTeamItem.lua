---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by guqu.
--- DateTime: 2020/8/10 18:04
---
--local AllianceWarTeamItem = BaseClass("AllianceWarTeamItem",UIBaseContainer)
--local base = UIBaseContainer
--local Localization = CS.UnityGameFramework.Runtime.GameEntry.Localization
--
--local attack_obj_path = "attack"
--local bg_btn_path = "BgButton"
--local left_pos_btn_path ="left"
--local left_pos_txt_path = "left/leftPosTxt"
--local left_name_path = "left/leftNameTxt"
--local distance_obj_path = "left/Image"
--local distance_txt_path = "left/Image/Image/distanceTxt"
--local right_pos_btn_path ="right"
--local right_pos_txt_path = "right/rightPosTxt"
--local right_name_path = "right/rightNameTxt"
--local slider_path = "sliderBg/Slider"
--local slider_txt_path = "sliderBg/Slider/sliderTxt"
--local progress_txt_path = "sliderBg/Slider/FillArea/progressTxt"
--local join_btn_path ="joinButton"
--local cancel_btn_path ="cancelButton"
--local join_txt_path = "joinButton/joinText"
--local cancel_txt_path ="cancelButton/cancelText"
--local SliderLength = 380
--local function OnCreate(self)
--    base.OnCreate(self)
--    self.isUpdate =false
--    self.lastChangeTextDeltaTime =0
--    self.lastChangeImageDeltaTime =0
--    self.attack_obj = self:AddComponent(UIBaseContainer,attack_obj_path)
--    self.bg_btn = self:AddComponent(UIButton, bg_btn_path)
--    self.bg_btn:SetOnClick(function ()
--        self:OnBgClick()
--    end)
--    self.left_pos_btn = self:AddComponent(UIButton,left_pos_btn_path)
--    self.left_pos_btn:SetOnClick(function ()
--        self:OnLeftPosClick()
--    end)
--    self.left_name = self:AddComponent(UIText,left_name_path)
--    self.left_pos_txt = self:AddComponent(UIText,left_pos_txt_path)
--    self.distance_obj = self:AddComponent(UIBaseContainer,distance_obj_path)
--    self.distance_txt = self:AddComponent(UIText,distance_txt_path)
--    self.right_pos_btn = self:AddComponent(UIButton, right_pos_btn_path)
--    self.right_pos_btn:SetOnClick(function ()
--        self:OnRightPosClick()
--    end)
--    self.right_name = self:AddComponent(UIText,right_name_path)
--    self.right_pos_txt = self:AddComponent(UIText,right_pos_txt_path)
--    self.slider = self:AddComponent(UISlider,slider_path)
--    self.slider_txt = self:AddComponent(UIText,slider_txt_path)
--    self.progress_txt = self:AddComponent(UIText,progress_txt_path)
--
--    self.join_btn = self:AddComponent(UIButton, join_btn_path)
--    self.join_btn:SetOnClick(function ()
--        self:OnJoinClick()
--    end)
--    self.join_txt = self:AddComponent(UIText,join_txt_path)
--    self.join_txt:SetLocalText() 
--
--    self.cancel_btn = self:AddComponent(UIButton, cancel_btn_path)
--    self.cancel_btn:SetOnClick(function ()
--        self:OnCancelClick()
--    end)
--    self.cancel_txt = self:AddComponent(UIText,cancel_txt_path)
--    self.cancel_txt:SetLocalText(GameDialogDefine.CANCEL) 
--    self:SetActive(true)
--end
--
--local function OnDestroy(self)
--    self.attack_obj = nil
--    self.bg_btn = nil
--    self.left_pos_btn = nil
--    self.left_name = nil
--    self.left_pos_txt = nil
--    self.distance_obj = nil
--    self.distance_txt = nil
--    self.right_pos_btn = nil
--    self.right_name = nil
--    self.right_pos_txt = nil
--    self.slider = nil
--    self.slider_txt = nil
--    self.progress_txt = nil
--    self.join_btn = nil
--    self.join_txt = nil
--    self.cancel_btn = nil
--    self.cancel_txt = nil
--    self.isUpdate = nil
--    base.OnDestroy(self)
--end
--
--local function RefreshData(self)
--    self.isUpdate =false
--    self.lastChangeTextDeltaTime =0
--    self.lastChangeImageDeltaTime =0
--    self.dataInfo = self.view.ctrl:GetWarItemData(self.uuid)
--    self.left_name:SetText(self.dataInfo.leftName)
--    self.right_name:SetText(self.dataInfo.rightName)
--    local leftPos = SceneUtils.IndexToTilePos(self.dataInfo.leftPointId)
--    local rightPos = SceneUtils.IndexToTilePos(self.dataInfo.rightPointId)
--    self.left_pos_txt:SetLocalText(GameDialogDefine.SHOW_POS, leftPos.x, leftPos.y) 
--    self.right_pos_txt:SetLocalText(GameDialogDefine.SHOW_POS, rightPos.x, rightPos.y) 
--    self.distance_obj:SetActive(self.dataInfo.leftDistance>0)
--    self.distance_txt:SetText(self.dataInfo.leftDistance)
--    self.attack_obj:SetActive(self.dataInfo.isAttack)
--    self.cancel_btn:SetActive(self.dataInfo.cancel)
--    self.join_btn:SetActive(self.dataInfo.join)
--    self.slider_txt:SetText(string.GetFormattedSeperatorNum(self.dataInfo.currentSoldiers).."/"..string.GetFormattedSeperatorNum(self.dataInfo.maxSoldiers))
--    self:UpdateSlider()
--end
--
--local function SetUuid(self,uuid)
--    self.uuid = uuid
--end
--local function UpdateSlider(self)
--    local curTime = UITimeManager:GetInstance():GetServerTime()
--    local deltaTime =0
--    local maxTime =0
--    local dialog = "110022125"
--    if self.dataInfo.waitTime > curTime then
--        self.isUpdate =true
--        deltaTime = self.dataInfo.waitTime - curTime
--        maxTime = self.dataInfo.waitTime - self.dataInfo.createTime
--        dialog = "110022125"
--    elseif self.dataInfo.marchTime > curTime then
--        self.isUpdate =true
--        deltaTime = self.dataInfo.marchTime - curTime
--        maxTime = self.dataInfo.marchTime - self.dataInfo.createTime
--        dialog = "100987"
--    else
--        self.isUpdate =false
--    end
--    if self.isUpdate then
--        if TimeBarUtil.CheckIsNeedChangeBar(deltaTime,self.lastChangeImageDeltaTime,maxTime,SliderLength) then
--            self.lastChangeImageDeltaTime = deltaTime
--            local tempValue = 1 - deltaTime / maxTime
--            self.slider:SetValue(tempValue)
--        end
--
--        if TimeBarUtil.CheckIsNeedChangeText(deltaTime,self.lastChangeTextDeltaTime) then
--            self.lastChangeTextDeltaTime = deltaTime
--            self.progress_txt:SetText(Localization:GetString(dialog)..UITimeManager:GetInstance():MilliSecondToFmtString(deltaTime))
--        end
--    else
--        self.lastChangeTextDeltaTime =0
--        self.lastChangeImageDeltaTime =0
--        self.slider:SetValue(1)
--        self.progress_txt:SetLocalText(120166) 
--    end
--end
--
--local function Update(self)
--    if self.isUpdate then
--        self:UpdateSlider()
--    end
--end
--local function OnLeftPosClick(self)
--    self.view.ctrl:OnClickPosBtn(self.dataInfo.leftPointId)
--end
--
--local function OnRightPosClick(self)
--    self.view.ctrl:OnClickPosBtn(self.dataInfo.rightPointId)
--end
--
--local function OnEnable(self)
--    base.OnEnable(self)
--end
--
--local function OnDisable(self)
--    base.OnDisable(self)
--end
--
--local function OnBgClick(self)
--    self.view.ctrl:OnOpenClick(self.uuid)
--end
--
--local function OnJoinClick(self)
--    self.view.ctrl:OnJoinClick(self.uuid,self.dataInfo.leftPointId)
--end
--
--local function OnCancelClick(self)
--    self.view.ctrl:OnCancelClick(self.uuid)
--end
--
--local function GetSelfData(self)
--    return self.dataInfo
--end
--AllianceWarTeamItem.OnCreate = OnCreate
--AllianceWarTeamItem.OnDestroy = OnDestroy
--AllianceWarTeamItem.OnEnable = OnEnable
--AllianceWarTeamItem.OnDisable = OnDisable
--AllianceWarTeamItem.RefreshData = RefreshData
--AllianceWarTeamItem.OnLeftPosClick =OnLeftPosClick
--AllianceWarTeamItem.OnRightPosClick =OnRightPosClick
--AllianceWarTeamItem.SetUuid =SetUuid
--AllianceWarTeamItem.UpdateSlider =UpdateSlider
--AllianceWarTeamItem.Update =Update
--AllianceWarTeamItem.OnBgClick =OnBgClick
--AllianceWarTeamItem.OnJoinClick =OnJoinClick
--AllianceWarTeamItem.OnCancelClick =OnCancelClick
--AllianceWarTeamItem.GetSelfData =GetSelfData
--return AllianceWarTeamItem