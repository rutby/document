---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 1.
--- DateTime: 2022/3/8 15:38
---


local AlLeaderElectReusltItem = BaseClass("AlLeaderElectReusltItem",UIBaseContainer)
local base = UIBaseContainer
local Localization = CS.GameEntry.Localization

local headIcon_path = "UIPlayerHead/HeadIcon"
local headFg_path = "UIPlayerHead/Foreground"
local name_path = "name"
local power_path = "power/power"
local votes_path = "vote"
local votesNum_path = "vote/voteText"

-- 创建 
local function OnCreate(self)
    base.OnCreate(self)
    self:ComponentDefine()
    self:DataDefine()
end

-- 销毁
local function OnDestroy(self)
    self:ComponentDestroy()
    self:DataDestroy()
    base.OnDestroy(self)
end

-- 显示
local function OnEnable(self)
    base.OnEnable(self)
end

-- 隐藏
local function OnDisable(self)
    base.OnDisable(self)
end


--控件的定义
local function ComponentDefine(self)
    self.headIconN = self:AddComponent(UIPlayerHead, headIcon_path)
    self.headFgN = self:AddComponent(UIImage, headFg_path)
    self.nameN = self:AddComponent(UIText, name_path)
    self.powerN = self:AddComponent(UIText, power_path)
    self.votesN = self:AddComponent(UIText, votes_path)
    self.votesN:SetLocalText(390929)
    self.votesNumN = self:AddComponent(UIText, votesNum_path)
end

--控件的销毁
local function ComponentDestroy(self)
    self.headIconN = nil
    self.headFgN = nil
    self.nameN = nil
    self.powerN = nil
    self.votesN = nil
    self.votesNumN = nil
end

--变量的定义
local function DataDefine(self)
    self.playerInfo = nil
end

--变量的销毁
local function DataDestroy(self)
    self.playerInfo = nil
end


local function OnAddListener(self)
    base.OnAddListener(self)
    --self:AddUIListener(EventId.OnUpdateAlLeaderCandidates, self.OnCandidateInfoUpdated)
end

local function OnRemoveListener(self)
    base.OnRemoveListener(self)
    --self:RemoveUIListener(EventId.OnUpdateAlLeaderCandidates, self.OnCandidateInfoUpdated)
end

--playerInfo:AlLeaderCandidateData
local function SetItem(self, playerInfo)
    self.playerInfo = playerInfo

    self.headIconN:SetData(self.playerInfo.uid, self.playerInfo.pic, self.playerInfo.picVer)
    local tempFg = self.playerInfo:GetHeadBgImg()
    if tempFg then
        self.headFgN:SetActive(true)
        self.headFgN:LoadSprite(tempFg)
    else
        self.headFgN:SetActive(false)
    end
    self.nameN:SetText(self.playerInfo.name)
    self.powerN:SetText(string.GetFormattedSeperatorNum(self.playerInfo.power))
    self.votesNumN:SetText(self.playerInfo.voteNum)
end

AlLeaderElectReusltItem.OnCreate = OnCreate
AlLeaderElectReusltItem.OnDestroy = OnDestroy
AlLeaderElectReusltItem.OnEnable = OnEnable
AlLeaderElectReusltItem.OnDisable = OnDisable
AlLeaderElectReusltItem.ComponentDefine = ComponentDefine
AlLeaderElectReusltItem.ComponentDestroy = ComponentDestroy
AlLeaderElectReusltItem.DataDefine = DataDefine
AlLeaderElectReusltItem.DataDestroy = DataDestroy
AlLeaderElectReusltItem.OnAddListener = OnAddListener
AlLeaderElectReusltItem.OnRemoveListener = OnRemoveListener

AlLeaderElectReusltItem.SetItem = SetItem

return AlLeaderElectReusltItem