---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by guqu.
--- DateTime: 2020/8/10 18:04
---
local UIAllianceAlertDetailCtrl = BaseClass("UIAllianceAlertDetailCtrl", UIBaseCtrl)
local function CloseSelf(self)
    UIManager:GetInstance():DestroyWindow(UIWindowNames.UIAllianceAlertDetail)
end

local function Close(self)
    UIManager:GetInstance():DestroyWindowByLayer(UILayer.Normal)
end



local function OnClickPosBtn(self,pos,isV3,marchUuid,serverId,worldId)
    if pos~=0 then
        self:Close()
        EventManager:GetInstance():Broadcast(EventId.UIMAIN_VISIBLE, true)
        if isV3 then
            GoToUtil.GotoWorldPos(pos, CS.SceneManager.World.InitZoom,LookAtFocusTime,function()
                if marchUuid then
                    CS.SceneManager.World.marchUuid = marchUuid
                    DataCenter.WorldMarchDataManager:TrackMarch(marchUuid)
                    WorldMarchTileUIManager:GetInstance():ShowTroop(marchUuid)
                end
            end,serverId,worldId)
        else
            GoToUtil.GotoWorldPos(SceneUtils.TileIndexToWorld(pos,ForceChangeScene.World), CS.SceneManager.World.InitZoom,LookAtFocusTime,nil,serverId,worldId)
        end
    end
end

local function OnCloseClick(self)
    self:CloseSelf()
end

local function CloseMainTable(self)
    self:CloseSelf()
    UIManager:GetInstance():DestroyWindow(UIWindowNames.UIAllianceWarMainTable)
end

UIAllianceAlertDetailCtrl.CloseSelf =CloseSelf
UIAllianceAlertDetailCtrl.Close =Close

UIAllianceAlertDetailCtrl.OnClickPosBtn =OnClickPosBtn

UIAllianceAlertDetailCtrl.OnCloseClick = OnCloseClick

UIAllianceAlertDetailCtrl.CloseMainTable = CloseMainTable

return UIAllianceAlertDetailCtrl