---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Imaginaerum.
--- DateTime: 2021/6/9 17:06
---
local UIAllianceChangeAnnounceView = BaseClass("UIAllianceChangeAnnounceView",UIBaseView)
local base = UIBaseView
local Localization = CS.GameEntry.Localization

local title_path = "UICommonMiniPopUpTitle/Bg_mid/titleText"
local input_path = "ImgBg/InputField"
local input_default_path = "ImgBg/InputField/Text Area/Placeholder"
local return_btn_path = "UICommonMiniPopUpTitle/panel"
local close_btn_path = "UICommonMiniPopUpTitle/Bg_mid/CloseBtn"
local use_txt_path = "UICommonMiniPopUpTitle/BtnGo/Button/useText"
local use_btn_path ="UICommonMiniPopUpTitle/BtnGo/Button"
local function OnCreate(self)
    base.OnCreate(self)
    self.setType, self.defaultTxt, self.confirmCallBack = self:GetUserData()
    self.title = self:AddComponent(UITextMeshProUGUIEx,title_path)
    self.title:SetLocalText(280172) 
    self.use_txt = self:AddComponent(UITextMeshProUGUIEx,use_txt_path)
    self.use_txt:SetLocalText(GameDialogDefine.CONFIRM) 
    self.use_btn = self:AddComponent(UIButton, use_btn_path)
    self.use_btn:SetOnClick(function()  
SoundUtil.PlayEffect(SoundAssets.Music_Effect_Button)
        self:OnChangeAnnounceClick()
    end)
    self.input = self:AddComponent(UITMPInput,input_path)
    self.input:SetOnValueChange(function (value)
        self:IptOnValueChange(value)
    end)
    self.input_default = self:AddComponent(UITextMeshProUGUIEx, input_default_path)
    local defaultTxtID = ""
    if self.setType == 1 then
        defaultTxtID = Localization:GetString("390513")
    elseif self.setType == 2 then
        defaultTxtID = Localization:GetString("128024")
    elseif self.setType == 3 then
        defaultTxtID = self.defaultTxt
    end
    self.input_default:SetText(defaultTxtID) 

    self.close_btn = self:AddComponent(UIButton, close_btn_path)
    self.close_btn:SetOnClick(function()  
        self.ctrl:CloseSelf()
    end)
    self.return_btn = self:AddComponent(UIButton, return_btn_path)
    self.return_btn:SetOnClick(function()  
        self.ctrl:CloseSelf()
    end)
    self.inputValue = self.defaultTxt
    self.input:SetText(self.defaultTxt)
end

local function OnDestroy(self)
    self.title = nil
    self.use_txt = nil
    self.use_btn = nil
    self.input = nil
    self.close_btn = nil
    self.return_btn = nil
    self.inputValue = nil
    self.input_default = nil
    base.OnDestroy(self)
end

local function OnEnable(self)
    base.OnEnable(self)
end

local function OnDisable(self)
    base.OnDisable(self)
end

local function IptOnValueChange(self,value)
    self.inputValue = value
end
local function OnChangeAnnounceClick(self)
    if self.setType == 1 then
        self.ctrl:OnChangeIntroClick(self.inputValue)
    elseif self.setType == 2 then
        self.ctrl:OnChangeAnnounceClick(self.inputValue)
    elseif self.setType == 3 then
        self.ctrl:OnChangeElectSlogan(self.inputValue)
    elseif self.setType == 4 then
        if self.confirmCallBack then
            self.confirmCallBack(self.inputValue)
        end
        self.ctrl:CloseSelf()
    end
end

UIAllianceChangeAnnounceView.OnCreate = OnCreate
UIAllianceChangeAnnounceView.OnDestroy = OnDestroy
UIAllianceChangeAnnounceView.OnEnable = OnEnable
UIAllianceChangeAnnounceView.OnDisable = OnDisable
UIAllianceChangeAnnounceView.IptOnValueChange = IptOnValueChange
UIAllianceChangeAnnounceView.OnChangeAnnounceClick = OnChangeAnnounceClick

return UIAllianceChangeAnnounceView