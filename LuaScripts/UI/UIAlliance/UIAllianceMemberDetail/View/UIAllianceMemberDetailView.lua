---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by guqu.
--- DateTime: 2020/11/13 17:10
---
local UIAllianceMemberDetailView = BaseClass("UIAllianceMemberDetailView", UIBaseView)
local base = UIBaseView
local Localization = CS.GameEntry.Localization
local AllianceMember = require "UI.UIAlliance.UIAllianceMemberDetail.Component.AllianceMember"
local txt_title_path ="UICommonPopUpTitle/bg_mid/titleText"
local close_btn_path = "UICommonPopUpTitle/bg_mid/CloseBtn"
local return_btn_path = "UICommonPopUpTitle/panel"
local alliance_member_path = "AllianceMember"
local function OnCreate(self)
    base.OnCreate(self)
    --local allianceBaseData =  DataCenter.AllianceBaseDataManager:GetAllianceBaseData()
    self.allianceId, self.openType = self:GetUserData() --allianceBaseData.uid -- 
    self.view.ctrl:SetAllianceId(self.allianceId)
    self.txt_title = self:AddComponent(UITextMeshProUGUIEx, txt_title_path)
    self.txt_title:SetLocalText(390199) -- 联盟成
    self.alliance_member = self:AddComponent(AllianceMember,alliance_member_path)
    self.close_btn = self:AddComponent(UIButton, close_btn_path)
    self.close_btn:SetOnClick(function()  
SoundUtil.PlayEffect(SoundAssets.Music_Effect_Button)
        self.ctrl:CloseSelf()
    end)
    self.return_btn = self:AddComponent(UIButton, return_btn_path)
    self.return_btn:SetOnClick(function()  
SoundUtil.PlayEffect(SoundAssets.Music_Effect_Button)
        self.view.ctrl:CloseSelf()
    end)
end

local function OnDestroy(self)
    self.allianceId = nil
    self.txt_title = nil
    self.alliance_member = nil
    self.close_btn = nil
    self.return_btn = nil
    base.OnDestroy(self)
end

local function OnEnable(self)
    base.OnEnable(self)
end

local function OnDisable(self)
    base.OnDisable(self)
end

local function OnShowAllianceMemberTips(self,uid,rank,posX,posY,name)
    self.ctrl:OnShowAllianceMemberTips(uid,rank,posX,posY,name, self.openType)
end

local function CheckIfNeedShowSelfRank(self)
    return false
end

local function CheckIfShowMemberOnly(self)
    return true
end

local function GetMemberInfoByPos(self, pos)
    local allianceId = self.allianceId
    if allianceId == LuaEntry.Player.allianceId then
        return DataCenter.AllianceMemberDataManager:GetMemberInfoByOfficialPos(pos)
    else
        return DataCenter.AllianceTempListManager:GetMemberInfoByOfficialPos(allianceId, pos)
    end
end

UIAllianceMemberDetailView.OnCreate = OnCreate
UIAllianceMemberDetailView.OnDestroy = OnDestroy
UIAllianceMemberDetailView.OnRefresh = OnRefresh
UIAllianceMemberDetailView.OnEnable = OnEnable
UIAllianceMemberDetailView.OnDisable = OnDisable
UIAllianceMemberDetailView.OnShowAllianceMemberTips = OnShowAllianceMemberTips
UIAllianceMemberDetailView.CheckIfNeedShowSelfRank = CheckIfNeedShowSelfRank
UIAllianceMemberDetailView.CheckIfShowMemberOnly = CheckIfShowMemberOnly
UIAllianceMemberDetailView.GetMemberInfoByPos = GetMemberInfoByPos
return UIAllianceMemberDetailView