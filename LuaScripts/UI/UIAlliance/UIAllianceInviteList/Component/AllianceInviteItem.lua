---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Imaginaerum.
--- DateTime: 2021/6/10 17:42
---
local AllianceInviteItem = BaseClass("AllianceInviteItem",UIBaseContainer)
local base = UIBaseContainer
local Localization = CS.GameEntry.Localization
local first_name_path = "firstNameTxt"
local power_txt_path = "power"
local kill_txt_path = "kill"
local head_btn_path = "playerFlag"
local invite_btn_path = "InviteButton"
local invite_txt_path = "InviteButton/InviteText"
local invite_state_txt_path = "InviteStateText"
local function OnCreate(self)
    base.OnCreate(self)
    self.first_txt= self:AddComponent(UIText,first_name_path)
    self.power_txt= self:AddComponent(UIText,power_txt_path)
    self.kill_txt= self:AddComponent(UIText,kill_txt_path)
    self.head_btn = self:AddComponent(UIButton,head_btn_path)
    self.head_btn:SetOnClick(function()  
SoundUtil.PlayEffect(SoundAssets.Music_Effect_Button)
        self:OnHeadClick()
    end)
    self.invite_btn = self:AddComponent(UIButton,invite_btn_path)
    self.invite_btn:SetOnClick(function()  
SoundUtil.PlayEffect(SoundAssets.Music_Effect_Button)
        self:OnInviteClick()
    end)
    self.invite_state_txt = self:AddComponent(UIText,invite_state_txt_path)
    self.invite_txt = self:AddComponent(UIText,invite_txt_path)
    self.invite_txt:SetLocalText(390198) 
    self.invite_state_txt:SetLocalText(390196) 
end

local function SetItemShow(self, data)
    local uid = data
    self.data =DataCenter.AllianceTempListManager:GetAllianceInviteListByUid(uid)
    self.first_txt:SetText(self.data.name)
    self.power_txt:SetText(string.GetFormattedSeperatorNum(self.data.power))
    self.kill_txt:SetText(string.GetFormattedSeperatorNum(self.data.level))
    self.invite_btn:SetActive(self.data.invite==false)
end

local function OnHeadClick(self)
    self.view.ctrl:OnPlayerDetailClick(self.data.uid)
end
local function OnInviteClick(self)
    if not DataCenter.AllianceBaseDataManager:IsR4orR5() then
        UIUtil.ShowTipsId(390002) 
        return
    end
    
    self.invite_btn:SetActive(false)
    self.view:OnInvitePlayerClick(self.data.uid)
end

AllianceInviteItem.OnCreate = OnCreate
AllianceInviteItem.SetItemShow = SetItemShow
AllianceInviteItem.OnHeadClick = OnHeadClick
AllianceInviteItem.OnInviteClick = OnInviteClick
return AllianceInviteItem