---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by mac.
--- DateTime: 7/22/21 2:48 PM
--- UIAlContributeCtrl.lua
local UIAllianceBossDonateRankCtrl = BaseClass("UIAllianceBossDonateRankCtrl", UIBaseCtrl)

local function CloseSelf(self)
    UIManager:GetInstance():DestroyWindow(UIWindowNames.UIAllianceBossRewardShow)
end

local function Close(self)
    UIManager:GetInstance():DestroyWindowByLayer(UILayer.Normal)
end

-- -- 把所有reward的goods合成一条
-- local function MergeRewardGoodsAsOne(self, rewardList)
--     local mergedRewardList = {}
--     for _, v in ipairs(rewardList) do

--         for _,rewardObj in ipairs(v.reward) do
--             if mergedRewardList[rewardObj.value.id] == nil then
--                 mergedRewardList[rewardObj.value.id] = rewardObj.value.num
--             else
--                 mergedRewardList[rewardObj.value.id] = mergedRewardList[rewardObj.value.id] + rewardObj.value.num
--             end
--         end

--     end

--     return mergedRewardList
-- end

-- 把所有reward乘以倍数
local function MergeRewardGoodsAsOne(self, reward)
   local list = {}
    for i = 1 ,table.count(reward) do
        for j = 1 ,table.count(reward[i]) do
            table.insert(list,reward[i][j])
        end
    end
    local rewardList = {}
    for i = 1 ,table.count(list) do
        if rewardList[list[i].itemId] then
            rewardList[list[i].itemId].count = rewardList[list[i].itemId].count + list[i].count
        else
            rewardList[list[i].itemId] = {}
            rewardList[list[i].itemId] = list[i]
        end
    end
    return rewardList
end

UIAllianceBossDonateRankCtrl.CloseSelf = CloseSelf
UIAllianceBossDonateRankCtrl.Close = Close
UIAllianceBossDonateRankCtrl.MergeRewardGoodsAsOne = MergeRewardGoodsAsOne

return UIAllianceBossDonateRankCtrl