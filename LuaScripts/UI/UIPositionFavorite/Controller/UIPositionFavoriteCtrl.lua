---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Still4.
--- DateTime: 2021/7/1 11:46
---
local UIPositionFavoriteCtrl = BaseClass("UIPositionFavoriteCtrl", UIBaseCtrl)
local function CloseSelf(self)
    UIManager:GetInstance():DestroyWindow(UIWindowNames.UIPositionFavorite,{anim = true,UIMainAnim = UIMainAnimType.LeftRightBottomShow})
end

local function Close(self)
    UIManager:GetInstance():DestroyWindowByLayer(UILayer.Normal)
end

local function GetMarkListByTab(self,tab)
    local showList ={}
    local dataList ={}
    if tab==-1 then
        dataList = DataCenter.WorldFavoDataManager:GetAllBookList()
    else
        dataList = DataCenter.WorldFavoDataManager:GetBookListByType(tab)
    end
    if dataList~=nil then
        table.walksort(dataList,function (leftKey,rightKey)
            return dataList[leftKey].createTime < dataList[rightKey].createTime
        end,function(k,v)
            table.insert(showList,v)
        end)
    end
    return showList
end

local function DelBookMark(self,selectItem)
    SFSNetwork.SendMessage(MsgDefines.WorldFavoDel,selectItem.pos,selectItem.type,selectItem.server)
end

local function ShareBookMark(self,selectItem)
    local share_param = {}
    share_param.sid = selectItem.server
    share_param.pos = selectItem.pos
    share_param.uname = selectItem.name
    GoToUtil.GotoOpenView(UIWindowNames.UIPositionShare, {anim = true}, share_param)
end

local function OnClickPosBtn(self,selectItem)
    GoToUtil.GotoWorldPos(SceneUtils.TileIndexToWorld(selectItem.pos), CS.SceneManager.World.InitZoom,nil,nil,selectItem.server)
    self:CloseSelf()
end

UIPositionFavoriteCtrl.CloseSelf =CloseSelf
UIPositionFavoriteCtrl.Close =Close
UIPositionFavoriteCtrl.GetMarkListByTab = GetMarkListByTab
UIPositionFavoriteCtrl.DelBookMark = DelBookMark
UIPositionFavoriteCtrl.ShareBookMark = ShareBookMark
UIPositionFavoriteCtrl.OnClickPosBtn = OnClickPosBtn

return UIPositionFavoriteCtrl