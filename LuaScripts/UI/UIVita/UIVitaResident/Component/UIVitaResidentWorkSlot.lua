---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Beef.
--- DateTime: 2023/11/3 19:07
---

local UIVitaResidentWorkPanel = BaseClass("UIVitaResidentWorkPanel", UIBaseContainer)
local base = UIBaseContainer

local icon_path = "Icon"
local sub_path = "Sub"
local effect_path = "Effect"

local function OnCreate(self)
    base.OnCreate(self)
    self:ComponentDefine()
    self:DataDefine()
end

local function OnDestroy(self)
    self:ComponentDestroy()
    self:DataDestroy()
    base.OnDestroy(self)
end

local function OnEnable(self)
    base.OnEnable(self)
    self.active = true
end

local function OnDisable(self)
    self.active = false
    base.OnDisable(self)
end

local function ComponentDefine(self)
    self.icon_image = self:AddComponent(UIImage, icon_path)
    self.sub_image = self:AddComponent(UIImage, sub_path)
    self.effect_particle = self.transform:Find(effect_path):GetComponent(typeof(CS.UnityEngine.ParticleSystem))
end

local function ComponentDestroy(self)
    
end

local function DataDefine(self)
    self.isEmpty = false
end

local function DataDestroy(self)
    
end

local function OnAddListener(self)
    base.OnAddListener(self)
end

local function OnRemoveListener(self)
    base.OnRemoveListener(self)
end

local function Refresh(self)
    if self.isEmpty or self.residentData == nil then
        self.icon_image:LoadSprite(string.format(LoadPath.UIVita, "xiaoren4"))
        self.sub_image:SetActive(false)
    elseif self.residentData.state == VitaDefines.ResidentState.Normal then
        self.icon_image:LoadSprite(string.format(LoadPath.UIVita, "xiaoren1"))
        self.sub_image:SetActive(false)
    elseif self.residentData.state == VitaDefines.ResidentState.Ill or self.residentData.state == VitaDefines.ResidentState.Healing then
        self.icon_image:LoadSprite(string.format(LoadPath.UIVita, "xiaoren2"))
        self.sub_image:LoadSprite(string.format(LoadPath.UIMain, "com_icon_shengbing"))
        self.sub_image:SetActive(true)
    elseif self.residentData.state == VitaDefines.ResidentState.Strike then
        self.icon_image:LoadSprite(string.format(LoadPath.UIVita, "xiaoren3"))
        self.sub_image:LoadSprite(string.format(LoadPath.UIMain, "com_icon_bagong2"))
        self.sub_image:SetActive(true)
    end
end

local function SetData(self, residentData)
    self.residentData = residentData
end

local function SetEmpty(self, isEmpty)
    self.isEmpty = isEmpty
end

local function PlayEffect(self)
    self.effect_particle:Play()
end

local function StopEffect(self)
    self.effect_particle:Stop()
end

UIVitaResidentWorkPanel.OnCreate = OnCreate
UIVitaResidentWorkPanel.OnDestroy = OnDestroy
UIVitaResidentWorkPanel.OnEnable = OnEnable
UIVitaResidentWorkPanel.OnDisable = OnDisable
UIVitaResidentWorkPanel.ComponentDefine = ComponentDefine
UIVitaResidentWorkPanel.ComponentDestroy = ComponentDestroy
UIVitaResidentWorkPanel.DataDefine = DataDefine
UIVitaResidentWorkPanel.DataDestroy = DataDestroy
UIVitaResidentWorkPanel.OnAddListener = OnAddListener
UIVitaResidentWorkPanel.OnRemoveListener = OnRemoveListener

UIVitaResidentWorkPanel.Refresh = Refresh
UIVitaResidentWorkPanel.SetData = SetData
UIVitaResidentWorkPanel.SetEmpty = SetEmpty
UIVitaResidentWorkPanel.PlayEffect = PlayEffect
UIVitaResidentWorkPanel.StopEffect = StopEffect

return UIVitaResidentWorkPanel