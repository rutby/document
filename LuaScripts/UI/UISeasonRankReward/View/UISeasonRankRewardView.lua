---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by zzl
--- DateTime:
--- 
local UISeasonRankRewardView = BaseClass("UISeasonRankRewardView", UIBaseView)
local base = UIBaseView
local Localization = CS.GameEntry.Localization
local UISeasonRankRewardCell = require "UI.UISeasonRankReward.Component.UISeasonRankRewardCell"

local title_path = "UICommonPopUpTitle/bg_mid/titleText"
local scroll_view_path = "ScrollView"
local closeBtn_path = "UICommonPopUpTitle/bg_mid/CloseBtn"
local maskBtn_path = "UICommonPopUpTitle/panel"
local tips_path = "Tip"
local Txt_RankNum = "select/Txt_RankNum"
local Txt_Reward = "select/Txt_Reward"

local function OnCreate(self)
    base.OnCreate(self)
    self.actId = self:GetUserData()
    self:ComponentDefine()
    self:DataDefine()
    self:ReInit()
end

local function OnDestroy(self)
    self:SetCellDestroy()
    self:ComponentDestroy()
    self:DataDestroy()
    base.OnDestroy(self)
end

local function OnEnable(self)
    base.OnEnable(self)
end

local function OnDisable(self)
    base.OnDisable(self)
end

local function ComponentDefine(self)
    self.closeBtnN = self:AddComponent(UIButton, closeBtn_path)
    self.closeBtnN:SetOnClick(function()
        UIManager.Instance:DestroyWindow(UIWindowNames.UISeasonRankReward)
    end)
    self.maskBtnN = self:AddComponent(UIButton, maskBtn_path)
    self.maskBtnN:SetOnClick(function()
        UIManager.Instance:DestroyWindow(UIWindowNames.UISeasonRankReward)
    end)
    self.titleTxtN = self:AddComponent(UIText, title_path)
    self.titleTxtN:SetLocalText(110467)

    self.tips = self:AddComponent(UIText,tips_path)
    self.tips:SetLocalText(110468)
    
    self.scroll_view = self:AddComponent(UIScrollView, scroll_view_path)
    self.scroll_view:SetOnItemMoveIn(function(itemObj, index)
        self:OnCreateCell(itemObj, index)
    end)
    self.scroll_view:SetOnItemMoveOut(function(itemObj, index)
        self:OnDeleteCell(itemObj, index)
    end)
    
    self._rankNum_txt = self:AddComponent(UIText,Txt_RankNum)
    self._reward_txt = self:AddComponent(UIText,Txt_Reward)
end

local function ComponentDestroy(self)
    --self.testN = nil
    self.goalN = nil
    self.tip1N = nil
    self.tip2N = nil
    self.tip3N = nil
    self.tip4N = nil
    self.joinBtnN = nil
    self.joinBtnTxtN = nil
    self.createBtnN = nil
    self.createBtnTxtN = nil
    self.closeBtnN = nil
end

local function DataDefine(self)

end

local function DataDestroy(self)

end

local function ReInit(self)
    self:SetCellDestroy()
    
    self._rankNum_txt:SetLocalText(302128)
    self._reward_txt:SetLocalText(131004)
    
    self.listReward = self.ctrl:ShowReward(self.actId)
    
    self.scroll_view:SetTotalCount(#self.listReward.strLevel)
    self.scroll_view:RefillCells()
end

local function OnCreateCell(self, itemObj, index)
    itemObj.name = tostring(index)
    local item = self.scroll_view:AddComponent(UISeasonRankRewardCell, itemObj)
    item:ShowRewards(self.listReward.strLevel[index],self.listReward.strReward[index])
end

local function OnDeleteCell(self, itemObj, index)
    self.scroll_view:RemoveComponent(itemObj.name, UISeasonRankRewardCell)
end

local function SetCellDestroy(self)
    self.scroll_view:ClearCells()
    self.scroll_view:RemoveComponents(UISeasonRankRewardCell)
end

UISeasonRankRewardView.OnCreate = OnCreate
UISeasonRankRewardView.OnDestroy = OnDestroy
UISeasonRankRewardView.ComponentDefine = ComponentDefine
UISeasonRankRewardView.DataDefine = DataDefine
UISeasonRankRewardView.DataDestroy = DataDestroy
UISeasonRankRewardView.ReInit = ReInit
UISeasonRankRewardView.SetCellDestroy = SetCellDestroy
UISeasonRankRewardView.OnEnable = OnEnable
UISeasonRankRewardView.OnDisable = OnDisable
UISeasonRankRewardView.ComponentDestroy = ComponentDestroy
UISeasonRankRewardView.AddTimer = AddTimer
UISeasonRankRewardView.RefreshTime = RefreshTime
UISeasonRankRewardView.DeleteTimer = DeleteTimer
UISeasonRankRewardView.OnCreateCell = OnCreateCell
UISeasonRankRewardView.OnDeleteCell = OnDeleteCell
return UISeasonRankRewardView