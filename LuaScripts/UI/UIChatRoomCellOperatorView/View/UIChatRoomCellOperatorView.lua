---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by mac.
--- DateTime: 8/31/21 3:14 PM
---
local UIChatRoomCellOperatorView = BaseClass("UIChatRoomCellOperatorView", UIBaseView)
local base = UIBaseView
local Localization = CS.GameEntry.Localization

local _cp_btnBg = "butBg"
local _cp_root = "root"
local _cp_btnDelete = "root/btnDelete"
local _cp_txtDelete = "root/btnDelete/txtDel"

function UIChatRoomCellOperatorView:ComponentDefine()
    self._root = self:AddComponent(UIBaseContainer, _cp_root)
    self._btnBg = self:AddComponent(UIButton, _cp_btnBg)
    self._btnBg:SetOnClick(BindCallback(self, self.OnClickBg))
    
    self._btnDelete = self:AddComponent(UIButton, _cp_btnDelete)
    self._btnDelete:SetOnClick(BindCallback(self, self.OnClickBtnDelete))
    
    self._txtDelete = self:AddComponent(UIText, _cp_txtDelete)
    self._txtDelete:SetLocalText(100190) 
end
function UIChatRoomCellOperatorView:OnDestroy()
    base.OnDestroy(self)
end

function UIChatRoomCellOperatorView:OnClickBg()
    self.ctrl:CloseSelf()
end

function UIChatRoomCellOperatorView:DialogDefine()
    
    
end

function UIChatRoomCellOperatorView:DelayInvoke(callback, delayTime)
    local param = {}
    param.timer = TimerManager:GetInstance():GetTimer(delayTime, function()
        if param.timer ~= nil then
            param.timer:Stop()
            param.timer = nil
        end
        param = nil
        callback()
    end , self, true,false,false)
    param.timer:Start()
end

function UIChatRoomCellOperatorView:DataDefine()
    local userData = self:GetUserData()
    self._targetPos = userData["targetPos"]
    self._cellItem = userData["cellItem"]
end


function UIChatRoomCellOperatorView:OnCreate()
    base.OnCreate(self)
    self:ComponentDefine()
    self:DataDefine()
    self:DialogDefine()
    self:SetPosition()
end

function UIChatRoomCellOperatorView:OnClickBtnDelete()
    UIUtil.ShowMessage(Localization:GetString("290044"), 2, GameDialogDefine.CONFIRM, GameDialogDefine.CANCEL, function ()
        self._cellItem:DelClick()
        self.ctrl:CloseSelf()
    end);
end

function UIChatRoomCellOperatorView:SetPosition()
    self._root.transform.position = self._targetPos.position + Vector2.New(0, 0)
end


return UIChatRoomCellOperatorView