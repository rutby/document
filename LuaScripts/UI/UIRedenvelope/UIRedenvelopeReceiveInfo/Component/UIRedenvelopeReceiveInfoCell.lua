---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by zzl.
--- DateTime: 2022/2/22
---
local UIRedenvelopeReceiveInfoCell = BaseClass("UIRedenvelopeReceiveInfoCell",UIBaseContainer)
local base = UIBaseContainer

local txt_playerName_path = "Txt_PlayerName"
local txt_lucky_path = "Txt_Lucky"
local txt_time_path = "Txt_Time"
local img_rewardType_path = "Rect_Reward/Img_RewardType"
local txt_rewardNum_path = "Rect_Reward/Txt_RewardNum"
local playerHead = "Rect_Head/UIPlayerHead/HeadIcon"
local playerHeadFg = "Rect_Head/UIPlayerHead/Foreground"
local Localization = CS.GameEntry.Localization
local function OnCreate(self)
    base.OnCreate(self)
	self.playerHead = self:AddComponent(UIPlayerHead,playerHead)
    self.playerHeadFg = self:AddComponent(UIImage, playerHeadFg)
    self._playerName_txt = self:AddComponent(UIText,txt_playerName_path)
    self._lucky_txt = self:AddComponent(UIText,txt_lucky_path)
    self._time_txt = self:AddComponent(UIText,txt_time_path)
	self._rewardNum_txt = self:AddComponent(UITextMeshProUGUIEx,txt_rewardNum_path)
    self._rewardType_img = self:AddComponent(UIImage,img_rewardType_path)
end

local function OnEnable(self)
    base.OnEnable(self)
end

local function OnDisable(self)
    base.OnDisable(self)
end
local function OnDestroy(self)
    self.playerHead = nil
    self._playerName_txt = nil
    self._lucky_txt = nil
    self._time_txt = nil
    self._rewardNum_txt = nil
    base.OnDestroy(self)
end

local function ReInit(self,index,data,rewardType,isLucky)
    self.data =data
    self.playerHead:SetData(self.data.uid, self.data.pic, self.data.picV)
    local curTime = UITimeManager:GetInstance():GetServerSeconds()
    --self.playerHeadFg:SetActive(self.data.mCardET > curTime)
    local headBgImg = DataCenter.DecorationDataManager:GetHeadFrame(self.data.headSkinId, self.data.headSkinET, self.data.mCardET > curTime)
    if headBgImg ~= nil then
        self.playerHeadFg:SetActive(true)
        self.playerHeadFg:LoadSprite(headBgImg)
    else
        self.playerHeadFg:SetActive(false)
    end

    self._playerName_txt:SetText(self.data.uName)
    self._time_txt:SetText(os.date("%m-%d %H:%M", self.data.getTime))
    self._rewardNum_txt:SetText(self.data.gold)
    self._rewardType_img:LoadSprite(DataCenter.RewardManager:GetPicByType(ResTypeToReward[rewardType]))
    self._lucky_txt:SetActive(isLucky ~= 0 and isLucky == index)
    if data.lucky ~= 0 and data.lucky == index then
        self._lucky_txt:SetLocalText(390894)
        self._lucky_txt:SetActive(true)
    else
        self._lucky_txt:SetActive(false)
    end
end

UIRedenvelopeReceiveInfoCell.OnCreate = OnCreate
UIRedenvelopeReceiveInfoCell.OnDestroy = OnDestroy
UIRedenvelopeReceiveInfoCell.OnEnable = OnEnable
UIRedenvelopeReceiveInfoCell.OnDisable = OnDisable
UIRedenvelopeReceiveInfoCell.ReInit = ReInit
return UIRedenvelopeReceiveInfoCell