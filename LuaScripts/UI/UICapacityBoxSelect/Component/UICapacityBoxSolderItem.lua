---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by zzl.
--- DateTime: 2022/2/9 21:15
---
local UICapacityBoxSolderItem = BaseClass("UICapacityBoxSolderItem", UIBaseContainer)
local base = UIBaseContainer
local Localization = CS.GameEntry.Localization
-- 创建
function UICapacityBoxSolderItem:OnCreate()
    base.OnCreate(self)
    self:ComponentDefine()
    self:DataDefine()
end

-- 销毁
function UICapacityBoxSolderItem:OnDestroy()
    self:ComponentDestroy()
    self:DataDestroy()
    base.OnDestroy(self)
end

-- 显示
function UICapacityBoxSolderItem:OnEnable()
    base.OnEnable(self)
end

-- 隐藏
function UICapacityBoxSolderItem:OnDisable()
    base.OnDisable(self)
end

--控件的定义
function UICapacityBoxSolderItem:ComponentDefine()

    self._icon_img = self:AddComponent(UIImage, "UISoldierItem/Icon")
    self._lv_txt = self:AddComponent(UIText, "UISoldierItem/LevelText")
    self._count_txt = self:AddComponent(UIText, "UISoldierItem/CountText")

    self.select_btn =self:AddComponent(UIButton,"UISoldierItem")
    self.select_btn:SetOnClick(function()
        SoundUtil.PlayEffect(SoundAssets.Music_Effect_Button)
         self:OnBtnClick()
    end)
    self._name_txt = self:AddComponent(UIText,"Txt_Name")
end

--控件的销毁
function UICapacityBoxSolderItem:ComponentDestroy()

end

--变量的定义
function UICapacityBoxSolderItem:DataDefine()
    self.param = {}
end

--变量的销毁
function UICapacityBoxSolderItem:DataDestroy()
    self.param = nil
end

-- 全部刷新
function UICapacityBoxSolderItem:RefreshData(param)
    self.param = param
    self._count_txt:SetText(param.count)
    local template = DataCenter.ArmyTemplateManager:GetArmyTemplate(tonumber(param.id))
    if template then
        self._name_txt:SetLocalText(template.name)
        self._icon_img:LoadSprite(string.format(LoadPath.SoldierIcons,template.icon))
        self._lv_txt:SetText(RomeNum[template.show_level])
    end
end

function UICapacityBoxSolderItem:OnBtnClick()
    if self.param.callback ~= nil then
        self.param.callback(self.transform,self.param.index)
    end
end

return UICapacityBoxSolderItem