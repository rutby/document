---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by zzl.
--- DateTime: 2022/2/9 21:15
---
local UICapacityBoxHeroItem = BaseClass("UICapacityBoxHeroItem", UIBaseContainer)
local base = UIBaseContainer
local UIHeroCell = require "UI.UIHero2.Common.UIHeroCellSmall"
-- 创建
function UICapacityBoxHeroItem:OnCreate()
    base.OnCreate(self)
    self:ComponentDefine()
    self:DataDefine()
end

-- 销毁
function UICapacityBoxHeroItem:OnDestroy()
    self:ComponentDestroy()
    self:DataDestroy()
    base.OnDestroy(self)
end

-- 显示
function UICapacityBoxHeroItem:OnEnable()
    base.OnEnable(self)
end

-- 隐藏
function UICapacityBoxHeroItem:OnDisable()
    base.OnDisable(self)
end

--控件的定义
function UICapacityBoxHeroItem:ComponentDefine()
    self.hero = self:AddComponent(UIHeroCell,"UIHeroCellSmall")
    self.select_btn =self:AddComponent(UIButton,"UIHeroCellSmall")
    self.select_btn:SetOnClick(function()
        SoundUtil.PlayEffect(SoundAssets.Music_Effect_Button)
         self:OnBtnClick()
    end)
    self._num_txt = self:AddComponent(UITextMeshProUGUIEx,"Txt_Num")
end

--控件的销毁
function UICapacityBoxHeroItem:ComponentDestroy()
    self.hero = nil
    self._num_txt = nil
end

--变量的定义
function UICapacityBoxHeroItem:DataDefine()
    self.param = {}
end

--变量的销毁
function UICapacityBoxHeroItem:DataDestroy()
    self.param = nil
end

-- 全部刷新
function UICapacityBoxHeroItem:RefreshData(param)
    self.param = param
    self.hero:InitWithConfigId(self.param.heroId,self.param.quality,"1")
    self.hero:SetStarActive(false)
    self.hero:ToggleLevel(false)
    self._num_txt:SetText(self.param.name.." x" ..self.param.count)
end

function UICapacityBoxHeroItem:OnBtnClick()
    if self.param.callback ~= nil then
        self.param.callback(self.transform,tonumber(self.param.heroId))
    end
end

return UICapacityBoxHeroItem