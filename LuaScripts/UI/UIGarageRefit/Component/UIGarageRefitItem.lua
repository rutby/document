---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Beef.
--- DateTime: 2022/3/9 16:07
---

local UIGarageRefitItem = BaseClass("UIGarageRefitItem", UIBaseContainer)
local base = UIBaseContainer

local this_path = ""
local icon_path = "Icon"
local lock_path = "Lock"
local level_path = "Level"

local function OnCreate(self)
    base.OnCreate(self)
    self:DataDefine()
    self:ComponentDefine()
end

local function OnDestroy(self)
    self:ComponentDestroy()
    self:DataDestroy()
    base.OnDestroy(self)
end

local function ComponentDefine(self)
    self.btn = self:AddComponent(UIButton, this_path)
    self.btn:SetOnClick(function()
        self:OnClick()
    end)
    self.icon_image = self:AddComponent(UIImage, icon_path)
    self.lock_image = self:AddComponent(UIImage, lock_path)
    self.level_text = self:AddComponent(UITextMeshProUGUIEx, level_path)
end

local function ComponentDestroy(self)
    self.btn = nil
    self.icon_image = nil
    self.lock_image = nil
    self.level_text = nil
end

local function DataDefine(self)
    self.onClick = nil
end

local function DataDestroy(self)
    self.onClick = nil
end

local function OnEnable(self)
    base.OnEnable(self)
end

local function OnDisable(self)
    base.OnDisable(self)
end

local function SetData(self, part)
    if part and part.level > 0 then
        local partTemplate = DataCenter.GarageRefitManager:GetPartTemplate(part.type, part.level)
        self.icon_image:SetActive(true)
        self.lock_image:SetActive(false)
        self.level_text:SetActive(true)
        self.icon_image:LoadSprite(string.format(LoadPath.UIGarageRefitUIRetrofit_, partTemplate:getValue("icon")))
        self.level_text:SetText("Lv." .. part.level)
    else
        self.icon_image:SetActive(false)
        self.lock_image:SetActive(true)
        self.level_text:SetActive(false)
    end
end

local function SetTemplate(self, template)
    if template and template:getValue("level") > 0 then
        self.icon_image:SetActive(true)
        self.lock_image:SetActive(false)
        self.level_text:SetActive(true)
        self.icon_image:LoadSprite(string.format(LoadPath.UIGarageRefitUIRetrofit_, template:getValue("icon")))
        self.level_text:SetText("Lv." .. template.level)
    else
        self.icon_image:SetActive(false)
        self.lock_image:SetActive(true)
        self.level_text:SetActive(false)
    end
end

local function SetOnClick(self, onClick)
    self.onClick = onClick
end

local function OnClick(self)
    if self.onClick then
        self.onClick()
    end
end

UIGarageRefitItem.OnCreate= OnCreate
UIGarageRefitItem.OnDestroy = OnDestroy
UIGarageRefitItem.ComponentDefine = ComponentDefine
UIGarageRefitItem.ComponentDestroy = ComponentDestroy
UIGarageRefitItem.DataDefine = DataDefine
UIGarageRefitItem.DataDestroy = DataDestroy
UIGarageRefitItem.OnEnable = OnEnable
UIGarageRefitItem.OnDisable = OnDisable

UIGarageRefitItem.SetData = SetData
UIGarageRefitItem.SetTemplate = SetTemplate
UIGarageRefitItem.SetOnClick = SetOnClick
UIGarageRefitItem.OnClick = OnClick

return UIGarageRefitItem