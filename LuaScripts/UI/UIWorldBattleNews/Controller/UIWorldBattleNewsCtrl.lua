---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Imaginaerum.
--- DateTime: 2022/3/28 14:50
---
local UIWorldBattleNewsCtrl = BaseClass("UIWorldBattleNewsCtrl", UIBaseCtrl)
local Localization = CS.GameEntry.Localization
local function CloseSelf(self)
    UIManager.Instance:DestroyWindow(UIWindowNames.UIWorldBattleNews)
end

local function GetAreaInfoList(self)
    local showList = {}
    local latestTime = 0
    local infoList = DataCenter.WorldNewsDataManager:GetAreaInfoList()
    for k,v in pairs(infoList) do
        local oneData = {}
        oneData.showType = BattleNewsType.Battle
        if v.time>latestTime then
            latestTime = v.time
        end
        oneData.time = v.time
        oneData.pointId = v.id
        oneData.allianceAbbrList = v.alInfoList
        table.insert(showList,oneData)
    end
    DataCenter.WorldNewsDataManager:SetLastGetAreaNewsTime(latestTime)
    return showList
end

local function GetNewsInfoList(self)
    local showList = {}
    local latestTime = 0
    local infoList = DataCenter.WorldNewsDataManager:GetNewsInfoList()
    for k,v in pairs(infoList) do
        local oneData = {}
        oneData.showType = BattleNewsType.AllianceCity
        oneData.newsType = v.newsType
        oneData.time = v.time
        if v.time>latestTime then
            latestTime = v.time
        end
        oneData.cityId = v.content
        oneData.atkAbbr = v.atkAbbr
        oneData.defAbbr = v.defAbbr
        oneData.atkColor = v.atkColor
        oneData.defColor = v.defColor
        table.insert(showList,oneData)
    end
    DataCenter.WorldNewsDataManager:SetLastGetAlCityNewsTime(latestTime)
    return showList
end




UIWorldBattleNewsCtrl.CloseSelf = CloseSelf
UIWorldBattleNewsCtrl.GetNewsInfoList = GetNewsInfoList
UIWorldBattleNewsCtrl.GetAreaInfoList = GetAreaInfoList
return UIWorldBattleNewsCtrl