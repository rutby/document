---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Imaginaerum.
--- DateTime: 23/1/2024 下午7:13
---
local UIFormationAddCtrl = BaseClass("UIFormationAddCtrl", UIBaseCtrl)

function UIFormationAddCtrl:CloseSelf()
    UIManager:GetInstance():DestroyWindow(UIWindowNames.UIFormationAdd)
end

function UIFormationAddCtrl:GetShowList()
    local list = {}
    local hasScience = false
    local levelTemplate = DataCenter.BuildTemplateManager:GetBuildingLevelTemplate(BuildingTypes.FUN_BUILD_TRAINFIELD_2, 0)
    if levelTemplate ~= nil then
        local needScience = levelTemplate:GetNeedScience()
        if needScience[1] ~= nil then
            local scienceId = needScience[1].scienceId
            local level = needScience[1].level
            if not DataCenter.ScienceManager:HasScienceByIdAndLevel(scienceId, level) then
                hasScience = true
                local param = {}
                param.scienceId =scienceId
                param.scienceLevel = level
                table.insert(list,param)
            end
        end
    end
    if hasScience ==false then
        levelTemplate = DataCenter.BuildTemplateManager:GetBuildingLevelTemplate(BuildingTypes.FUN_BUILD_TRAINFIELD_3, 0)
        if levelTemplate ~= nil then
            local needScience = levelTemplate:GetNeedScience()
            if needScience[1] ~= nil then
                local scienceId = needScience[1].scienceId
                local level = needScience[1].level
                local param = {}
                param.scienceId =scienceId
                param.scienceLevel = level
                table.insert(list,param)
            end
        end
    end
    local golloesMonthCard = DataCenter.MonthCardNewManager:GetGolloesMonthCard()
    if golloesMonthCard then
        local package = golloesMonthCard:GetPackageData()
        if package~=nil then
            local param = {}
            param.monthCard = golloesMonthCard
            table.insert(list,param)
        end
    end
    return list
end
return UIFormationAddCtrl