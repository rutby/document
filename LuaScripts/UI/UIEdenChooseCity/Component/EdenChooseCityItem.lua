---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Imaginaerum.
--- DateTime: 2023/8/3 16:07
---
local EdenChooseCityItem = BaseClass("CrossServerListCell", UIBaseContainer)
local base = UIBaseContainer
local Localization = CS.GameEntry.Localization
-- 创建
function EdenChooseCityItem:OnCreate()
    base.OnCreate(self)
    self:ComponentDefine()
    self:DataDefine()
end

-- 销毁
function EdenChooseCityItem:OnDestroy()
    self:ComponentDestroy()
    self:DataDestroy()
    base.OnDestroy(self)
end

-- 显示
function EdenChooseCityItem:OnEnable()
    base.OnEnable(self)
end

-- 隐藏
function EdenChooseCityItem:OnDisable()
    base.OnDisable(self)
end


--控件的定义
function EdenChooseCityItem:ComponentDefine()
    self.btn = self:AddComponent(UIButton, "")
    self.btn:SetOnClick(function()
        self:OnBtnClick()
    end)
    self._city_txt = self:AddComponent(UIText, "Txt_CityName")
end

--控件的销毁
function EdenChooseCityItem:ComponentDestroy()
    self.btn = nil
    self._server_txt = nil
end

--变量的定义
function EdenChooseCityItem:DataDefine()
    self.param = {}
end

--变量的销毁
function EdenChooseCityItem:DataDestroy()
    self.param = nil
end

-- 全部刷新
function EdenChooseCityItem:ReInit(cityData)
    self.posV2 = cityData.centerV2
    local name = Localization:GetString(cityData.cityName).." ("..self.posV2.x..","..self.posV2.y..") "
    self._city_txt:SetText(name)
end


function EdenChooseCityItem:OnBtnClick()
    GoToUtil.CloseAllWindows()
    local position = SceneUtils.TileToWorld(self.posV2, ForceChangeScene.World)
    GoToUtil.GotoWorldPos(position)
    WorldArrowManager:GetInstance():ShowArrowEffect(0,position,ArrowType.Building)
end

return  EdenChooseCityItem