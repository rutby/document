---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Still4.
--- DateTime: 2021/6/30 16:35
---
local UIPositionAddCtrl = BaseClass("UIPositionAddCtrl", UIBaseCtrl)
local Localization = CS.GameEntry.Localization
local function CloseSelf(self)
    UIManager:GetInstance():DestroyWindow(UIWindowNames.UIPositionAdd)
end

local function Close(self)
    UIManager:GetInstance():DestroyWindowByLayer(UILayer.Normal)
end

local function GetBookmark(self, point, server)
    return DataCenter.WorldFavoDataManager:GetBookmark(point, server)
end

local function AddBookMark(self, point, server, name, type, topFlag)
    if name ~= nil and name ~= "" then
        DataCenter.WorldFavoDataManager:AddBookmark(point, server, name, type, topFlag)
        self:CloseSelf()
    else
        UIUtil.ShowTipsId(GameDialogDefine.PLEASE_INPUT_NUM) 
    end
end

local function AddAllianceMark(self, point, server, name, type)
    if name and name ~= "" then
        DataCenter.WorldFavoDataManager:TryAddAllianceMask(point, server, type, name)
        self:CloseSelf()
    else
        UIUtil.ShowTipsId(GameDialogDefine.PLEASE_INPUT_NUM) 
    end
end

local function DelAllianceMark(self, markType)
    DataCenter.WorldFavoDataManager:TryDelAllianceMask(markType)
    self:CloseSelf()
end

local function CheckIfCanAddAllianceMark(self)
    if not LuaEntry.Player:IsInAlliance() then
        return false
    end
    if not DataCenter.AllianceBaseDataManager:IsR4orR5() then
        return false
    end
    return true
end

UIPositionAddCtrl.CloseSelf = CloseSelf
UIPositionAddCtrl.Close = Close
UIPositionAddCtrl.GetBookmark = GetBookmark
UIPositionAddCtrl.AddBookMark = AddBookMark
UIPositionAddCtrl.AddAllianceMark = AddAllianceMark
UIPositionAddCtrl.DelAllianceMark = DelAllianceMark
UIPositionAddCtrl.CheckIfCanAddAllianceMark = CheckIfCanAddAllianceMark

return UIPositionAddCtrl