---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by zzl
---
local UIActivityEdenWarTipsView = BaseClass("UIActivityEdenWarTipsView",UIBaseView)
local base = UIBaseView
local Screen = CS.UnityEngine.Screen

function UIActivityEdenWarTipsView:OnCreate()
    base.OnCreate(self)
    self._title_txt = self:AddComponent(UITextMeshProUGUIEx, "UICommonPopUpTitle/bg_mid/titleText")
    self._title_txt:SetLocalText(170001)
    self.close_btn = self:AddComponent(UIButton, "UICommonPopUpTitle/bg_mid/CloseBtn")
    self.close_btn:SetOnClick(function()
        SoundUtil.PlayEffect(SoundAssets.Music_Effect_Button)
        self.ctrl:CloseSelf()
    end)
    self.return_btn = self:AddComponent(UIButton, "UICommonPopUpTitle/panel")
    self.return_btn:SetOnClick(function()
        SoundUtil.PlayEffect(SoundAssets.Music_Effect_Button)
        self.ctrl:CloseSelf()
    end)
    self.scroll_view = self:AddComponent(UIScrollPage, "ScrollView")
    self.content = self:AddComponent(UIBaseContainer, "ScrollView/View/Content")
    
    self.pointArea = {}
    for i = 1, 4 do
        local progress_img =  "PointArea/progress_img"..i
        local select_img =  "PointArea/progress_img"..i.."/select_img"..i
        self.pointArea[i] = {
            progress = self:AddComponent(UIImage,progress_img),
            select = self:AddComponent(UIImage,select_img),
        }
    end

    self.cellTab = {}
    for i = 1, 4 do
        local DesNameTip =  "ScrollView/View/Content/Cell"..i.."/DesNameTip"..i
        local DesName =  "ScrollView/View/Content/Cell"..i.."/DesName"..i
        self.cellTab[i] = {
            desNameTip = self:AddComponent(UIText,DesNameTip),
            desName = self:AddComponent(UIText,DesName),
        }
    end
    
    self:ReInit()
end

function UIActivityEdenWarTipsView:OnDestroy()
    self.content:SetAnchoredPosition(Vector2.New(0,0))
    self.content = nil
    self.close_btn = nil
    self.return_btn = nil
    self.scroll_view = nil
    self.pointArea = nil
    self._desNameTip_txt = nil
    self._desName_txt = nil
    base.OnDestroy(self)
end

function UIActivityEdenWarTipsView:ReInit()
    local OnUpdateScroll = BindCallback(self, self.OnUpdateScroll)
    self.scroll_view:Refresh(OnUpdateScroll)
    --self.cellTab[1].desNameTip:SetLocalText(372104)
    self.cellTab[1].desName:SetLocalText(372104)
    --self.cellTab[2].desNameTip:SetLocalText(372105)
    self.cellTab[2].desName:SetLocalText(372105)
    --self.cellTab[3].desNameTip:SetLocalText(372107)
    self.cellTab[3].desName:SetLocalText(372107)
    self.cellTab[4].desName:SetLocalText(110471)
end

function UIActivityEdenWarTipsView:OnUpdateScroll(index)
    local tempIndex = index + 1
    tempIndex = math.max(1, tempIndex)
    tempIndex = math.min(tempIndex, 4)
    self.pointArea[self.lastIndex].select:SetActive(false)
    self.pointArea[tempIndex].select:SetActive(true)
    self.lastIndex = tempIndex
end

function UIActivityEdenWarTipsView:OnEnable()
    base.OnEnable(self)
    --默认
    self.pointArea[1].select:SetActive(true)
    self.pointArea[2].select:SetActive(false)
    self.pointArea[3].select:SetActive(false)
    self.pointArea[4].select:SetActive(false)
    self.lastIndex = 1
end

function UIActivityEdenWarTipsView:OnDisable()
    base.OnDisable(self)
end


return UIActivityEdenWarTipsView