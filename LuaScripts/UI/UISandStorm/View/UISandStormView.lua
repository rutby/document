---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Beef.
--- DateTime: 2024/4/18 12:09
---

local UISandStorm = BaseClass("UISandStorm", UIBaseView)
local base = UIBaseView

local function OnCreate(self)
    base.OnCreate(self)
    self:ComponentDefine()
    self:DataDefine()
end

local function OnDestroy(self)
    self:ComponentDestroy()
    self:DataDestroy()
    base.OnDestroy(self)
end

local function OnEnable(self)
    base.OnEnable(self)
    if self.soundId ==nil then
        self.soundId = SoundUtil.PlayLoopEffect(SoundAssets.Music_Effect_Wind)
    end
end

local function OnDisable(self)
    if self.soundId~=nil then
        SoundUtil.StopSound(self.soundId)
        self.soundId = nil
    end
    base.OnDisable(self)
end

local function ComponentDefine(self)
    
end

local function ComponentDestroy(self)
    
end

local function DataDefine(self)
    
end

local function DataDestroy(self)
    
end

local function OnAddListener(self)
    base.OnAddListener(self)
    self:AddUIListener(EventId.OpenUI, self.RefreshSound)--打开UI
    self:AddUIListener(EventId.CloseUI, self.RefreshSound)
end

local function OnRemoveListener(self)
    base.OnRemoveListener(self)
    self:RemoveUIListener(EventId.OpenUI, self.RefreshSound)--打开UI
    self:RemoveUIListener(EventId.CloseUI, self.RefreshSound)
end


local function RefreshSound(self)
    if SceneUtils.GetIsInCity()  then
        if  UIManager:GetInstance():CheckIfIsMainUIOpenOnly(true, {UIWindowNames.UIGuideTalk})  then
            if self.soundId ==nil then
                self.soundId = SoundUtil.PlayLoopEffect(SoundAssets.Music_Effect_Wind)
            end
        else
            if self.soundId~=nil then
                SoundUtil.StopSound(self.soundId)
                self.soundId = nil
            end
        end
    end


end
UISandStorm.OnCreate = OnCreate
UISandStorm.OnDestroy = OnDestroy
UISandStorm.OnEnable = OnEnable
UISandStorm.OnDisable = OnDisable
UISandStorm.ComponentDefine = ComponentDefine
UISandStorm.ComponentDestroy = ComponentDestroy
UISandStorm.DataDefine = DataDefine
UISandStorm.DataDestroy = DataDestroy
UISandStorm.OnAddListener = OnAddListener
UISandStorm.OnRemoveListener = OnRemoveListener
UISandStorm.RefreshSound = RefreshSound
return UISandStorm