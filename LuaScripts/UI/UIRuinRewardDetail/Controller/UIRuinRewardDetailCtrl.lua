---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Imaginaerum.
--- DateTime: 2023/10/9 19:26
---
local UIRuinRewardDetailCtrl = BaseClass("UIRuinRewardDetailCtrl", UIBaseCtrl)
local Localization = CS.GameEntry.Localization
local function CloseSelf(self)
    UIManager.Instance:DestroyWindow(UIWindowNames.UIRuinRewardDetail)
end

local function GetRewardList(self,level,score)
    local list = {}
    local index = 0
    local data = DataCenter.WorldAllianceCityRecordManager:GetRewardByLevel(level)
    if data~=nil and data.scoreRewardList then
        local reward = table.values(data.scoreRewardList)
        table.sort(reward,function(a,b)
            return a.score<b.score
        end)
        for k,v in pairs(reward) do
            local oneData ={}
            oneData.index = k
            oneData.isFinish = false
            oneData.score = v.score
            if score>=oneData.score then
                oneData.isFinish = true
                if index<k then
                    index = k
                end
            end
            
            oneData.rewards = v.rewards
            table.insert(list,oneData)
        end
        table.sort(list,function(a,b)
            return a.index<b.index
        end)
    end
    local showData = {}
    showData.curIndex = index
    showData.dataList = list
    return showData
end
UIRuinRewardDetailCtrl.CloseSelf = CloseSelf
UIRuinRewardDetailCtrl.GetRewardList = GetRewardList
return UIRuinRewardDetailCtrl