---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by guqu.
--- DateTime: 2020/9/2 20:21
---
local RankTypeShow =
{
    pic ="",
    bg = "",
    type = RankType.None,
    title = "",
    firstName ="",
    secondName = ""
}
local OneData = DataClass("OneData", RankTypeShow)
local UIRankTableCtrl = BaseClass("UIRankTableCtrl", UIBaseCtrl)
local Localization = CS.GameEntry.Localization
local function InitPrewView(self)
	SFSNetwork.SendMessage(MsgDefines.GetRankPreviewMessage)
end

local function CloseSelf(self)
    UIManager:GetInstance():DestroyWindow(UIWindowNames.UIRankTable)
end

local function CloseAll(self)
    UIManager.Instance:DestroyWindow(UIWindowNames.UIRankTable)
    UIManager:GetInstance():DestroyWindow(UIWindowNames.UIPlayerInfo)
end

local function Close(self)
    UIManager:GetInstance():DestroyWindowByLayer(UILayer.Normal)
end

local function GetRankTypeList(self)
    local typeList =
    {
        RankType.CommanderPower,
        RankType.CommanderKill,
        RankType.AlliancePower,
        RankType.AllianceKill,
        RankType.CommanderBase,
        RankType.SeasonForce,
        RankType.HeroPluginRank,
    }
    local showList = {}
    table.walk(typeList,function (k,v)
        if v== RankType.AllianceKill then
            local data = OneData.New()
            data.type = v
            data.title =Localization:GetString("129093")--"390002")..Localization:GetString("390044")
            data.pic = "Assets/Main/Sprites/UI/UIRank/img_iconRankType5.png"
            data.bg = "Assets/Main/Sprites/UI/UIRank/img_iconRank_bg1.png"
            table.insert(showList,data)
        elseif v == RankType.AlliancePower then
            local data = OneData.New()
            data.type = v
            data.title =Localization:GetString("129094")--"390002")..Localization:GetString("390042")
            data.pic = "Assets/Main/Sprites/UI/UIRank/img_iconRankType4.png"
            data.bg = "Assets/Main/Sprites/UI/UIRank/img_iconRank_bg1.png"
            table.insert(showList,data)
        elseif v == RankType.CommanderKill then
            local data = OneData.New()
            data.type = v
            data.title =Localization:GetString("129095")--"100184")..Localization:GetString("390044")
            data.pic = "Assets/Main/Sprites/UI/UIRank/img_iconRankType2.png"
            data.bg = "Assets/Main/Sprites/UI/UIRank/img_iconRank_bg2.png"
            table.insert(showList,data)
        elseif v == RankType.CommanderPower then
            local data = OneData.New()
            data.type = v
            data.title =Localization:GetString("129096")--"100184")..Localization:GetString("390042")
            data.pic = "Assets/Main/Sprites/UI/UIRank/img_iconRankType1.png"
            data.bg = "Assets/Main/Sprites/UI/UIRank/img_iconRank_bg2.png"
            table.insert(showList,data)
        elseif v == RankType.CommanderBase then
            local data = OneData.New()
            data.type = v
            data.title =Localization:GetString("129097")--"100184")..Localization:GetString("390045")
            data.pic = "Assets/Main/Sprites/UI/UIRank/img_iconRankType3.png"
            data.bg = "Assets/Main/Sprites/UI/UIRank/img_iconRank_bg2.png"
            table.insert(showList,data)
        elseif v == RankType.SeasonForce then
            if DataCenter.SeasonDataManager:GetSeasonId()  == 2 then
                local data = OneData.New()
                data.type = v
                data.title =Localization:GetString("110455")--"100184")..Localization:GetString("390045")
                data.pic = "Assets/Main/Sprites/UI/UIRank/img_iconRankType3.png"
                data.bg = "Assets/Main/Sprites/UI/UIRank/img_iconRank_bg2.png"
                table.insert(showList,data)
            end
        elseif v == RankType.HeroPluginRank then
            if DataCenter.HeroPluginManager:IsOpen() then
                local data = OneData.New()
                data.type = v
                data.title =Localization:GetString(GameDialogDefine.HERO_PLUGIN_RANK)
                data.pic = "Assets/Main/Sprites/UI/UIRank/img_iconRankType6.png"
                data.bg = "Assets/Main/Sprites/UI/UIRank/img_iconRank_bg2.png"
                table.insert(showList,data)
            end
        end
    end)
    return showList
end

local function OnRankItemClick(self,type)
    UIManager:GetInstance():OpenWindow(UIWindowNames.UIRankDetailList,{ anim = true, hideTop = true, isBlur = true },type)
end

UIRankTableCtrl.CloseSelf = CloseSelf
UIRankTableCtrl.Close = Close
UIRankTableCtrl.CloseAll = CloseAll
UIRankTableCtrl.GetRankTypeList = GetRankTypeList
UIRankTableCtrl.OnRankItemClick = OnRankItemClick
UIRankTableCtrl.InitPrewView=InitPrewView
return UIRankTableCtrl