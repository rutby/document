---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Imaginaerum.
--- DateTime: 2022/1/6 14:33
---
local DesertCellItem = BaseClass("DesertCellItem", UIBaseContainer)
local base = UIBaseContainer
local Localization = CS.GameEntry.Localization
local recommend_path = "AddBtn/Recommend"
local item_icon_path = "AddBtn/icon"
local item_path = "AddBtn/Item"
local name_text_path = "AddBtn/Rect_Desc/Name_Txt"
local add_btn_path = "AddBtn"
local desc_text_path = "AddBtn/Rect_Desc/Desc_Txt"
local gift_rect_path = "AddBtn/Rect_Gift"
local go_btn_path = "Btn_Go"
local go_txt_path = "Btn_Go/Txt_Go"
local price_rect_path = "Btn_Go/Rect_Price"
local gift_btn_path = "Btn_Gift"
local buy_text_path = "AddBtn/Txt_BuyNum"
local consume_rect_path ="AddBtn/Rect_Consume"
local percent_rect_path = "AddBtn/PercentBg"
local discount_rect_path = "AddBtn/discount"
local giftEffect_rect_path = "AddBtn/Rect_GiftEffect"
-- 创建
local function OnCreate(self)
    base.OnCreate(self)
    self:ComponentDefine()
    self:DataDefine()
end

-- 销毁
local function OnDestroy(self)
    self:ComponentDestroy()
    self:DataDestroy()
    base.OnDestroy(self)
end

-- 显示
local function OnEnable(self)
    base.OnEnable(self)
end

-- 隐藏
local function OnDisable(self)
    base.OnDisable(self)
end


--控件的定义
local function ComponentDefine(self)
    self.recommend_rect = self:AddComponent(UIBaseContainer,recommend_path)
    self.item_icon = self:AddComponent(UIImage, item_icon_path)
    self.name_text = self:AddComponent(UIText, name_text_path)
    self._add_btn = self:AddComponent(UIButton, add_btn_path)
    self.gift_rect = self:AddComponent(UIBaseContainer,gift_rect_path)
    self._add_btn:SetOnClick(function()
        -- SoundUtil.PlayEffect(SoundAssets.Music_Effect_Button)
        -- self:OnBtnClick()
    end)
    self.giftEffect_rect = self:AddComponent(UIBaseContainer,giftEffect_rect_path)
    self.go_btn = self:AddComponent(UIButton,go_btn_path)
    self.go_btn:SetOnClick(function()
        SoundUtil.PlayEffect(SoundAssets.Music_Effect_Button)
        self:OnBtnClick()
    end)
    self.go_txt = self:AddComponent(UIText,go_txt_path)
    self.price_rect = self:AddComponent(UIBaseContainer,price_rect_path)
    self._buy_text = self:AddComponent(UIText,buy_text_path)
    self.desc_text = self:AddComponent(UIText,desc_text_path)
    self.item = self:AddComponent(UIBaseContainer,item_path)
    self.gift_btn = self:AddComponent(UIButton,gift_btn_path)

    self.consume_rect = self:AddComponent(UIBaseContainer,consume_rect_path)
    self.percent_rect = self:AddComponent(UIBaseContainer,percent_rect_path)
    self.discount_rect = self:AddComponent(UIBaseContainer,discount_rect_path)
end

--控件的销毁
local function ComponentDestroy(self)
    self.recommend_rect = nil
    self.item_icon = nil
    self.name_text = nil
    self._add_btn = nil
end

--变量的定义
local function DataDefine(self)
    self.param = {}
end

--变量的销毁
local function DataDestroy(self)
    self.param = nil
end

-- 全部刷新
local function ReInit(self,param)
    self.param = param
    self._add_btn:LoadSprite(string.format(LoadPath.CommonNewPath,"Common_bg_item2"))
    self:ShowRecommend(false)
    self.item_icon:SetActive(true)
    self.giftEffect_rect:SetActive(false)
    self.item_icon:LoadSprite(param:GetIcon())
    self.name_text:SetText(self.param:GetName())
    self.go_txt:SetActive(true)
    self.gift_rect:SetActive(false)
    self.gift_btn:SetActive(false)
    self.desc_text:SetActive(false)
    self.price_rect:SetActive(false)
    self.consume_rect:SetActive(false)
    self._buy_text:SetActive(false)
    self.percent_rect:SetActive(false)
    self.discount_rect:SetActive(false)
    self.item:SetActive(false)
    self.go_btn:SetActive(true)
    self.go_txt:SetText(self.param:GetBtnName())
    if param:GetTips() == ResLackGoToType.SeasonPass or param:GetTips() == ResLackGoToType.SeasonWeek then
        self._add_btn:LoadSprite(string.format(LoadPath.CommonNewPath,"Common_bg_item_pay"))
        self.giftEffect_rect:SetActive(true)
    end
end

local function ShowRecommend(self,isRecommend)
    self.recommend_rect:SetActive(isRecommend)
end

local function OnBtnClick(self)
    UIManager:GetInstance():DestroyWindow(UIWindowNames.UIDesertPercent)
    self.param:TodoAction(self.go_btn.transform.position)
end

DesertCellItem.OnCreate = OnCreate
DesertCellItem.OnDestroy = OnDestroy
DesertCellItem.OnBtnClick = OnBtnClick
DesertCellItem.OnEnable = OnEnable
DesertCellItem.OnDisable = OnDisable
DesertCellItem.ComponentDefine = ComponentDefine
DesertCellItem.ComponentDestroy = ComponentDestroy
DesertCellItem.DataDefine = DataDefine
DesertCellItem.DataDestroy = DataDestroy
DesertCellItem.ReInit = ReInit
DesertCellItem.ShowRecommend = ShowRecommend
return DesertCellItem