---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 1020.
--- DateTime: 2023/5/23 14:47
---

local ScratchOffRecordItem = BaseClass("ScratchOffRecordItem", UIBaseContainer)
local base = UIBaseContainer
local Localization = CS.GameEntry.Localization

local playerHeadBtn_path = "UIPlayerHead"
local playerHead_path = "UIPlayerHead/HeadIcon"
local playerNameTxt_path = "playerNameTxt"
local timeTxt_path = "timeTxt"
local lotteryTxt_path = "lotteryTxt"
local lotteryRankTxt_path = "lotteryRankTxt"
local icon1_path = "luckyIcons/icon1"
local icon2_path = "luckyIcons/icon2"
local icon3_path = "luckyIcons/icon3"

-- 创建
function ScratchOffRecordItem : OnCreate()
    base.OnCreate(self)
    self:DataDefine()
    self:ComponentDefine()
end

-- 销毁
function ScratchOffRecordItem : OnDestroy()
    self:ComponentDestroy()
    self:DataDestroy()
    base.OnDestroy(self)
end

function ScratchOffRecordItem : DataDefine()

end

function ScratchOffRecordItem : DataDestroy()

end

function ScratchOffRecordItem : ComponentDefine()
    self.playerHeadBtn = self:AddComponent(UIButton, playerHeadBtn_path)
    self.playerHeadBtn:SetOnClick(function()
        self:OnClickHead()
    end)
    self.playerHead = self:AddComponent(UIPlayerHead, playerHead_path)
    self.playerNameTxt = self:AddComponent(UIText, playerNameTxt_path)
    self.timeTxt = self:AddComponent(UIText, timeTxt_path)
    self.lotteryTxt = self:AddComponent(UIText, lotteryTxt_path)
    self.lotteryRankTxt = self:AddComponent(UIText, lotteryRankTxt_path)
    self.icon1 = self:AddComponent(UIImage, icon1_path)
    self.icon2 = self:AddComponent(UIImage, icon2_path)
    self.icon3 = self:AddComponent(UIImage, icon3_path)
end

function ScratchOffRecordItem : ComponentDestroy()
    
end

function ScratchOffRecordItem : SetData(itemInfo)
    if itemInfo == nil then
        return
    end

    self.uid = tostring(itemInfo.uid)
    self.playerHead:SetData(itemInfo.uid, itemInfo.pic, itemInfo.picVer)
    local name = itemInfo.playerName
    if self.uid ~= LuaEntry.Player.uid and itemInfo.serverId and itemInfo.serverId ~= 0 then
        name = Localization:GetString('372761',itemInfo.serverId,itemInfo.playerName)
    end
    self.playerNameTxt:SetText(name)
    local time = UITimeManager:GetInstance():TimeStampToTimeForServer(itemInfo.time)
    self.timeTxt:SetText(time)
    self.lotteryTxt:SetText(itemInfo.lottery)
    self.lotteryRankTxt:SetText(itemInfo.lotteryRank)
    self.icon1:LoadSprite(itemInfo.lotteryIcon)
    self.icon2:LoadSprite(itemInfo.lotteryIcon)
    self.icon3:LoadSprite(itemInfo.lotteryIcon)
end

function ScratchOffRecordItem : OnClickHead()
    if self.uid ~= LuaEntry.Player.uid then
        UIManager:GetInstance():OpenWindow(UIWindowNames.UIOtherPlayerInfo,self.uid)
    else
        UIManager:GetInstance():OpenWindow(UIWindowNames.UIPlayerInfo,LuaEntry.Player.uid)
    end
end

return ScratchOffRecordItem