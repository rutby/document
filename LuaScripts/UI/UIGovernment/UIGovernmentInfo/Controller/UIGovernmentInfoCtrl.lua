---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 1.
--- DateTime: 2023/3/23 14:57
---
local UIGovernmentInfoCtrl = BaseClass("UIGovernmentInfoCtrl", UIBaseCtrl)
local GovernmentConst = require("DataCenter.GovernmentManager.GovernmentConst")
local Localization = CS.GameEntry.Localization
local function CloseSelf(self)
    UIManager:GetInstance():DestroyWindow(UIWindowNames.UIGovernmentInfo)
end

local function GetPanelData(self, governmentId, playerInfo)
    local result = {}
    local template = DataCenter.GovernmentTemplateManager:GetTemplate(governmentId)
    if template then
        result.name = template.name
        result.icon = template.icon
        result.canAssign = false
        if playerInfo then
            result.playerInfo = DeepCopy(playerInfo)
            result.canAssign = playerInfo.canAssign       
        end
        local attrList = {}
        for k, v in pairs(template.effect) do
            local effectId = k
            local value = v
            local nameStr = GetTableData(TableName.EffectNumDesc, effectId, 'des')
            local name = Localization:GetString(nameStr)
            local type = toInt(GetTableData(TableName.EffectNumDesc, effectId, 'type'))
            local addValue = DecorationUtil.GetEffectNumWithType(value, type)
            local para = {}
            para.name = name
            para.value = addValue
            table.insert(attrList, para)
        end
        result.attrList = attrList
      
    end
    return result
end

UIGovernmentInfoCtrl.CloseSelf = CloseSelf
UIGovernmentInfoCtrl.GetPanelData = GetPanelData

return UIGovernmentInfoCtrl