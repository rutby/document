---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 24224.
--- DateTime: 2022/12/9 15:10
---
local AllianceFlagItem = require "UI.UIAlliance.UIAllianceFlag.Component.AllianceFlagItem"
local SeasonAllianceDetail = BaseClass("SeasonAllianceDetail", UIBaseContainer)
local base = UIBaseContainer
local Localization = CS.GameEntry.Localization

-- 创建
function SeasonAllianceDetail:OnCreate()
    base.OnCreate(self)
    self.flag = self:AddComponent(AllianceFlagItem,"AllianceFlag")
    self._name_txt = self:AddComponent(UIText,"name")
    self.rank_des = self:AddComponent(UIText,"rankDes")
    self.rank_des:SetText(Localization:GetString("110296"))
    self.rank_txt = self:AddComponent(UIText,"rankDes/rankTxt")
    self.occupy_des = self:AddComponent(UIText,"occupyDes")
    self.occupy_des:SetText(Localization:GetString("110297"))
    self.occupy_txt = self:AddComponent(UIText,"occupyDes/occupyTxt")
    self.city_des = self:AddComponent(UIText,"cityDes")
    self.city_des:SetText(Localization:GetString("110298"))
    self.city_txt = self:AddComponent(UIText,"cityDes/cityTxt")
    self.reward_des = self:AddComponent(UIText,"rewardDes")
    self.reward_des:SetText(Localization:GetString("110299"))
    self.reward_txt = self:AddComponent(UIText,"rewardDes/rewardTxt")
    self.reward_des:SetActive(false)
end

-- 销毁
function SeasonAllianceDetail:OnDestroy()
    base.OnDestroy(self)
end

-- 显示
function SeasonAllianceDetail:OnEnable()
    base.OnEnable(self)
    self:InitData()
end

-- 隐藏
function SeasonAllianceDetail:OnDisable()
    base.OnDisable(self)
end

function SeasonAllianceDetail:InitData()
    local allianceData = DataCenter.AllianceBaseDataManager:GetAllianceBaseData()
    if allianceData == nil then
        return
    end
    self.flag:SetData(allianceData.icon)
    self._name_txt:SetText("<" .. allianceData.abbr .. "> " .. allianceData.allianceName)
    local rank = allianceData.rank
    if rank>=5 then
        self.rank_txt:SetText(Localization:GetString("302336"))
    else
        self.rank_txt:SetText("R"..rank)
    end
    local occupyNum = DataCenter.WorldAllianceCityDataManager:GetMyAllianceCityLevelNum(6)
    local occupy7Num = DataCenter.WorldAllianceCityDataManager:GetMyAllianceCityLevelNum(7)
    if occupyNum<=0 then
        self.occupy_txt:SetText(Localization:GetString("100206"))
    else
        self.occupy_txt:SetText(occupyNum)
    end
    if occupy7Num<=0 then
        self.city_txt:SetText(Localization:GetString("100289"))
    else
        self.city_txt:SetText(Localization:GetString("100288"))
    end
end

function SeasonAllianceDetail:SetMemberOrder(order)
    self.reward_des:SetActive(true)
    if order == 2 then
        self.reward_txt:SetText(Localization:GetString("110301"))
    elseif order == 3 then
        self.reward_txt:SetText(Localization:GetString("110302"))
    elseif order == 4 then
        self.reward_txt:SetText(Localization:GetString("110303"))
    else
        self.reward_txt:SetText(Localization:GetString("100206"))
    end
end

return SeasonAllianceDetail