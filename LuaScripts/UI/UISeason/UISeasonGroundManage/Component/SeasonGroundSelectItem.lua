---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 24224.
--- DateTime: 2022/12/5 18:02
---
local SeasonGroundSelectItem = BaseClass("SeasonGroundSelectItem", UIBaseContainer)
local base = UIBaseContainer
local Localization = CS.GameEntry.Localization

-- 创建
function SeasonGroundSelectItem:OnCreate()
    base.OnCreate(self)

    self.bg = self:AddComponent(UIImage,"Image")
    self.select = self:AddComponent(UIImage,"select")
    self.icon = self:AddComponent(UIImage,"Icon")
    self.name = self:AddComponent(UIText,"name")
    self._level_txt = self:AddComponent(UIText,"Text_lv")
    self.btn = self:AddComponent(UIButton,"Button")
    self.btn:SetOnClick(function()
        SoundUtil.PlayEffect(SoundAssets.Music_Effect_Button)
        self:OnSelectClick()
    end)
end

-- 销毁
function SeasonGroundSelectItem:OnDestroy()
    base.OnDestroy(self)
end

-- 显示
function SeasonGroundSelectItem:OnEnable()
    base.OnEnable(self)
end

-- 隐藏
function SeasonGroundSelectItem:OnDisable()
    base.OnDisable(self)
end

function SeasonGroundSelectItem:OnSelectClick()
    local cur = self.view.ctrl:GetIsSelect(self.level)
    self.view.ctrl:SetOneSelect(self.level,cur == false)
    self:OnRefreshSelect()
    self.view:OnSelectRefresh()
end

function SeasonGroundSelectItem:SetItemShow(level)
    self.level = level
    if self.level>= BuildingTypes.FUN_BUILD_MAIN then
        self._level_txt:SetText(Localization:GetString(GetTableData(DataCenter.BuildTemplateManager:GetTableName(), self.level,"name")))
        self.icon:LoadSprite(DataCenter.BuildManager:GetBuildIconPath(self.level, 1))
    else
        self.icon:LoadSprite("Assets/Main/Sprites/SeasonDesert/massif_7.png")
        self._level_txt:SetText("Lv."..self.level)
    end
    self:OnRefreshSelect()
end

function SeasonGroundSelectItem:OnRefreshSelect()
    self.select:SetActive(self.view.ctrl:GetIsSelect(self.level))
end

return SeasonGroundSelectItem