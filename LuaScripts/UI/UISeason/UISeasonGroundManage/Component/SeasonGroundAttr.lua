---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 24224.
--- DateTime: 2022/12/5 18:03
---
local SeasonGroundAttrItem = require "UI.UISeason.UISeasonGroundManage.Component.SeasonGroundAttrItem"
local SeasonGroundAttr = BaseClass("SeasonGroundAttr", UIBaseContainer)
local base = UIBaseContainer
local Localization = CS.GameEntry.Localization

-- 创建
function SeasonGroundAttr:OnCreate()
    base.OnCreate(self)
    self._title_txt = self:AddComponent(UIText,"titleDes")
    self._title_txt:SetText(Localization:GetString("110276"))
    self.itemCellList = {}
    local desertForce = self:AddComponent(SeasonGroundAttrItem,"layoutRank/layout1")
    self.itemCellList[PlayerDesertAttr.Force] = desertForce
    local desertForceRank = self:AddComponent(SeasonGroundAttrItem,"layoutRank/layout2")
    self.itemCellList[PlayerDesertAttr.ForceRank] = desertForceRank
    local desertSelfServer = self:AddComponent(SeasonGroundAttrItem,"layoutDesert/layoutSelf")
    self.itemCellList[PlayerDesertAttr.SelfCount] = desertSelfServer
    local desertOtherServer = self:AddComponent(SeasonGroundAttrItem,"layoutDesert/layoutOther")
    self.itemCellList[PlayerDesertAttr.OtherCount] = desertOtherServer
    local desertBuff = self:AddComponent(SeasonGroundAttrItem,"layoutDesert/layoutRestraint")
    self.itemCellList[PlayerDesertAttr.Buff] = desertBuff
    local seasonId = DataCenter.SeasonDataManager:GetSeasonId()
    if seasonId == 5 then
        desertOtherServer:SetActive(false)
    else
        desertOtherServer:SetActive(true)
    end
    self:InitData()
end

-- 销毁
function SeasonGroundAttr:OnDestroy()
    base.OnDestroy(self)
end

-- 显示
function SeasonGroundAttr:OnEnable()
    base.OnEnable(self)
end

-- 隐藏
function SeasonGroundAttr:OnDisable()
    base.OnDisable(self)
end

function SeasonGroundAttr:InitData()
    for k,v in pairs(self.itemCellList) do
        v:InitData(k)
    end
end

function SeasonGroundAttr:OnRefreshData()
    for k,v in pairs(self.itemCellList) do
        v:RefreshNum()
    end
end
--function SeasonGroundAttr:OnCollectClick()
--    SFSNetwork.SendMessage(MsgDefines.UserCollectDesertRes)
--end

function SeasonGroundAttr:OnRefreshDesertRank()
    for k,v in pairs(self.itemCellList) do
        if v.showType == PlayerDesertAttr.ForceRank then
            v:RefreshNum()
        end
    end
end

return SeasonGroundAttr