---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 24224.
--- DateTime: 2022/12/5 18:02
---
local UIHeroTipView = require "UI.UIHero2.UIHeroTip.View.UIHeroTipView"
local SeasonGroundAttrItem = BaseClass("SeasonGroundAttrItem", UIBaseContainer)
local base = UIBaseContainer
local Localization = CS.GameEntry.Localization

-- 创建
function SeasonGroundAttrItem:OnCreate()
    base.OnCreate(self)
    self._des_txt = self:AddComponent(UIText,"Text_des")
    self._value_txt = self:AddComponent(UIText,"layout/Text_value")
    self.btn = self:AddComponent(UIButton,"btn")
    self.btn:SetOnClick(function()
        self:OnDesClick()
    end)
end

-- 销毁
function SeasonGroundAttrItem:OnDestroy()
    base.OnDestroy(self)
end

-- 显示
function SeasonGroundAttrItem:OnEnable()
    base.OnEnable(self)
end

-- 隐藏
function SeasonGroundAttrItem:OnDisable()
    base.OnDisable(self)
end
function SeasonGroundAttrItem:InitData(showType)
    self.showType = showType
    if self.showType == PlayerDesertAttr.SelfCount then
        self._des_txt:SetText(Localization:GetString("110543"))
    elseif self.showType == PlayerDesertAttr.OtherCount then
        self._des_txt:SetText(Localization:GetString("110562"))
    elseif self.showType == PlayerDesertAttr.Buff then
        self._des_txt:SetText(Localization:GetString("110278"))
    elseif self.showType == PlayerDesertAttr.ResSpeedGas then
        self._des_txt:SetText(Localization:GetString("110355"))
    elseif self.showType == PlayerDesertAttr.ResSpeedFlint then
        self._des_txt:SetText(Localization:GetString("110354"))
    elseif self.showType == PlayerDesertAttr.Force then
        self._des_txt:SetText(Localization:GetString("110453"))
    elseif self.showType == PlayerDesertAttr.ForceRank then
        self._des_txt:SetText(Localization:GetString("110480"))
    end 
    self:RefreshNum()
end

function SeasonGroundAttrItem:RefreshNum()
    local value = self.view.ctrl:GetAttrNumByType(self.showType)
    self._value_txt:SetText(value)
end

function SeasonGroundAttrItem:OnDesClick()
    local des = ""
    if self.showType == PlayerDesertAttr.SelfCount then
        des = Localization:GetString("110438")
    elseif self.showType == PlayerDesertAttr.Buff then
        des = Localization:GetString("110439")
    --elseif self.showType == PlayerDesertAttr.Force then
    --    UIManager:GetInstance():OpenWindow(UIWindowNames.UIDesertForceList)
    --    return
    --elseif self.showType == PlayerDesertAttr.ForceRank then
    --    UIManager:GetInstance():OpenWindow(UIWindowNames.UIRankDetailList,RankType.SeasonForce)
    --    return
    else
        return
    end
    local scaleFactor = UIManager:GetInstance():GetScaleFactor()
    local position = self.btn.gameObject.transform.position + Vector3.New(150, 0, 0) * scaleFactor
    local param = UIHeroTipView.Param.New()
    param.content = des
    param.dir = UIHeroTipView.Direction.RIGHT
    param.defWidth = 300
    param.pivot = 0.5
    param.position = position
    UIManager:GetInstance():OpenWindow(UIWindowNames.UIHeroTip, { anim = false }, param)
end

return SeasonGroundAttrItem