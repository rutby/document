---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 1.
--- DateTime: 2022/9/13 18:04
---RewardPreviewCell

local RewardPreviewCell = BaseClass("RewardPreviewCell", UIBaseContainer)
local base = UIBaseContainer
local Localization = CS.GameEntry.Localization
local UICommonItem = require "UI.UICommonItem.UICommonItem"

local commonItem_path = "IconNode/UICommonItem"
local itemName_path = "TxtName"
local itemCount_path = "TxtNum"

-- 创建
local function OnCreate(self)
    base.OnCreate(self)
    self:ComponentDefine()
    self:DataDefine()
end

-- 销毁
local function OnDestroy(self)
    self:ComponentDestroy()
    self:DataDestroy()
    base.OnDestroy(self)
end

--控件的定义
local function ComponentDefine(self)
    self.commonItemN = self:AddComponent(UICommonItem, commonItem_path)
    self.itemNameN = self:AddComponent(UIText, itemName_path)
    self.itemCountN = self:AddComponent(UIText, itemCount_path)
end

--控件的销毁
local function ComponentDestroy(self)
    self.commonItemN = nil
    self.itemNameN = nil
    self.itemCountN = nil
end

--变量的定义
local function DataDefine(self)
    self.rewardParam = nil
end

--变量的销毁
local function DataDestroy(self)
    self.rewardParam = nil
end

local function SetItem(self, rewardParam)
    self.rewardParam = rewardParam

    self:RefreshAll()
end

local function RefreshAll(self)
    if not self.rewardParam then
        return
    end
    
    local param = {}
    param.rewardType = self.rewardParam.type
    local tempCount = 0
    if self.rewardParam.value then
        if type(self.rewardParam.value) == "table" then
            local dic = self.rewardParam.value
            param.itemId = dic.id
            tempCount = dic.num or 0
        else
            tempCount = self.rewardParam.value
        end
    else
        tempCount = 0
    end
    
    self.commonItemN:ReInit(param)
    self.itemNameN:SetText(self.commonItemN:GetResName())
    self.itemCountN:SetText(tempCount)
end


RewardPreviewCell.OnCreate = OnCreate
RewardPreviewCell.OnDestroy = OnDestroy
RewardPreviewCell.ComponentDefine = ComponentDefine
RewardPreviewCell.ComponentDestroy = ComponentDestroy
RewardPreviewCell.DataDefine = DataDefine
RewardPreviewCell.DataDestroy = DataDestroy

RewardPreviewCell.SetItem = SetItem
RewardPreviewCell.RefreshAll = RefreshAll
RewardPreviewCell.AddTimer = AddTimer
RewardPreviewCell.SetRemainTime = SetRemainTime
RewardPreviewCell.DelTimer = DelTimer
RewardPreviewCell.OnClickJumpBtn = OnClickJumpBtn

return RewardPreviewCell