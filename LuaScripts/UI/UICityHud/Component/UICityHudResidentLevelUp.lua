---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Beef.
--- DateTime: 2024/3/19 10:46
---

local base = require "UI.UICityHud.Component.UICityHudBase"
local UICityHudResidentLevelUp = BaseClass("UICityHudResidentLevelUp", base)

local btn_path = "Root/Btn"

local function ComponentDefine(self)
    base.ComponentDefine(self)
    self.btn = self:AddComponent(UIButton, btn_path)
    self.btn:SetOnClick(function()
        self:OnClick()
    end)
end

local function DataDefine(self)
    base.DataDefine(self)
    self.clicked = false
end

local function OnAddListener(self)
    base.OnAddListener(self)
end

local function OnRemoveListener(self)
    base.OnRemoveListener(self)
end

local function SetParam(self, param)
    base.SetParam(self, param)
    self.root_go.transform.localPosition = param.offset or Vector3.zero
    self.clicked = false
end

local function OnClick(self)
    local data = DataCenter.CityResidentManager:GetData(self.param.uuid)
    if data and data:HasObj() then
        DataCenter.CityResidentManager.detailZoom = CS.SceneManager.World.Zoom
        CS.SceneManager.World:AutoLookat(data:GetPos(), CityResidentZoom.Resident, 0.2, function()
            --UIManager:GetInstance():OpenWindow(UIWindowNames.UIVitaResidentLevelUp, NormalPanelAnim, self.param.uuid)
            UIManager:GetInstance():OpenWindow(UIWindowNames.UIVitaResidentDetail, NormalPanelAnim, self.param.uuid, false)
        end)
    end
end

UICityHudResidentLevelUp.ComponentDefine = ComponentDefine
UICityHudResidentLevelUp.DataDefine = DataDefine
UICityHudResidentLevelUp.OnAddListener = OnAddListener
UICityHudResidentLevelUp.OnRemoveListener = OnRemoveListener
UICityHudResidentLevelUp.SetParam = SetParam
UICityHudResidentLevelUp.OnClick = OnClick

return UICityHudResidentLevelUp