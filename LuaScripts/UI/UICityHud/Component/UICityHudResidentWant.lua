---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Beef.
--- DateTime: 2024/4/25 17:47
---

local base = require "UI.UICityHud.Component.UICityHudBase"
local UICityHudResidentWant = BaseClass("UICityHudResidentWant", base)

local icon_path = "Root/Icon"

local function ComponentDefine(self)
    base.ComponentDefine(self)
    self.icon_image = self:AddComponent(UIImage, icon_path)
end

local function DataDefine(self)
    base.DataDefine(self)
    self.lodMax = 3
end

local function DataDestroy(self)
    if self.param and self.param.onClose then
        self.param.onClose()
    end
    if self.timer then
        self.timer:Stop()
        self.timer = nil
    end
    base.DataDestroy(self)
end

local function SetParam(self, param)
    base.SetParam(self, param)
    self.icon_image:LoadSprite(param.icon)
    local offset = param.offset or Vector3.zero
    self.root_go.transform.localPosition = offset
    if self.timer then
        self.timer:Stop()
    end
    self.timer = TimerManager:GetInstance():DelayInvoke(function()
        if self.active then
            DataCenter.CityHudManager:Destroy(param.uuid, CityHudType.ResidentWant)
        end
    end, param.duration)
end

UICityHudResidentWant.ComponentDefine = ComponentDefine
UICityHudResidentWant.DataDefine = DataDefine
UICityHudResidentWant.DataDestroy = DataDestroy
UICityHudResidentWant.SetParam = SetParam

return UICityHudResidentWant