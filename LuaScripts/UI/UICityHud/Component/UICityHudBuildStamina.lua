---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Beef.
--- DateTime: 2024/4/15 17:31
---

local base = require "UI.UICityHud.Component.UICityHudBase"
local UICityHudBuildStamina = BaseClass("UICityHudBuildStamina", base)

local slider_path = "Root/Slider"
local icon_path = "Root/Icon"
local hp_path = "Root/Hp"

local function ComponentDefine(self)
    base.ComponentDefine(self)
    self.slider = self:AddComponent(UISlider, slider_path)
    self.icon_image = self:AddComponent(UIImage, icon_path)
    self.hp_text = self:AddComponent(UITextMeshProUGUIEx, hp_path)
end

local function DataDefine(self)
    base.DataDefine(self)
end

local function SetParam(self, param)
    base.SetParam(self, param)
    local buildData = DataCenter.BuildManager:GetBuildingDataByUuid(param.uuid)
    local curHp = buildData:GetCurStamina()
    local maxHp = buildData:GetMaxStamina()
    self.slider:SetValue(curHp / maxHp)
    if curHp > 0 then
        self.icon_image:LoadSprite(string.format(LoadPath.UIBuildBubble, "icon_dunr2"))
    else
        self.icon_image:LoadSprite(string.format(LoadPath.UIBuildBubble, "icon_dunr1"))
    end
    self.hp_text:SetText(string.GetFormattedSeperatorNum(curHp))
end

UICityHudBuildStamina.ComponentDefine = ComponentDefine
UICityHudBuildStamina.DataDefine = DataDefine
UICityHudBuildStamina.SetParam = SetParam

return UICityHudBuildStamina