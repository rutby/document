---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by guqu.
--- DateTime: 2020/9/2 20:24
---
local UIJeepAdventureMainStageItem = BaseClass("UIJeepAdventureMainStageItem",UIBaseContainer)
local base = UIBaseContainer

local rootImg_path = ""
local stageNum_path = "stageNum"
local arrowImg_path = "arrowImg"

function UIJeepAdventureMainStageItem:OnCreate()
    base.OnCreate(self)

    self.rootImg = self:AddComponent(UIImage, rootImg_path)
    self.arrowImg = self:AddComponent(UIImage, arrowImg_path)
    self.stageNum = self:AddComponent(UITextMeshProUGUIEx, stageNum_path)

end

function UIJeepAdventureMainStageItem:OnDestroy()
    self.rootImg = nil
    self.arrowImg = nil
    self.stageNum = nil

    base.OnDestroy(self)
end

function UIJeepAdventureMainStageItem:SetData(posData, showData)
    self.rootImg:SetAnchoredPositionXY(posData.itemPos.x, posData.itemPos.y)
    self.arrowImg:SetAnchoredPositionXY(posData.arrowPos.x, posData.arrowPos.y)
    self.arrowImg:SetActive(not showData.isEndIndex)

    if showData.isLegal then
        self.rootImg:SetActive(true)
        self.stageNum:SetText(showData.stageId)
        self.stageNum:SetActive(true)
        self.stageNum:SetFontSize(showData.isTarget and 30 or 26)
        -- self.stageNum:SetAnchoredPositionXY(0, posData.txtH)

        if showData.isPass then
            self.arrowImg:LoadSprite(self:GetImgPath("onhook_icon_01"))
            self.rootImg:LoadSprite(self:GetImgPath("onhook_bg_choose02"), nil, function()
                if self.rootImg then
                    self.rootImg:SetNativeSize()
                end
            end)
        elseif showData.isTarget then
            self.arrowImg:LoadSprite(self:GetImgPath("onhook_icon_02"))
            self.rootImg:LoadSprite(self:GetImgPath("onhook_bg_choose01"), nil, function()
                if self.rootImg then
                    self.rootImg:SetNativeSize()
                end
            end)
        else
            self.arrowImg:LoadSprite(self:GetImgPath("onhook_icon_02"))
            self.rootImg:LoadSprite(self:GetImgPath("onhook_bg_choose03"), nil, function()
                if self.rootImg then
                    self.rootImg:SetNativeSize()
                end
            end)
        end
    else
        self.rootImg:SetActive(false)
    end
end

function UIJeepAdventureMainStageItem:GetImgPath(imgName)
    local imgPath = string.format(LoadPath.UIPve, imgName)
    return imgPath
end

return UIJeepAdventureMainStageItem
