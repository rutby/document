---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Imaginaerum.
--- DateTime: 2023/3/9 19:13
---
local DetectEventTab = BaseClass("DetectEventTab", UIBaseContainer)
local base = UIBaseContainer

local select_path = "Selected"
local select_icon_path = "Selected/SelectedImgTabIcon"
local select_name_path = "Selected/SelectedTextTab"

local normal_path = "Normal"
local normal_icon_path = "Normal/NormalImgTabIcon"
local normal_name_path = "Normal/NormalTextTab"

local red_dot_path = "RedDot"
local btn_path = ""
--创建
local function OnCreate(self)
    base.OnCreate(self)
    self:ComponentDefine()
    self:DataDefine()
end

-- 销毁
local function OnDestroy(self)
    self:ComponentDestroy()
    self:DataDestroy()
    base.OnDestroy(self)
end

local function ComponentDefine(self)
    self.select = self:AddComponent(UIBaseContainer, select_path)
    self.select_icon = self:AddComponent(UIImage, select_icon_path)
    self.select_name = self:AddComponent(UITextMeshProUGUIEx, select_name_path)

    self.normal = self:AddComponent(UIBaseContainer, normal_path)
    self.normal_icon = self:AddComponent(UIImage, normal_icon_path)
    self.normal_name = self:AddComponent(UITextMeshProUGUIEx, normal_name_path)
    self.red_dot = self:AddComponent(UIBaseContainer,red_dot_path)
    self.btn = self:AddComponent(UIButton, btn_path)
    self.btn:SetOnClick(function()
        SoundUtil.PlayEffect(SoundAssets.Music_Effect_Button)
        self:ClickBtn()
    end)
end

local function ComponentDestroy(self)

end

local function DataDefine(self)

end

local function DataDestroy(self)

end

local function OnEnable(self)
    base.OnEnable(self)
end

local function OnDisable(self)
    base.OnDisable(self)
end

local function ReInit(self, index, currentSelect)
    self.index = index
    self.currentSelect = currentSelect
    self:RefreshView()
    if self.index == 1 then
        self.select_name:SetLocalText(100598)
        self.normal_name:SetLocalText(100598)
        self.red_dot:SetActive(false)
    else
        self.select_name:SetLocalText(302146)
        self.normal_name:SetLocalText(302146)
    end
    self:UpdateNewsRedDot()
end

local function RefreshView(self,currentSelect)
    self.currentSelect = currentSelect
    self.normal:SetActive(self.index ~= self.currentSelect)
    self.select:SetActive(self.index == self.currentSelect)
end

local function UpdateNewsRedDot(self)
    if self.index == 2 then
        self.red_dot:SetActive(DataCenter.WorldNewsDataManager:GetRedDotCount()>0)
    end
end
local function ClickBtn(self)
    self.view:SetCurrentType(self.index)
end

DetectEventTab.OnCreate = OnCreate
DetectEventTab.OnDestroy = OnDestroy
DetectEventTab.OnEnable = OnEnable
DetectEventTab.OnDisable = OnDisable
DetectEventTab.ComponentDefine = ComponentDefine
DetectEventTab.ComponentDestroy = ComponentDestroy
DetectEventTab.DataDefine = DataDefine
DetectEventTab.DataDestroy = DataDestroy
DetectEventTab.ReInit = ReInit
DetectEventTab.RefreshView = RefreshView
DetectEventTab.ClickBtn = ClickBtn
DetectEventTab.UpdateNewsRedDot =UpdateNewsRedDot
return DetectEventTab