---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 1.
--- DateTime: 2022/9/26 19:11
---

local NormalEventInfo = BaseClass("NormalEventInfo", UIBaseContainer)
local base = UIBaseContainer

local normal_event_next_recovery_time_title_path = "BG/Normal_Event_Next_Recovery_Time_Title"
local normal_event_next_recovery_time_text_path = "BG/ActTime/Normal_Event_Next_Recovery_Time_Text"
local normal_event_title_path = "BG/Normal_Event_Title"

local function OnCreate(self)
    base.OnCreate(self)

    self:DataDefine()
    self:ComponentDefine()
end

local function ComponentDefine(self)
    self.normal_event_next_recovery_time_title = self:AddComponent(UITextMeshProUGUIEx, normal_event_next_recovery_time_title_path)
    self.normal_event_next_recovery_time_text = self:AddComponent(UITextMeshProUGUIEx, normal_event_next_recovery_time_text_path)
    self.normal_event_title = self:AddComponent(UITextMeshProUGUIEx, normal_event_title_path)
    self.normal_event_title:SetLocalText(140085)
end

local function DataDefine(self)

end

local function OnDestroy(self)
    self:ComponentDestroy()
    self:DataDestroy()

    base.OnDestroy(self)
end

local function ComponentDestroy(self)

end

local function DataDestroy(self)

end

local function SetData(self, data)
    self.data = data
    self:RefreshView()
end

local function RefreshView(self)
    if self.data == nil then
        return
    end
    self.normal_event_next_recovery_time_title:SetLocalText(140086)
    self:RefreshTime()
end

local function RefreshTime(self)
    if self.data == nil then
        return
    end
    local now = UITimeManager:GetInstance():GetServerTime()
    local currentLeftTime = (self.data.currentEndTime - now) / 1000
    currentLeftTime = math.max(0, currentLeftTime)

    self.normal_event_next_recovery_time_text:SetText(UITimeManager:GetInstance():SecondToFmtString(currentLeftTime))
end

NormalEventInfo.RefreshTime = RefreshTime
NormalEventInfo.SetData = SetData
NormalEventInfo.RefreshView = RefreshView
NormalEventInfo.OnCreate = OnCreate
NormalEventInfo.OnDestroy = OnDestroy
NormalEventInfo.ComponentDefine = ComponentDefine
NormalEventInfo.ComponentDestroy = ComponentDestroy
NormalEventInfo.DataDefine = DataDefine
NormalEventInfo.DataDestroy = DataDestroy

return NormalEventInfo