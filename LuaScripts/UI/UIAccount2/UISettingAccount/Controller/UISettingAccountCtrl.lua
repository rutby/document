---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by zhangliheng.
--- DateTime: 8/12/21 9:47 PM
---

local UISettingAccountCtrl = BaseClass("UISettingAccountCtrl", UIBaseCtrl)
local Localization = CS.GameEntry.Localization
local Setting = CS.GameEntry.Setting

local function CloseSelf(self)
    UIManager:GetInstance():DestroyWindow(UIWindowNames.UISettingAccount)
end

local function CloseAll(self)
    UIManager.Instance:DestroyWindow(UIWindowNames.UISettingAccount)
    UIManager:GetInstance():DestroyWindow(UIWindowNames.UIPlayerInfo)
end

local function GetAccountBindStateName(self)
    local account = Setting:GetString(SettingKeys.GAME_ACCOUNT, "")
    if account ~= nil and account ~= "" then
        --账号验证状态
        local status = Setting:GetPrivateInt(SettingKeys.ACCOUNT_STATUS, 0)
        if status == AccountBandState.UnBand then
            return Localization:GetString("280033") --未绑定
        elseif status == AccountBandState.UnCheck then
            return Localization:GetString("280125") --已绑定未验证
        else
            return Localization:GetString("280057") --已绑定且验证
        end
    else
        local _gpUid = Setting:GetPrivateString(SettingKeys.GP_USERID, "")
        if _gpUid ~= "" then
            return Localization:GetString("280057")
        end

        local _fbUid = Setting:GetPrivateString(SettingKeys.FB_USERID, "")
        if _fbUid ~= "" then
            return Localization:GetString("280057")
        end

        local _wxAppId = Setting:GetPrivateString(SettingKeys.WX_APPID_CACHE, "")
        if _wxAppId ~= "" then
            return Localization:GetString("280057")
        end
    end

    return Localization:GetString("280033")
end

local function GetAccountBindState(self)
    local account = Setting:GetString(SettingKeys.GAME_ACCOUNT, "")
    if account ~= nil and account ~= "" then
        --账号验证状态
        local status = Setting:GetPrivateInt(SettingKeys.ACCOUNT_STATUS, 0)
        return status
        --if status == AccountCheckState.Check then
        --    --已验证、即已绑定
        --    return AccountBandState.Band
        --else
        --    --未验证
        --    return AccountBandState.UnCheck
        --end
    else
        return AccountBandState.UnBand
    end
end


UISettingAccountCtrl.CloseSelf = CloseSelf
UISettingAccountCtrl.CloseAll = CloseAll
UISettingAccountCtrl.GetAccountBindStateName = GetAccountBindStateName
UISettingAccountCtrl.GetAccountBindState = GetAccountBindState

return UISettingAccountCtrl