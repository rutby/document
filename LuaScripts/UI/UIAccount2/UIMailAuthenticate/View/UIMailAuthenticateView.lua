---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Imaginaerum.
--- DateTime: 2023/5/16 16:48
---
local UIMailAuthenticateView = BaseClass("UIMailAuthenticateView",UIBaseView)
local base = UIBaseView
local Localization = CS.GameEntry.Localization

local function OnCreate(self)
    base.OnCreate(self)
    self.mailStr = self:GetUserData()
    self:ComponentDefine()
    --self:OnOpen()
end

local function OnDestroy(self)
    self:ComponentDestroy()
    base.OnDestroy(self)
end

local function ComponentDefine(self)
    self.textTitle = self:AddComponent(UITextMeshProUGUIEx, 'UICommonMiniPopUpTitle/Bg_mid/titleText')
    self.des = self:AddComponent(UITextMeshProUGUIEx, 'Root/destext')

    self.textBtnLogin = self:AddComponent(UITextMeshProUGUIEx, 'Root/BtnGo/LeftBtn/LeftBtnName')

    self.btnClose = self:AddComponent(UIButton, 'UICommonMiniPopUpTitle/Bg_mid/CloseBtn')
    self.btnLogin = self:AddComponent(UIButton, 'Root/BtnGo/LeftBtn')

    self.btnClose:SetOnClick(BindCallback(self.ctrl, self.ctrl.Close))
    self.btnLogin:SetOnClick(BindCallback(self, self.OnBtnLoginClick))

    self.textBtnStart = self:AddComponent(UITextMeshProUGUIEx, 'Root/BtnGo/RightBtn/RightBtnName')
    self.btnStart = self:AddComponent(UIButton, 'Root/BtnGo/RightBtn')
    self.btnStart:SetOnClick(BindCallback(self, self.OnBtnStartClick))
    
    self.textTitle:SetLocalText(208266)
    self.des:SetLocalText(208267)
    self.textBtnLogin:SetLocalText(110003)
    self.textBtnStart:SetLocalText(280045)
end

local function ComponentDestroy(self)
end

local function OnBtnLoginClick(self)
    SFSNetwork.SendMessage(MsgDefines.AccountVerifyDevice,self.mailStr,0)
    UIManager:GetInstance():OpenWindow(UIWindowNames.UIMailVerify,self.mailStr,0)
end

local function OnBtnStartClick(self)
    UIUtil.ShowMessage(Localization:GetString("280096"), 1, GameDialogDefine.CONFIRM, GameDialogDefine.CANCEL, function()
        LuaEntry.DataConfig:ClearMd5()
        CS.UnityEngine.PlayerPrefs.DeleteAll()
        CS.ApplicationLaunch.Instance:ReStartGame()
    end)
end

UIMailAuthenticateView.OnCreate= OnCreate
UIMailAuthenticateView.OnDestroy = OnDestroy
UIMailAuthenticateView.ComponentDefine = ComponentDefine
UIMailAuthenticateView.ComponentDestroy = ComponentDestroy
UIMailAuthenticateView.OnBtnStartClick =OnBtnStartClick
UIMailAuthenticateView.OnBtnLoginClick = OnBtnLoginClick
return UIMailAuthenticateView