---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by guqu.
--- DateTime: 2020/10/30 17:11
---
local UIBookMarkCtrl = BaseClass("UIBookMarkCtrl", UIBaseCtrl)
local function CloseSelf(self)
    UIManager:GetInstance():DestroyWindow(UIWindowNames.UIBookMark,{anim = true,UIMainAnim = UIMainAnimType.LeftRightBottomShow})
end

local function Close(self)
    UIManager:GetInstance():DestroyWindowByLayer(UILayer.Normal)
end

local function GetMarkListByTab(self,tab)
    local showList ={}
    if tab==-1 then
        local dataList = DataCenter.WorldFavoDataManager:GetAllBookList()
        if dataList~=nil then
            table.walksort(dataList,function (leftKey,rightKey)
                return dataList[leftKey].createTime < dataList[rightKey].createTime
            end,function(k,v)
                table.insert(showList,v)
            end)
        end
        
    else
        local dataList = DataCenter.WorldFavoDataManager:GetBookListByType(tab)
        if dataList~=nil then
            table.walksort(dataList,function (leftKey,rightKey)
                return dataList[leftKey].createTime < dataList[rightKey].createTime
            end,function(k,v)
                table.insert(showList,v)
            end)
        end
    end
    return showList
end

local function DelBookMark(self,point,server)
    local data = DataCenter.WorldFavoDataManager:GetBookmark(point,server)
    if data~=nil then
        SFSNetwork.SendMessage(MsgDefines.WorldFavoDel,point,data.type,server)
    end
end

local function OnClickPosBtn(self,point,server)
    local pos = SceneUtils.IndexToTilePos(point)
    CS.GotoUtils.GotoWorldToPointId(pos,server)
    self:CloseSelf()
end

UIBookMarkCtrl.CloseSelf =CloseSelf
UIBookMarkCtrl.Close =Close
UIBookMarkCtrl.GetMarkListByTab = GetMarkListByTab
UIBookMarkCtrl.DelBookMark = DelBookMark
UIBookMarkCtrl.OnClickPosBtn = OnClickPosBtn

return UIBookMarkCtrl