---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by guqu.
--- DateTime: 2020/10/30 17:12
---
local BookMarkItem = BaseClass("BookMarkItem",UIBaseContainer)
local base = UIBaseContainer
local Localization = CS.GameEntry.Localization
local first_name_path = "firstNameTxt"
local second_name_path = "secondNameTxt"
local jump_txt_path ="jumpButton/jumpText"
local jump_btn_path = "jumpButton"
local del_btn_path = "delButton"
local flag_path = "Flag"
local function OnCreate(self)
    base.OnCreate(self)
    self.first_txt= self:AddComponent(UIText,first_name_path)
    self.second_txt = self:AddComponent(UIText,second_name_path)
    self.jump_btn = self:AddComponent(UIButton, jump_btn_path)
    self.jump_btn:SetOnClick(function()  
SoundUtil.PlayEffect(SoundAssets.Music_Effect_Button)
        self:OnJumpClick()
    end)
    self.jump_txt = self:AddComponent(UIText, jump_txt_path)
    self.jump_txt:SetLocalText(110003) 
    self.del_btn = self:AddComponent(UIButton, del_btn_path)
    self.del_btn:SetOnClick(function()  
SoundUtil.PlayEffect(SoundAssets.Music_Effect_Button)
        self:OnDelClick()
    end)
    self.flag = self:AddComponent(UIImage, flag_path)
end

local function SetItemShow(self, data)
    self.data = data
    self.first_txt:SetText(self.data.name)
    local pos = SceneUtils.IndexToTilePos(self.data.pos)
    self.second_txt:SetText(self.data.server.." "..Localization:GetString(GameDialogDefine.SHOW_POS,pos.x,pos.y))
    local img = "img_iconMarkMarked"
    if self.data.type ==0 then
        img = "img_iconMarkMarked"
    elseif self.data.type ==1 then
        img = "img_iconMarkFriend"
    elseif self.data.type ==2 then
        img = "img_iconMarkEnemy"
    end
    self.flag:LoadSprite(img)

end

local function OnJumpClick(self)
    self.view.ctrl:OnClickPosBtn(self.data.pos,self.data.server)
end

local function OnDelClick(self)
    self.view.ctrl:DelBookMark(self.data.pos,self.data.server)
end


BookMarkItem.OnCreate = OnCreate
BookMarkItem.SetItemShow = SetItemShow
BookMarkItem.OnJumpClick = OnJumpClick
BookMarkItem.OnDelClick = OnDelClick

return BookMarkItem