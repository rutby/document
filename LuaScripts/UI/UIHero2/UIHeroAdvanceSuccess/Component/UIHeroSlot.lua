---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by zhangliheng.
--- DateTime: 6/24/21 9:14 PM
---
--- 升阶消耗槽

local UIHeroSlot = BaseClass("UIHeroSlot", UIBaseContainer)
local base = UIBaseContainer

local UIHeroCell = require "UI.UIHero2.Common.UIHeroCellSmall"
local Localization = CS.GameEntry.Localization
local UIHeroStars = require 'UI.UIHero2.Common.UIHeroStars'

local default_hero_bg = "Assets/Main/Sprites/UI/UIHeroAdvance/UIheroupgrade_img_empty02"
local default_hero_fg = "Assets/Main/Sprites/UI/UIHeroAdvance/UIheroupgrade_img_empty01"
local default_hero_add = "Assets/Main/Sprites/UI/UIHeroAdvance/UIheroupgrade_img_addempty"
-- 创建
local function OnCreate(self)
    base.OnCreate(self)
    self:ComponentDefine()
end

-- 销毁
local function OnDestroy(self)
    self:ComponentDestroy()

    self.parent = nil
    self.heroUuid = nil
    self.heroData = nil
    
    base.OnDestroy(self)
end

-- 显示
local function OnEnable(self)
    base.OnEnable(self)
end

-- 隐藏
local function OnDisable(self)
    base.OnDisable(self)
end


--控件的定义
local function ComponentDefine(self)
    self.heroCell = self:AddComponent(UIHeroCell, "UIHeroCellSmall")
    self.heroCell:ToggleRayCast(false)
    self.btn = self:AddComponent(UIButton, "Close")
    self.btn:SetOnClick(function()  
        SoundUtil.PlayEffect(SoundAssets.Music_Effect_Button)
        self:OnBtnClick()
    end)
end

--控件的销毁
local function ComponentDestroy(self)
    self.heroCell = nil
end

-- 全部刷新
local function SetData(self, heroUuid, requireType, requireQuality)
    self.heroUuid = heroUuid
    self.requireType = requireType
    self.requireQuality = requireQuality
    self.heroData = DataCenter.HeroDataManager:GetHeroByUuid(self.heroUuid)
    self.heroCell:SetData(heroUuid, nil, nil, true)
    --self.heroCell:SetCampActive(false)
end

local function SetParent(self, parent)
    self.parent = parent
end

local function OnBtnClick(self)
    if self.heroUuid ~= nil then
        -- 取消选择当前狗粮
        self.parent:OnToggleDogFood(self.heroUuid)
        self.heroUuid = nil
    end
end

UIHeroSlot.OnCreate = OnCreate
UIHeroSlot.OnDestroy = OnDestroy
UIHeroSlot.OnEnable = OnEnable
UIHeroSlot.OnDisable = OnDisable
UIHeroSlot.ComponentDefine = ComponentDefine
UIHeroSlot.ComponentDestroy = ComponentDestroy
UIHeroSlot.SetData = SetData
UIHeroSlot.SetParent = SetParent
UIHeroSlot.OnBtnClick = OnBtnClick

return UIHeroSlot
