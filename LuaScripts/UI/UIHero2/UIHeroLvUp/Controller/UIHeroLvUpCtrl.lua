---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by zhangliheng.
--- DateTime: 6/29/21 12:11 PM
---

local UIHeroLvUpCtrl = BaseClass("UIHeroLvUpCtrl", UIBaseCtrl)

local function CloseSelf(self)
    if self.callback then
        self.callback()
    end
    UIManager:GetInstance():DestroyWindow(UIWindowNames.UIHeroLvUp)
end

local function Close(self)
    if self.callback then
        self.callback()
    end
    UIManager:GetInstance():DestroyWindowByLayer(UILayer.Normal)
end

local function GetPanelData(self, heroUuid)
    local result = {}
    --local items = DataCenter.ItemData:GetHeroExpItem()
    --for _, data in ipairs(items) do
    --    local tmp = {}
    --    tmp.type = 1
    --    tmp.count =  data.item.count
    --    tmp.template = data.template
    --    tmp.addNum = data.addNum
    --    tmp.uuid = data.item.uuid
    --    tmp.id = tostring(data.id)
    --    tmp.order = data.order
    --    table.insert(result, tmp)
    --end
    --table.sort(result, function (a, b)
    --    if a.order > b.order then
    --        return false
    --    elseif a.order < b.order then
    --        return true
    --    else
    --        if a.id > b.id then
    --            return true
    --        elseif a.id < b.id then
    --            return false
    --        end
    --    end
    --    return false
    --end)
    
    local title = {}
    title.type = 3
    table.insert(result, title)
    
    local lackTab = {}
    local param = {}
    param.type = ResLackType.HeroExp
    param.heroUuid = heroUuid
    table.insert(lackTab,param)
    local resList,_ = GoToResLack.GoToHeroLvUp(lackTab)
    if table.count(resList) > 0 then
        local current = {}
        for k, v in ipairs(resList[1]) do
            if math.fmod(k - 1, LackHeroExpPerRow) == 0 then
                current = {}
                current.type = 2
                current.cellDatas = {}
                table.insert(result, current)
            end
            table.insert(current.cellDatas, v)
        end
    end

    return result
end

UIHeroLvUpCtrl.CloseSelf =CloseSelf
UIHeroLvUpCtrl.Close =Close
UIHeroLvUpCtrl.GetPanelData = GetPanelData
return UIHeroLvUpCtrl