---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by mac.
--- DateTime: 7/22/21 2:48 PM
---
local UIHeroStarStoryCtrl = BaseClass("UIHeroStarStoryCtrl", UIBaseCtrl)


local function GetHeroStarStotyData(self)
    local heroList = DataCenter.HeroEvolveActivityManager:GetAllCanEvolveIds()
    local result = {}
    for _, heroId in ipairs(heroList) do
        local heroData = DataCenter.HeroDataManager:GetHeroById(heroId)
        if heroData then
            local toHeroId = heroData.config.evolve_hero
            if not string.IsNullOrEmpty(toHeroId) then
                local para = {}
                para.heroId = heroId
                para.level = heroData.level
                para.name = heroData.config.name
                para.nick = heroData.config.desc
                para.camp_icon = HeroUtils.GetCampIconPath(heroData:GetCamp())
                para.activityId = DataCenter.HeroEvolveActivityManager:GetActivityId()
                para.hasHero = DataCenter.HeroDataManager:GetHeroById(toInt(toHeroId)) ~= nil
                para.icon_path = string.format(LoadPath.UIHeroEvolve, heroBg[heroId]) 
                table.insert(result, para)
            end
        end
    end
    return result
end

local function CloseSelf(self)
    UIManager:GetInstance():DestroyWindow(UIWindowNames.UIHeroStarStory)
end

UIHeroStarStoryCtrl.CloseSelf = CloseSelf

return UIHeroStarStoryCtrl