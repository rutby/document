---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by zhangliheng.
--- DateTime: 7/19/21 5:56 PM
---

local UIDropCell = BaseClass("UIDropCell", UIBaseContainer)
local base = UIBaseContainer
local UIHeroCell = require "UI.UIHero2.Common.UIHeroCellSmall"
local UICommonItem = require "UI.UICommonItem.UICommonItem"

-- 创建
local function OnCreate(self)
    base.OnCreate(self)
    self:ComponentDefine()
end

-- 销毁
local function OnDestroy(self)
    self:ComponentDestroy()
    base.OnDestroy(self)
end

--控件的定义
local function ComponentDefine(self)
    self.heroCell = self:AddComponent(UIHeroCell, "UIHeroCellSmall")
    self.item = self:AddComponent(UICommonItem,"UICommonItemSize")
    self.rate = self:AddComponent(UITextMeshProUGUIEx, "RateText")
end

--控件的销毁
local function ComponentDestroy(self)
    self.heroCell = nil
end

local function SetData(self, data)
    if data.heroId ~=nil then
        self.item:SetActive(false)
        self.heroCell:SetActive(true)
        self.heroCell:InitWithConfigId(data.heroId)
    elseif data.goodId~=nil then
        self.heroCell:SetActive(false)
        self.item:SetActive(true)
        local param = {}
        param.itemId = data.goodId
        param.rewardType = RewardType.GOODS
        param.count = data.num
        self.item:ReInit(param)
    end
    
    self.rate:SetText(data.rate)
end

UIDropCell.OnCreate = OnCreate
UIDropCell.OnDestroy = OnDestroy
UIDropCell.ComponentDefine = ComponentDefine
UIDropCell.ComponentDestroy = ComponentDestroy
UIDropCell.SetData = SetData

return UIDropCell
