---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by zhangliheng.
--- DateTime: 8/30/21 6:16 PM
---


local UIRewardItem = BaseClass("UIRewardItem", UIBaseContainer)
local base = UIBaseContainer
local Localization = CS.GameEntry.Localization
local UIHeroCellSmall = require "UI.UIHero2.Common.UIHeroCellSmall"
local UIItemCell = require "UI.UIHero2.Common.UIItemCell"


local function OnCreate(self)
    base.OnCreate(self)
    self:ComponentDefine()
end

local function OnDestroy(self)
    self:ComponentDestroy()
    base.OnDestroy(self)
end

local function ComponentDefine(self)
    self.heroCell = self:AddComponent(UIHeroCellSmall, 'UIHeroCellSmall')
    self.itemCell = self:AddComponent(UIItemCell, 'UIItemCell')
    self.btn = self:AddComponent(UIButton, 'Btn')
    self.btn:SetOnClick(BindCallback(self, self.OnCellClick))
end

local function ComponentDestroy(self)
    self.heroCell = nil
    self.itemCell = nil
    self.btn = nil
end

local function SetData(self, data)
    self.data = data
    self:UpdateView()
end

local function UpdateView(self)
    local data = self.data

    self.heroCell:SetActive(false)
    self.itemCell:SetActive(false)

    local type = data['type']

    if type == 0 then --英雄
        local heroUuid = data['uuid']
        self.heroCell:SetData(heroUuid)
        self.heroCell:SetActive(true)
        self.heroUuid = heroUuid
    elseif type == 2 then
        local id = data['GoodsId']
        local num = data['addNumber']

        self.itemCell:SetData(id, num)
        self.itemCell:SetActive(true)
    else
        local id = data['id']
        local num = data['num']
        local color = data['goodsColor']
    end
end

local function OnCellClick(self)
    if self.heroUuid == nil then
        return
    end

    --打开新英雄展示界面param:{idx, heroId, quality, isFirst}
    UIManager:GetInstance():OpenWindow(UIWindowNames.UINewHero, self.heroUuid)
end

UIRewardItem.OnCreate = OnCreate
UIRewardItem.OnDestroy = OnDestroy
UIRewardItem.ComponentDefine = ComponentDefine
UIRewardItem.ComponentDestroy = ComponentDestroy
UIRewardItem.SetData = SetData
UIRewardItem.UpdateView = UpdateView

UIRewardItem.OnCellClick = OnCellClick


return UIRewardItem