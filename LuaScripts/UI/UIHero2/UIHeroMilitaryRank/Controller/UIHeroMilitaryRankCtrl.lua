---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by zhangliheng.
--- DateTime: 2021/6/23 下午3:08
---



local UIHeroMilitaryRankCtrl = BaseClass("UIHeroMilitaryRankCtrl", UIBaseCtrl)


local function CloseSelf(self)
    UIManager:GetInstance():DestroyWindow(UIWindowNames.UIHeroMilitaryRank)
end
--获得资源数量
local function GetCntByResType(self,resourceType)
    if DataCenter.ItemTemplateManager:GetItemTemplate(resourceType) ~= nil then
        local item = DataCenter.ItemData:GetItemById(resourceType)
        if item ~= nil then
            return item.count
        end
        return 0
    end
    return LuaEntry.Resource:GetCntByResType(resourceType)
end
local function ToggleBlurFeature(self, t)
    local pipeline = CS.UnityEngine.QualitySettings.renderPipeline
    cast(pipeline, typeof(CS.UnityEngine.Rendering.Universal.UniversalRenderPipelineAsset))
    if pipeline == nil then
        return
    end


    local propertyInfo = pipeline:GetType():GetField("m_RendererDataList",4|32 );
    if propertyInfo == nil then
        return
    end
    
    local objs = propertyInfo:GetValue(pipeline);
    if objs == nil then
        return
    end
    
    for i = 1, objs.Length do
        local scriptableRendererData = objs[i-1]
        if scriptableRendererData == nil then
            goto continue
        end
        
        cast(scriptableRendererData, typeof(CS.UnityEngine.Rendering.Universal.ScriptableRendererData))
        print(scriptableRendererData.rendererFeatures.Count)
        for i = 0, scriptableRendererData.rendererFeatures.Count-1 do
            if scriptableRendererData.rendererFeatures[i].name=="GaussianBlurRenderPassFeature" then
                scriptableRendererData.rendererFeatures[i]:SetActive(t)
            end
        end
        
        ::continue::
    end
end


UIHeroMilitaryRankCtrl.CloseSelf = CloseSelf
UIHeroMilitaryRankCtrl.ToggleBlurFeature = ToggleBlurFeature
UIHeroMilitaryRankCtrl.GetCntByResType = GetCntByResType
return UIHeroMilitaryRankCtrl