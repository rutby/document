---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 1.
--- DateTime: 2023/2/1 17:25
---

local UIHeroAdvanceIntroCell = BaseClass("UIHeroAdvanceIntroCell", UIBaseContainer)
local base = UIBaseContainer
local UIHeroCell = require "UI.UIHero2.Common.UIHeroCellSmall"
local SlotCell = require "UI.UIHero2.UIHeroAdvanceIntro.Component.UIHeroAdvanceIntroSlot"

-- 创建
local function OnCreate(self)
    base.OnCreate(self)
    self:ComponentDefine()
end

-- 销毁
local function OnDestroy(self)
    self:ComponentDestroy()
    base.OnDestroy(self)
end

-- 显示
local function OnEnable(self)
    base.OnEnable(self)
end

-- 隐藏
local function OnDisable(self)
    base.OnDisable(self)
end


--控件的定义
local function ComponentDefine(self)
    self.fromHero = self:AddComponent(UIHeroCell, "FromHero")
    self.toHero = self:AddComponent(UIHeroCell, "ToHero")
    self.slots = {}
    for i = 1, 3 do
        local slot = self:AddComponent(SlotCell, "HeroAdvanceContent/ConsumeSlot"..i)
        table.insert(self.slots, slot)
    end
end

--控件的销毁
local function ComponentDestroy(self)

end

-- 全部刷新
local function SetData(self, data)
    self.heroId = data.heroId
    self.quality = data.quality
    self.requireTypes = data.requireTypes
    self:RefreshView()
end

local function RefreshView(self)
    self.fromHero:InitWithConfigId(self.heroId, self.quality)
    self.toHero:InitWithConfigId(self.heroId, self.quality + 1)
    local total = table.count(self.slots)
    for i = 1, total do
        local param = self.requireTypes[i]
        local slot = self.slots[i]
        slot:SetActive(param ~= nil)
        if param then
            slot:SetData(param)
        end
    end
end

UIHeroAdvanceIntroCell.OnCreate = OnCreate
UIHeroAdvanceIntroCell.OnDestroy = OnDestroy
UIHeroAdvanceIntroCell.OnEnable = OnEnable
UIHeroAdvanceIntroCell.OnDisable = OnDisable
UIHeroAdvanceIntroCell.ComponentDefine = ComponentDefine
UIHeroAdvanceIntroCell.ComponentDestroy = ComponentDestroy
UIHeroAdvanceIntroCell.SetData = SetData
UIHeroAdvanceIntroCell.RefreshView = RefreshView

return UIHeroAdvanceIntroCell