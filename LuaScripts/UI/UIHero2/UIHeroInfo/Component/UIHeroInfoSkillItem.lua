---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Beef.
--- DateTime: 2023/12/21 19:23
---

local UIHeroInfoSkillItem = BaseClass("UIHeroInfoSkillItem", UIBaseContainer)
local base = UIBaseContainer

local this_path = ""
local icon_path = "Icon"
local level_bg_path = "LevelBg"
local level_path = "LevelBg/Level"
local select_path = "Select"
local lock_path = "Lock"
local red_path = "RedDot"
local star_path = "Star/Image%s"
local function OnCreate(self)
    base.OnCreate(self)
    self:ComponentDefine()
    self:DataDefine()
end

local function OnDestroy(self)
    self:ComponentDestroy()
    self:DataDestroy()
    base.OnDestroy(self)
end

local function OnEnable(self)
    base.OnEnable(self)
end

local function OnDisable(self)
    base.OnDisable(self)
end

local function ComponentDefine(self)
    self.btn = self:AddComponent(UIButton, this_path)
    self.btn:SetOnClick(function()
        self:OnClick()
    end)
    self.icon_image = self:AddComponent(UIImage, icon_path)
    self.level_bg_go = self:AddComponent(UIBaseContainer, level_bg_path)
    self.level_text = self:AddComponent(UITextMeshProUGUIEx, level_path)
    self.select_go = self:AddComponent(UIBaseContainer, select_path)
    self.lock_go = self:AddComponent(UIBaseContainer, lock_path)
    self.red_go = self:AddComponent(UIBaseContainer, red_path)

    self.star = {}
    for i = 1, 5 do
        self.star[i] = self:AddComponent(UIImage, string.format(star_path, i))
        self.star[i]:SetActive(false)
    end
end

local function ComponentDestroy(self)

end

local function DataDefine(self)
    self.onClick = nil
    self.unlocked = false
end

local function DataDestroy(self)
    self.unlocked = false
end

local function OnAddListener(self)
    base.OnAddListener(self)
end

local function OnRemoveListener(self)
    base.OnRemoveListener(self)
end

local function SetData(self, data)
    self.unlocked = data:IsUnlock()
    local level = math.max(data:GetLevel(), 1)
    self.icon_image:LoadSprite(HeroUtils.GetSkillIcon(data.skillId))
    self.level_text:SetText("Lv." .. level)
    self.lock_go:SetActive(not self.unlocked)
    self.level_bg_go:SetActive(self.unlocked)
end

local function SetStar(self, level, count)
    if count > 1 then
        for i = 1, 5 do
            self.star[i]:SetActive(false)
        end
    else
        for i = 1, 5 do
            self.star[i]:SetActive(self.unlocked and i < level)
        end
    end
end

local function SetSelected(self, selected)
    self.select_go:SetActive(selected)
end

local function SetShowRed(self, show)
    self.red_go:SetActive(show)
end

local function SetOnClick(self, onClick)
    self.onClick = onClick
end

local function OnClick(self)
    if self.onClick then
        self.onClick()
    end
end

UIHeroInfoSkillItem.OnCreate = OnCreate
UIHeroInfoSkillItem.OnDestroy = OnDestroy
UIHeroInfoSkillItem.OnEnable = OnEnable
UIHeroInfoSkillItem.OnDisable = OnDisable
UIHeroInfoSkillItem.ComponentDefine = ComponentDefine
UIHeroInfoSkillItem.ComponentDestroy = ComponentDestroy
UIHeroInfoSkillItem.DataDefine = DataDefine
UIHeroInfoSkillItem.DataDestroy = DataDestroy
UIHeroInfoSkillItem.OnAddListener = OnAddListener
UIHeroInfoSkillItem.OnRemoveListener = OnRemoveListener
UIHeroInfoSkillItem.SetData = SetData
UIHeroInfoSkillItem.SetStar = SetStar
UIHeroInfoSkillItem.SetSelected = SetSelected
UIHeroInfoSkillItem.SetShowRed = SetShowRed
UIHeroInfoSkillItem.SetOnClick = SetOnClick
UIHeroInfoSkillItem.OnClick = OnClick

return UIHeroInfoSkillItem