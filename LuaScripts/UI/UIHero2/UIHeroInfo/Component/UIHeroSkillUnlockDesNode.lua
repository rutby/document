---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by admin.
--- DateTime: 2024/4/1 17:15
---

local UIHeroSkillUnlockDesNode = BaseClass("UIHeroSkillUnlockDesNode", UIBaseContainer)
local base = UIBaseContainer
local Localization = CS.GameEntry.Localization

local UIHeroEtoile = require "UI.UIHero2.Common.UIHeroEtoile"

local star_path = "UIHeroEtoile"
local des_path = "SkillDesc"

function UIHeroSkillUnlockDesNode:OnCreate()
    base.OnCreate(self)
    self:DataDefine()
    self:ComponentDefine()
end

function UIHeroSkillUnlockDesNode:OnDestroy()
    self:ComponentDestroy()
    self:DataDestroy()
    base.OnDestroy(self)
end

function UIHeroSkillUnlockDesNode:ComponentDefine()
    self.goTextMat = self.transform:Find("goTextMat"):GetComponent(typeof(CS.UnityEngine.MeshRenderer))
    self.star = self:AddComponent(UIHeroEtoile, star_path)
    self.des = self:AddComponent(UITextMeshProUGUIEx, des_path)
end

function UIHeroSkillUnlockDesNode:ComponentDestroy()

end

function UIHeroSkillUnlockDesNode:DataDefine()

end

function UIHeroSkillUnlockDesNode:DataDestroy()

end

function UIHeroSkillUnlockDesNode:OnAddListener()
    base.OnAddListener(self)
end

function UIHeroSkillUnlockDesNode:OnRemoveListener()
    base.OnRemoveListener(self)
end

function UIHeroSkillUnlockDesNode:SetData(curRankLv, needLv, des)
    if curRankLv >= needLv then
        self.star:SetCornerCount(5)
        des = string.format("<color=%s>%s</color>", TextColorGreenLight, des)
        self.des:SetMaterial(self.goTextMat.sharedMaterials[1])
    else
        self.star:SetCornerCount(0)
        local needStar = HeroUtils.GetEtoileName(needLv)
        des = string.format("%s <color=%s>%s</color>", des, TextColorRed,  Localization:GetString(GameDialogDefine.HERO_SKILL_UNLOCK3, needStar))
        self.des:SetMaterial(self.goTextMat.sharedMaterials[0])
    end
    self.des:SetText(des)
end

return UIHeroSkillUnlockDesNode