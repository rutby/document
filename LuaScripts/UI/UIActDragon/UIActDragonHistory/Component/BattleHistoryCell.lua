---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by zzl
--- DateTime: 
---
local BattleHistoryCell = BaseClass("BattleHistoryCell", UIBaseContainer)
local base = UIBaseContainer
local Localization = CS.GameEntry.Localization
local AllianceFlagItem = require "UI.UIAlliance.UIAllianceFlag.Component.AllianceFlagItem"
-- 创建
function BattleHistoryCell:OnCreate()
    base.OnCreate(self)
    self:DataDefine()
    self:ComponentDefine()
end

-- 销毁
function BattleHistoryCell:OnDestroy()
    self:ComponentDestroy()
    self:DataDestroy()
    base.OnDestroy(self)
end

--控件的定义
function BattleHistoryCell:ComponentDefine()
    self._l_allianceFlag = self:AddComponent(AllianceFlagItem,"Rect_Left/Rect_LFlag/LAllianceFlag")
    self._l_allianceName_txt = self:AddComponent(UIText,"Rect_Left/Txt_LAllianceName")
    self._l_battleMembers_txt = self:AddComponent(UIText,"Rect_Left/Txt_LBattleMembers")
    self._l_score_txt = self:AddComponent(UIText,"Rect_Left/Txt_LScore")
    self._l_win_rect = self:AddComponent(UIBaseContainer,"Rect_Left/Rect_LWin")

    self._r_allianceFlag = self:AddComponent(AllianceFlagItem,"Rect_Right/Rect_RFlag/RAllianceFlag")
    self._r_allianceName_txt = self:AddComponent(UIText,"Rect_Right/Txt_RAllianceName")
    self._r_battleMembers_txt = self:AddComponent(UIText,"Rect_Right/Txt_RBattleMembers")
    self._r_score_txt = self:AddComponent(UIText,"Rect_Right/Txt_RScore")
    self._r_win_rect = self:AddComponent(UIBaseContainer,"Rect_Right/Rect_RWin")
    
    self._battleTime_txt = self:AddComponent(UIText,"Rect_TimeBg/Txt_BattleTime")
end

--控件的销毁
function BattleHistoryCell:ComponentDestroy()

end

--变量的定义
function BattleHistoryCell:DataDefine()
 
end

--变量的销毁
function BattleHistoryCell:DataDestroy()
 
end

function BattleHistoryCell:SetData(data)
    self._l_allianceFlag:SetData(data.icon)
    self._l_allianceName_txt:SetLocalText(311026,data.abbr,data.name)
    self._l_battleMembers_txt:SetLocalText(150033,data.userNum,data.maxUserNum)
    self._l_score_txt:SetText(data.score)

    self._r_allianceFlag:SetData(data.enemyIcon)
    self._r_allianceName_txt:SetLocalText(311026,data.enemyAbbr,data.enemyName)
    self._r_battleMembers_txt:SetLocalText(150033,data.enemyUserNum,data.maxUserNum)
    self._r_score_txt:SetText(data.enemyScore)

    self._battleTime_txt:SetText(UITimeManager:GetInstance():TimeStampToTimeForServerMinute(data.battleTime))

    --1轮空 2 胜利 3 失败
    self._l_win_rect:SetActive(data.state == 2)
    self._r_win_rect:SetActive(data.state == 3)
end



return BattleHistoryCell