---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 1.
--- DateTime: 2023/2/7 20:25
---

local DecorationGiftRewardSendSearchCell = BaseClass("DecorationGiftRewardSendSearchCell",UIBaseContainer)
local base = UIBaseContainer

local player_name_path = "mainContent/nameTxt"
local abbr_path = "mainContent/abbrTxt"
local power_path = "mainContent/powerTxt"
local flag_path = "mainContent/rankImg"
local rank_path = "mainContent/rankNumTxt"
local player_icon_path="mainContent/leftIcon/playerIcon/UIPlayerHead/HeadIcon"
local playerHeadFg_path = "mainContent/leftIcon/playerIcon/UIPlayerHead/Foreground"
local choose_btn_path = "mainContent/chooseBtn"
local choose_btn_text_path = "mainContent/chooseBtn/chooseBtn_text"

local function OnCreate(self)
    base.OnCreate(self)
    self.player_name = self:AddComponent(UIText,player_name_path)
    self.abbr = self:AddComponent(UIText,abbr_path)
    self.power_txt = self:AddComponent(UIText,power_path)
    self.player_img =self:AddComponent(UIPlayerHead,player_icon_path)
    self.playerHeadFg = self:AddComponent(UIImage, playerHeadFg_path)

    self.choose_btn = self:AddComponent(UIButton, choose_btn_path)
    self.choose_btn:SetOnClick(function()
        SoundUtil.PlayEffect(SoundAssets.Music_Effect_Button)
        self:OnClick()
    end)

    self.choose_btn_text = self:AddComponent(UIText, choose_btn_text_path)
    self.choose_btn_text:SetLocalText(110108)
end

local function SetData(self, data)
    self.data = data

    self.power_txt:SetLocalText(100392, string.GetFormattedSeperatorNum(math.floor(data.power)))

    self.player_name:SetText(data.name)
    self.player_img:SetData(data.uid, data.pic, data.picVer)
    local headBgImg = DataCenter.DecorationDataManager:GetHeadFrame(data.headSkinId, data.headSkinET)
    if headBgImg ~= nil  then
        self.playerHeadFg:SetActive(true)
        self.playerHeadFg:LoadSprite(headBgImg)
    else
        self.playerHeadFg:SetActive(false)
    end
    local abbrStr = ""
    if data.alAbbr~=nil then
        abbrStr = data.alAbbr
    end
    if abbrStr~="" then
        self.abbr:SetText("["..abbrStr.."]")
    else
        self.abbr:SetText("")
    end
end

local function OnClick(self)
    self.view:SelectPlayer(self.data)
end

local function OnDestroy(self)
    base.OnDestroy(self)
end


DecorationGiftRewardSendSearchCell.OnCreate = OnCreate
DecorationGiftRewardSendSearchCell.SetData = SetData
DecorationGiftRewardSendSearchCell.OnClick = OnClick
DecorationGiftRewardSendSearchCell.OnDestroy = OnDestroy

return DecorationGiftRewardSendSearchCell