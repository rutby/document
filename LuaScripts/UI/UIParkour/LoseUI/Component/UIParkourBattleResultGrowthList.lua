---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by wsf.
--- DateTime: 2023/11/3 2:43 PM
---
---@class UIParkourBattleResultGrowthList : UIBaseContainer
local UIParkourBattleResultGrowthList = BaseClass("UIParkourBattleResultGrowthList", UIBaseContainer)
local base = UIBaseContainer
local Localization = CS.GameEntry.Localization

---@type UIZombieBattleResultGrowthListItem
local UIGrowthItem = require "UI.UIZombieBattleLose.Component.UIZombieBattleResultGrowthListItem"

-- 创建
function UIParkourBattleResultGrowthList:OnCreate(ctrl)
    base.OnCreate(self)
    self:ComponentDefine()
    self.ctrl = ctrl
end

-- 销毁
function UIParkourBattleResultGrowthList:OnDestroy()
    self:ComponentDestroy()
    base.OnDestroy(self)
end

-- 显示
function UIParkourBattleResultGrowthList:OnEnable()
    base.OnEnable(self)
    self.active = true
end

-- 隐藏
function UIParkourBattleResultGrowthList:OnDisable()
    self.active = false
    base.OnDisable(self)
end

function UIParkourBattleResultGrowthList:ComponentDefine()
    self.canvasGroup = self.gameObject:GetComponent(typeof(CS.UnityEngine.CanvasGroup))
    -- 升级英雄
    self.heroLevelContent = self:AddComponent(UIGrowthItem,"Viewport/Content/HeroLevelContent")
    self.heroLevelContent:RefreshView(Localization:GetString("140062"), "110003", self, self.OnHeroLevelBtnClick)
    -- 招募英雄
    self.recruitHeroContent = self:AddComponent(UIGrowthItem,"Viewport/Content/RecruitHeroContent")
    self.recruitHeroContent:RefreshView(Localization:GetString("140063"), "110003", self, self.OnRecruitHeroBtnClick)
    -- 首充送英雄
    self.firstPayContent = self:AddComponent(UIGrowthItem,"Viewport/Content/FirstPayContent")
    self.firstPayContent:RefreshView(Localization:GetString("320188"), "110003", self, self.OnFirstPayBtnClick)
end

function UIParkourBattleResultGrowthList:ComponentDestroy()
    if not IsNull(self.fadeTween) then
        self.fadeTween:Kill()
        self.fadeTween = nil
    end
end

function UIParkourBattleResultGrowthList:FadeIn()
    if not IsNull(self.fadeTween) then
        self.fadeTween:Kill()
        self.fadeTween = nil
    end

    self.canvasGroup.alpha = 0
    self.fadeTween = DOTween.To(function()
        return self.canvasGroup.alpha
    end, function(value)
        self.canvasGroup.alpha = value
    end, 1, 0.5):SetEase(CS.DG.Tweening.Ease.Linear)
end

function UIParkourBattleResultGrowthList:OnHeroLevelBtnClick()
    self.ctrl:CloseSelf()
    DataCenter.LWBattleManager:Exit(function()
        UIManager:GetInstance():OpenWindow(UIWindowNames.UIHeroList, { anim = true })
    end)
end

function UIParkourBattleResultGrowthList:OnRecruitHeroBtnClick()
    self.ctrl:CloseSelf()
    DataCenter.LWBattleManager:Exit(function()
        UIManager:GetInstance():OpenWindow(UIWindowNames.UIHeroRecruit, { anim = true })
    end)
end

function UIParkourBattleResultGrowthList:OnFirstPayBtnClick()
    self.ctrl:CloseSelf()
    DataCenter.LWBattleManager:Exit(function()
        UIManager:GetInstance():OpenWindow(UIWindowNames.UIFirstPay, { anim = false, UIMainAnim = UIMainAnimType.AllHide })
    end)
end

function UIParkourBattleResultGrowthList:RefreshView()
    self.heroLevelContent:SetActive(true)
    self.recruitHeroContent:SetActive(true)
    self.firstPayContent:SetActive(DataCenter.PayManager:CheckIfFirstPayOpen())
end

return UIParkourBattleResultGrowthList
