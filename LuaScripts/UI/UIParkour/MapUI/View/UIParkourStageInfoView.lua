---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by w.
--- DateTime: 2022/12/12 19:20
---

local UIParkourStageInfoView = BaseClass("UIParkourStageInfoView",UIBaseContainer)
local base = UIBaseContainer
local Localization = CS.GameEntry.Localization


local function OnCreate(self)
    base.OnCreate(self)
    self.host = nil
    self.rewardTitle = self:AddComponent(UIText,"Content/Bg/RewardTitle")
    self.desc = self:AddComponent(UIText,"Content/Bg/Desc")
    self.mosterTitle = self:AddComponent(UIText,"Content/Bg/MosterTitle")
    self.nameText = self:AddComponent(UIText,"Content/Bg/NameText")
    self.enterBtn = self:AddComponent(UIButton,"Content/Bg/EnterBtn")
    self.enterBtnText = self:AddComponent(UIText,"Content/Bg/EnterBtn/EnterBtnText")


    self.enterBtn:SetOnClick(function ()
        self:OnEnterClick()
    end)
    self.content = self:AddComponent(UIBaseContainer, "Content")
    self.arrowContent = self:AddComponent(UIBaseContainer, "ArrowContent")
    
    self.hideMask = self:AddComponent(UIButton, "HideMask")
    self.hideMask:SetOnClick(function ()
        self:SetActive(false)
    end)

    self.enterBtnText:SetText(Localization:GetString("110003"))
    self.rewardTitle:SetText(Localization:GetString("390832"))
end

local function OnDestroy(self)
    self.rewardTitle = nil
    self.desc = nil
    self.mosterTitle = nil
    self.nameText = nil
    self.enterBtn = nil
    self.enterBtnText = nil
    self.enterBtn = nil
    base.OnDestroy(self)
end

local function RefreshData(self,cell)
    local cellPos = cell.transform.localPosition
    self.content.transform.localPosition = Vector3.New(Mathf.Clamp(cellPos.x, -170, 170),Mathf.Clamp(cellPos.y,-1000,250),cellPos.z)
    self.arrowContent.transform.position = cell.transform.position
    self.nameText:SetText( Localization:GetString( cell.stageFeatureMeta.name,cell.stageFeatureMeta.order))
    self.desc:SetText(Localization:GetString( cell.stageFeatureMeta.desc))
    self.mosterTitle:SetText(Localization:GetString("800300"))
    self.stageFeatureMeta= cell.stageFeatureMeta
end

local function OnEnterClick(self)
    local param = {}
    param.type = PVEType.Parkour
    param.levelId = self.stageFeatureMeta.id
    DataCenter.LWBattleManager:Enter(param)
end

local function SetActive(self,active)
    self.gameObject:SetActive(active)
end

UIParkourStageInfoView.OnCreate = OnCreate
UIParkourStageInfoView.OnDestroy = OnDestroy
UIParkourStageInfoView.RefreshData = RefreshData
UIParkourStageInfoView.OnEnterClick = OnEnterClick
UIParkourStageInfoView.SetActive = SetActive

return UIParkourStageInfoView