---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 1.
--- DateTime: 2022/12/4 22:28
---ThemeActivityItem_GiftPack.lua

local ThemeActivityItem_GiftPack = BaseClass("ThemeActivityItem_GiftPack", UIBaseContainer)
local base = UIBaseContainer
local Localization = CS.GameEntry.Localization

local packageImg_path = "packageIcon"
local packageName_path = "Image/packageName"
local packageNew_path = "NewDot"
local package_path = ""

-- 创建
local function OnCreate(self)
    base.OnCreate(self)
    self:ComponentDefine()
    self:DataDefine()
end

-- 销毁
local function OnDestroy(self)
    self:ComponentDestroy()
    self:DataDestroy()
    base.OnDestroy(self)
end

--控件的定义
local function ComponentDefine(self)
    self.packageImgN = self:AddComponent(UIImage, packageImg_path)
    self.packageNameN = self:AddComponent(UIText, packageName_path)
    self.packageBtnN = self:AddComponent(UIButton, package_path)
    self.packageBtnN:SetOnClick(function()
        self:OnClickPackageBtn()
    end)
    self.packageNewN = self:AddComponent(UIBaseContainer, packageNew_path)
end

--控件的销毁
local function ComponentDestroy(self)
    self.packageN = nil
    self.packageImgN = nil
    self.packageNameN = nil
    self.packageBtnN = nil
end

--变量的定义
local function DataDefine(self)
    self.activityInfo = nil
    self.curPackageInfo = nil
end

--变量的销毁
local function DataDestroy(self)
    self.activityInfo = nil
    self.curPackageInfo = nil
end

local function SetItem(self, actInfo, packageInfo)
    self.activityInfo = actInfo
    self.curPackageInfo = packageInfo

    if not self.curPackageInfo then
        return
    end

    self:RefreshUI()
end

local function RefreshUI(self)
    local strName = self.curPackageInfo:getNameText()
    self.packageNameN:SetText(strName)
    if DataCenter.ThemeActivityManager:CheckIfPackageIsNew(self.activityInfo) then
        self.packageNewN:SetActive(true)
    else
        self.packageNewN:SetActive(false)
    end
end


local function OnClickPackageBtn(self)
    self.view:OnClickPackageBtn(true)
end



ThemeActivityItem_GiftPack.OnCreate = OnCreate
ThemeActivityItem_GiftPack.OnDestroy = OnDestroy
ThemeActivityItem_GiftPack.ComponentDefine = ComponentDefine
ThemeActivityItem_GiftPack.ComponentDestroy = ComponentDestroy
ThemeActivityItem_GiftPack.DataDefine = DataDefine
ThemeActivityItem_GiftPack.DataDestroy = DataDestroy

ThemeActivityItem_GiftPack.SetItem = SetItem
ThemeActivityItem_GiftPack.RefreshUI = RefreshUI
ThemeActivityItem_GiftPack.OnClickPackageBtn = OnClickPackageBtn

return ThemeActivityItem_GiftPack
