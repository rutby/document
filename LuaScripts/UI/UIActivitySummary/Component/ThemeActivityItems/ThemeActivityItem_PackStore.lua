---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 1.
--- DateTime: 2022/12/4 22:29
---ThemeActivityItem_PackStore.lua


local ThemeActivityItem_PackStore = BaseClass("ThemeActivityItem_PackStore", UIBaseContainer)
local base = UIBaseContainer
local Localization = CS.GameEntry.Localization

local packageImg_path = "packageIcon"
local packageName_path = "Image/packageName"
local packageNew_path = "NewDot"
local package_path = ""

-- 创建
local function OnCreate(self)
    base.OnCreate(self)
    self:ComponentDefine()
    self:DataDefine()
end

-- 销毁
local function OnDestroy(self)
    self:ComponentDestroy()
    self:DataDestroy()
    base.OnDestroy(self)
end

--控件的定义
local function ComponentDefine(self)
    self.packageImgN = self:AddComponent(UIImage, packageImg_path)
    self.packageNameN = self:AddComponent(UIText, packageName_path)
    self.packageBtnN = self:AddComponent(UIButton, package_path)
    self.packageBtnN:SetOnClick(function()
        self:OnClickPackageBtn()
    end)
    self.packageNewN = self:AddComponent(UIBaseContainer, packageNew_path)
    self.packageNewN:SetActive(false)
end

--控件的销毁
local function ComponentDestroy(self)
    self.packageN = nil
    self.packageImgN = nil
    self.packageNameN = nil
    self.packageBtnN = nil
end

--变量的定义
local function DataDefine(self)
    self.activityInfo = nil
    self.curWelfareTagType = nil
end

--变量的销毁
local function DataDestroy(self)
    self.activityInfo = nil
    self.curWelfareTagType = nil
end

local function SetItem(self, actInfo, welfareType, rechargeId, hasRecharge)
    self.activityInfo = actInfo
    self.curWelfareTagType = welfareType
    self.curRechargeId = rechargeId
    self.hasRecharge = hasRecharge

    self:RefreshUI()
end

local function RefreshUI(self)
    local strName = ""
    if self.hasRecharge then
        if self.curWelfareTagType == WelfareTagType.CumulativeRecharge then
            strName = Localization:GetString("302364")
        end
    else
        strName = Localization:GetString("370100")
    end
    self.packageNameN:SetText(strName)
end


local function OnClickPackageBtn(self)
    if not self.hasRecharge then
        UIUtil.ShowTips(Localization:GetString("370100"))
        return
    end
    
    UIManager:GetInstance():OpenWindow(UIWindowNames.UIGiftPackage, { anim = true }
        , { welfareTagType = self.curWelfareTagType, curRechargeId = self.curRechargeId})
end



ThemeActivityItem_PackStore.OnCreate = OnCreate
ThemeActivityItem_PackStore.OnDestroy = OnDestroy
ThemeActivityItem_PackStore.ComponentDefine = ComponentDefine
ThemeActivityItem_PackStore.ComponentDestroy = ComponentDestroy
ThemeActivityItem_PackStore.DataDefine = DataDefine
ThemeActivityItem_PackStore.DataDestroy = DataDestroy

ThemeActivityItem_PackStore.SetItem = SetItem
ThemeActivityItem_PackStore.RefreshUI = RefreshUI
ThemeActivityItem_PackStore.OnClickPackageBtn = OnClickPackageBtn

return ThemeActivityItem_PackStore