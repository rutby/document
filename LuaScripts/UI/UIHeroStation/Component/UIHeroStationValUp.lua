---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Beef.
--- DateTime: 2022/1/19 16:35
---

local UIHeroStationValUp = BaseClass("UIHeroStationValUp", UIBaseContainer)
local base = UIBaseContainer
local ResourceManager = CS.GameEntry.Resource
local UIHeroStationValUpItem = require "UI.UIHeroStation.Component.UIHeroStationValUpItem"

local title_path = "UICommonRewardPopUp/Panel/ImgTitleBg/TextTitle"
local desc_path = "Desc"
local list_path = "ValUpList"
local confirm_btn_path = "ConfirmBtn"
local confirm_text_path = "ConfirmBtn/ConfirmBtnText"

local function OnCreate(self)
    base.OnCreate(self)
    self:DataDefine()
    self:ComponentDefine()
end

local function OnDestroy(self)
    self:ComponentDestroy()
    self:DataDestroy()
    base.OnDestroy(self)
end

local function ComponentDefine(self)
    self.title_text = self:AddComponent(UIText, title_path)
    self.title_text:SetLocalText(162012)
    self.desc_text = self:AddComponent(UIText, desc_path)
    self.desc_text:SetLocalText(162007)
    self.list_go = self:AddComponent(UIBaseContainer, list_path)
    self.confirm_btn = self:AddComponent(UIButton, confirm_btn_path)
    self.confirm_btn:SetOnClick(function() self:OnConfirmClick() end)
    self.confirm_text = self:AddComponent(UIText, confirm_text_path)
    self.confirm_text:SetLocalText(tonumber(GameDialogDefine.CONFIRM))
end

local function ComponentDestroy(self)
    self.title_text = nil
    self.list_go = nil
    self.confirm_btn = nil
    self.confirm_text = nil
end

local function DataDefine(self)
    self.callback = nil
end

local function DataDestroy(self)
    self.callback = nil
end

local function OnEnable(self)
    base.OnEnable(self)
end

local function OnDisable(self)
    self.list_go:RemoveComponents(UIHeroStationValUpItem)
    self.list_go:DestroyChildNode()
    base.OnDisable(self)
end

local function SetData(self, dataList)
    for i, data in ipairs(dataList) do
        local request = ResourceManager:InstantiateAsync(UIAssets.UIHeroStationValUpItem)
        request:completed('+', function()
            if request.isError then
                return
            end
            
            local go = request.gameObject
            go:SetActive(true)
            go.transform:SetParent(self.list_go.transform)
            go.transform:Set_localScale(ResetScale.x, ResetScale.y, ResetScale.z)
            go.name = tostring(i)
            
            local item = self.list_go:AddComponent(UIHeroStationValUpItem, tostring(i))
            item:SetData(data)
        end)
    end
end

local function SetCallback(self, callback)
    self.callback = callback
end

local function OnConfirmClick(self)
    self.gameObject:SetActive(false)
    if self.callback then
        self.callback()
    end
end

UIHeroStationValUp.OnCreate= OnCreate
UIHeroStationValUp.OnDestroy = OnDestroy
UIHeroStationValUp.ComponentDefine = ComponentDefine
UIHeroStationValUp.ComponentDestroy = ComponentDestroy
UIHeroStationValUp.DataDefine = DataDefine
UIHeroStationValUp.DataDestroy = DataDestroy
UIHeroStationValUp.OnEnable = OnEnable
UIHeroStationValUp.OnDisable = OnDisable

UIHeroStationValUp.SetData = SetData
UIHeroStationValUp.SetCallback = SetCallback
UIHeroStationValUp.OnConfirmClick = OnConfirmClick

return UIHeroStationValUp