---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Beef.
--- DateTime: 2022/1/4 17:03
---

local UIHeroStationSkill = BaseClass("UIHeroStationSkill", UIBaseContainer)
local base = UIBaseContainer

local this_path = ""
local unlocked_path = "Unlocked"
local unlocked_name_path = "Unlocked/UnlockedName"
local unlocked_icon_path = "Unlocked/UnlockedIcon"
local locked_path = "Locked"
local locked_name_path = "Locked/LockedName"
local locked_icon_path = "Locked/LockedIcon"
local engaged_path = "Engaged"

local function OnCreate(self)
    base.OnCreate(self)
    self:DataDefine()
    self:ComponentDefine()
end

local function OnDestroy(self)
    self:ComponentDestroy()
    self:DataDestroy()
    base.OnDestroy(self)
end

local function ComponentDefine(self)
    self.btn = self:AddComponent(UIButton, this_path)
    self.btn:SetOnClick(function()
        self:OnClick()
    end)
    self.unlocked_go = self:AddComponent(UIBaseContainer, unlocked_path)
    self.unlocked_name_text = self:AddComponent(UIText, unlocked_name_path)
    self.unlocked_icon_image = self:AddComponent(UIImage, unlocked_icon_path)
    self.locked_go = self:AddComponent(UIBaseContainer, locked_path)
    self.locked_name_text = self:AddComponent(UIText, locked_name_path)
    self.locked_name_text:SetLocalText(120105)
    self.locked_icon_image = self:AddComponent(UIImage, locked_icon_path)
    self.engaged_go = self:AddComponent(UIBaseContainer, engaged_path)
end

local function ComponentDestroy(self)
    self.btn = nil
    self.unlocked_go = nil
    self.unlocked_name_text = nil
    self.unlocked_icon_image = nil
    self.locked_go = nil
    self.locked_name_text = nil
    self.locked_icon_image = nil
    self.engaged_go = nil
end

local function DataDefine(self)
    self.skillId = 0
    self.onClick = nil
end

local function DataDestroy(self)
    self.skillId = nil
    self.onClick = nil
end

local function OnEnable(self)
    base.OnEnable(self)
end

local function OnDisable(self)
    base.OnDisable(self)
end

local function SetUnlocked(self, unlocked)
    if unlocked then
        self.unlocked_go:SetActive(true)
        self.locked_go:SetActive(false)
    else
        self.unlocked_go:SetActive(false)
        self.locked_go:SetActive(true)
        self.engaged_go:SetActive(false)
    end
end

local function SetData(self, skillId)
    self.skillId = skillId
    local skillTemplate = DataCenter.HeroStationSkillTemplateManager:GetTemplate(skillId)
    self.unlocked_name_text:SetLocalText(skillTemplate.name)
    local icon = DataCenter.HeroStationManager:GetSkillIcon(skillId)
    self.unlocked_icon_image:LoadSprite(icon, nil, function()
        self.unlocked_icon_image:SetNativeSize()
    end)
    local engaged = DataCenter.HeroStationManager:CanEngageSkill(skillId)
    self.engaged_go:SetActive(engaged)
end

local function SetOnClick(self, onClick)
    self.onClick = onClick
end

local function OnClick(self)
    if self.onClick ~= nil then
        self.onClick(self.skillId)
    end
end

UIHeroStationSkill.OnCreate= OnCreate
UIHeroStationSkill.OnDestroy = OnDestroy
UIHeroStationSkill.ComponentDefine = ComponentDefine
UIHeroStationSkill.ComponentDestroy = ComponentDestroy
UIHeroStationSkill.DataDefine = DataDefine
UIHeroStationSkill.DataDestroy = DataDestroy
UIHeroStationSkill.OnEnable = OnEnable
UIHeroStationSkill.OnDisable = OnDisable

UIHeroStationSkill.SetUnlocked = SetUnlocked
UIHeroStationSkill.SetData = SetData
UIHeroStationSkill.SetOnClick = SetOnClick
UIHeroStationSkill.OnClick = OnClick

return UIHeroStationSkill