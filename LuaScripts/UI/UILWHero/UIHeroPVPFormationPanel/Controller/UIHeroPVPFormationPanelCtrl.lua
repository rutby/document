---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by admin.
--- DateTime: 2022/12/8 00:15
---

local UIHeroPVPFormationPanelCtrl = BaseClass("UIHeroPVPFormationPanelCtrl", UIBaseCtrl)
local formationBuffCfg

local function CloseSelf(self)
    UIManager:GetInstance():DestroyWindow(UIWindowNames.UIHeroPVPFormation)
end


-- 需要把整个编队的的数据同步给服务器
local function SaveSquad(self,entranceType,squadIndex,isManualSave)

    if entranceType == nil or squadIndex == nil then
        return
    end
    
    local squadData = nil
    local curHeroes = nil
    --local curSupplies = nil

    squadData=DataCenter.ArmyFormationDataManager:GetFormationByType(entranceType,squadIndex)

    if squadData == nil then
        return
    end

    curHeroes = squadData:GetLocalAllHeroes()

    local saveType = 0
    if isManualSave == true then
        saveType = 1
    end

    if entranceType == EnterHeroSquadPanelWay.Gate then
        SFSNetwork.SendMessage(MsgDefines.DefenseInfoSave, squadData.uuid,curHeroes)
    elseif entranceType < EnterHeroSquadPanelWay.PVE then
        SFSNetwork.SendMessage(MsgDefines.NormalFormationInfoSave,squadData.uuid,curHeroes,saveType)
    else
        SFSNetwork.SendMessage(MsgDefines.FormationSave,squadData.index,curHeroes,saveType)
    end
end

UIHeroPVPFormationPanelCtrl.CloseSelf = CloseSelf
UIHeroPVPFormationPanelCtrl.SaveSquad = SaveSquad
return UIHeroPVPFormationPanelCtrl