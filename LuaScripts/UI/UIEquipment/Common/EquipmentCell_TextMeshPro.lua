---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 1.
--- DateTime: 2023/2/28 15:46
---

local EquipmentCell_TextMeshPro = BaseClass("EquipmentCell_TextMeshPro", UIBaseContainer)
local base = UIBaseContainer

local quality_path = "quality"
local icon_path = "icon"
local lv_path = "level"
local btn_path = "btn"

local function OnCreate(self)
    base.OnCreate(self)
    self:DataDefine()
    self:ComponentDefine()
end

local function OnDestroy(self)
    self:ComponentDestroy()
    self:DataDestroy()
    base.OnDestroy(self)
end

local function ComponentDefine(self)
    self.quality = self:AddComponent(UIImage, quality_path)
    self.icon = self:AddComponent(UIImage, icon_path)
    self.lv = self:AddComponent(UITextMeshProUGUIEx, lv_path)
    self.btn = self:AddComponent(UIButton, btn_path)
    self.btn:SetOnClick(function()
        self:OnClick()
    end)
end

local function ComponentDestroy(self)

end

local function DataDefine(self)

end

local function DataDestroy(self)

end

local function OnAddListener(self)
    base.OnAddListener(self)
end

local function OnRemoveListener(self)
    base.OnRemoveListener(self)
end

local function SetData(self, data, callBack)
    self.data = data
    self.callBack = callBack
    self:RefreshView()
end

local function RefreshView(self)
    if self.data.uuid == nil and (self.data.showLv == nil or self.data.showLv == false) then
        self.lv:SetText("")
    else
        self.lv:SetLocalText(300665, self.data.lv)
    end
    self.icon:LoadSprite(EquipmentUtil.GetEquipmentIcon(self.data.equipmentId))
    self.quality:LoadSprite(EquipmentUtil.GetEquipmentQualityBG(self.data.equipmentId))
end

local function OnClick(self)
    if self.callBack ~= nil then
        self.callBack(self.data)
    end
end

EquipmentCell_TextMeshPro.OnClick = OnClick
EquipmentCell_TextMeshPro.OnAddListener = OnAddListener
EquipmentCell_TextMeshPro.OnRemoveListener = OnRemoveListener
EquipmentCell_TextMeshPro.OnCreate= OnCreate
EquipmentCell_TextMeshPro.OnDestroy = OnDestroy
EquipmentCell_TextMeshPro.ComponentDefine = ComponentDefine
EquipmentCell_TextMeshPro.ComponentDestroy = ComponentDestroy
EquipmentCell_TextMeshPro.DataDefine = DataDefine
EquipmentCell_TextMeshPro.DataDestroy = DataDestroy
EquipmentCell_TextMeshPro.SetData = SetData
EquipmentCell_TextMeshPro.RefreshView = RefreshView

return EquipmentCell_TextMeshPro