---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 1.
--- DateTime: 2023/5/11 17:55
---


local EquipmainTabBtn = BaseClass('EquipmainTabBtn', UIBaseContainer)
local base = UIBaseContainer

local tab_btn_path = ""
local tab_normal_path = "Normal"
local tab_normal_text_path = "Normal/Normal_TextTab"
local tab_select_path = "Selected"
local tab_select_text_path = "Selected/Selected_TextTab"
local tab_red_dot_path = "RedDotWithoutNum"

local function OnCreate(self)
    base.OnCreate(self)
    self:ComponentDefine()
end

local function OnDestroy(self)
    self:ComponentDestroy()
    base.OnDestroy(self)
end

local function ComponentDefine(self)
    self.tab_btn = self:AddComponent(UIButton, tab_btn_path)
    self.tab_normal = self:AddComponent(UIBaseContainer, tab_normal_path)
    self.tab_normal_text = self:AddComponent(UITextMeshProUGUIEx, tab_normal_text_path)
    self.tab_select = self:AddComponent(UIBaseContainer, tab_select_path)
    self.tab_select_text = self:AddComponent(UITextMeshProUGUIEx, tab_select_text_path)
    self.tab_red_dot = self:AddComponent(UIBaseContainer, tab_red_dot_path)

    self.tab_btn:SetOnClick(function()
        SoundUtil.PlayEffect(SoundAssets.Music_Effect_Button)
        self:OnToggleClick(EquipmentConst.EquipmentSuitType.Equipment_Suit_Type_Fight)
    end)
end

local function ComponentDestroy(self)

end

local function SetData(self, data)
    self.data = data
    self:RefreshView()
end

local function OnAddListener(self)
    base.OnAddListener(self)
end

local function OnRemoveListener(self)
    base.OnRemoveListener(self)
end

local function OnToggleClick(self)
    EventManager:GetInstance():Broadcast(EventId.EquipmentToggleClick, self.data.index)
end

local function SetSelect(self, selectIndex)
    self.tab_select:SetActive(self.data.index == selectIndex)
    self.tab_normal:SetActive(self.data.index ~= selectIndex)
    self.tab_select_text:SetActive(self.data.index == selectIndex)
    self.tab_normal_text:SetActive(self.data.index ~= selectIndex)
end

local function RefreshView(self)
    self.tab_normal_text:SetLocalText(self.data.unselectName)
    self.tab_select_text:SetLocalText(self.data.selectName)
end

local function ShowRedPoint(self, flag)
    self.tab_red_dot:SetActive(flag)
end

local function GetIndex(self)
    return self.data and self.data.index or 0
end

EquipmainTabBtn.OnCreate= OnCreate
EquipmainTabBtn.OnDestroy = OnDestroy
EquipmainTabBtn.ComponentDefine = ComponentDefine
EquipmainTabBtn.ComponentDestroy = ComponentDestroy
EquipmainTabBtn.SetData = SetData
EquipmainTabBtn.OnAddListener = OnAddListener
EquipmainTabBtn.OnRemoveListener = OnRemoveListener
EquipmainTabBtn.OnToggleClick = OnToggleClick
EquipmainTabBtn.SetSelect = SetSelect
EquipmainTabBtn.RefreshView = RefreshView
EquipmainTabBtn.ShowRedPoint = ShowRedPoint
EquipmainTabBtn.GetIndex = GetIndex

return EquipmainTabBtn