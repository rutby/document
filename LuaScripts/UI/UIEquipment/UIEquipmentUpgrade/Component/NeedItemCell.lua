---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 1.
--- DateTime: 2023/3/3 14:33
---


local NeedItemCell = BaseClass('NeedItemCell', UIBaseContainer)
local base = UIBaseContainer

local icon_path = "NumText/Icon"
local num_path = "NumText"

local function OnCreate(self)
    base.OnCreate(self)
    self:ComponentDefine()
end

local function OnDestroy(self)
    self:ComponentDestroy()
    base.OnDestroy(self)
end

local function ComponentDefine(self)
    self.icon = self:AddComponent(UIImage, icon_path)
    self.num = self:AddComponent(UITextMeshProUGUIEx, num_path)
    self.btn = self:AddComponent(UIButton, icon_path)
    self.btn:SetOnClick(function()
        SoundUtil.PlayEffect(SoundAssets.Music_Effect_Button)
        self:OnBtnClick()
    end)
end

local function ComponentDestroy(self)
    
end

local function SetData(self, data)
    self.data = data
    self.icon:LoadSprite(self.data.icon)
    self.num:SetText(self.data.num)
    --if self.data.need > self.data.have then
    --    self.num:SetColor(RedColor)
    --else
    --    self.num:SetColor(WhiteColor)
    --end
end

local function OnBtnClick(self)
    if self.data == nil then
        return
    end
    if self.data.need > self.data.have then
        local lackTab = {}
        local param = {}
        param.type = ResLackType.Res
        param.id = self.data.id
        param.targetNum = self.data.need
        table.insert(lackTab,param)
        GoToResLack.GoToItemResLackList(lackTab)
    end
end

NeedItemCell.OnCreate= OnCreate
NeedItemCell.OnDestroy = OnDestroy
NeedItemCell.ComponentDefine = ComponentDefine
NeedItemCell.ComponentDestroy = ComponentDestroy
NeedItemCell.SetData = SetData
NeedItemCell.OnBtnClick = OnBtnClick

return NeedItemCell