---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by guqu.
--- DateTime: 2020/9/1 11:22
---
local UIChangeNameCtrl = BaseClass("UIChangeNameCtrl", UIBaseCtrl)
local function CloseSelf(self)
    UIManager:GetInstance():DestroyWindow(UIWindowNames.UIChangeName)
end

local function Close(self)
    UIManager:GetInstance():DestroyWindowByLayer(UILayer.Normal)
end

local function CheckName(self,value)
    local type = CheckNameType.None
    local len = #value

    if len< MIN_NAME_CHAR then
        type = CheckNameType.MinNameChar
    elseif len>MAX_NAME_CHAR then
        type = CheckNameType.MaxNameChar
    end
    Logger.Log("check type", type)
    return type
end
--改名卡
local function CheckHaveEnoughItem(self)
    local enough = false
    local item = DataCenter.ItemData:GetItemById(tostring(ITEM_RENAME))
    if item~=nil and item.count>0 then
        enough = true
    end
    return enough
end

local function SendCheckNameMessage(self,value)
    SFSNetwork.SendMessage(MsgDefines.NickNameCheck,value)
end

local function SendChangeNameMessage(self,value)
    SFSNetwork.SendMessage(MsgDefines.NickNameChange,value)
    --self:CloseSelf()
end
local function HandleMessage(self, t)
	--Logger.Log("call : HandleMessage")
	local errCode =  t["errorCode"]
	if errCode ~= nil then
		print("Change Name Faile");
	else
		UIUtil.ShowTipsId(280032) 
	end
end

UIChangeNameCtrl.CloseSelf =CloseSelf
UIChangeNameCtrl.Close =Close
UIChangeNameCtrl.CheckName =CheckName
UIChangeNameCtrl.SendCheckNameMessage = SendCheckNameMessage
UIChangeNameCtrl.SendChangeNameMessage = SendChangeNameMessage
UIChangeNameCtrl.CheckHaveEnoughItem = CheckHaveEnoughItem
return UIChangeNameCtrl