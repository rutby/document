---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Beef.
--- DateTime: 2023/2/6 22:05
---

local UISeasonIntroHero = BaseClass("UISeasonIntroHero", UIBaseContainer)
local base = UIBaseContainer

local this_path = ""
local close_path = "Close"
local pic_path = "Pic"
local title_path = "Title"
local camp_path = "Camp"
local name_path = "Name"
local desc_path = "Desc"
local tag_path = "Tag%s"
local tag_icon_path = "Tag%s/TagIcon%s"
local tag_name_path = "Tag%s/TagName%s"
local skill_path = "Skill%s"
local tip_path = "Tip"

local TAG_COUNT = 2
local SKILL_COUNT = 5

local function OnCreate(self)
    base.OnCreate(self)
    self:DataDefine()
    self:ComponentDefine()
end

local function OnDestroy(self)
    self:ComponentDestroy()
    self:DataDestroy()
    base.OnDestroy(self)
end

local function ComponentDefine(self)
    self.anim = self:AddComponent(UIAnimator, this_path)
    self.close_btn = self:AddComponent(UIButton, close_path)
    self.close_btn:SetOnClick(function()
        self:SetActive(false)
    end)
    self.pic_image = self:AddComponent(UIImage, pic_path)
    self.title_text = self:AddComponent(UIText, title_path)
    self.title_text:SetLocalText(110494)
    self.camp_image = self:AddComponent(UIImage, camp_path)
    self.name_text = self:AddComponent(UIText, name_path)
    self.desc_text = self:AddComponent(UIText, desc_path)
    self.tag_goes = {}
    self.tag_icon_images = {}
    self.tag_name_texts = {}
    for i = 1, TAG_COUNT do
        self.tag_goes[i] = self:AddComponent(UIBaseContainer, string.format(tag_path, i))
        self.tag_icon_images[i] = self:AddComponent(UIImage, string.format(tag_icon_path, i, i))
        self.tag_name_texts[i] = self:AddComponent(UIText, string.format(tag_name_path, i, i))
    end
    self.skill_images = {}
    for i = 1, SKILL_COUNT do
        self.skill_images[i] = self:AddComponent(UIImage, string.format(skill_path, i))
    end
    self.tip_text = self:AddComponent(UIText, tip_path)
    self.tip_text:SetLocalText(129074)
end

local function ComponentDestroy(self)
    self.anim = nil
    self.close_btn = nil
    self.pic_image = nil
    self.title_text = nil
    self.camp_image = nil
    self.name_text = nil
    self.desc_text = nil
    self.tag_goes = nil
    self.tag_icon_images = nil
    self.tag_name_texts = nil
    self.skill_images = nil
    self.tip_text = nil
end

local function DataDefine(self)
    
end

local function DataDestroy(self)
    
end

local function OnEnable(self)
    base.OnEnable(self)
end

local function OnDisable(self)
    base.OnDisable(self)
end

local function SetHeroId(self, heroId)
    local heroConfig = LocalController:instance():getLine(HeroUtils.GetHeroXmlName(), heroId)
    if heroConfig == nil then
        return
    end
    
    self.pic_image:LoadSprite("Assets/Main/TextureEx/UISeasonIntro/seasonruels_hero_" .. heroId)
    self.camp_image:LoadSprite(HeroUtils.GetCampIconPath(heroConfig.camp))
    self.name_text:SetLocalText(heroConfig.name)
    self.desc_text:SetLocalText(heroConfig.desc)
    
    local tags = HeroUtils.GetTagsByHeroId(heroId)
    for i = 1, TAG_COUNT do
        local tag = tags[i]
        if tag then
            local icon, name = HeroUtils.GetTagIconAndName(tag)
            self.tag_goes[i]:SetActive(true)
            self.tag_icon_images[i]:LoadSprite(icon)
            self.tag_name_texts[i]:SetText(name)
        else
            self.tag_goes[i]:SetActive(false)
        end
    end
    
    for i = 1, SKILL_COUNT do
        local skillId = tonumber(heroConfig.skill[i])
        if skillId then
            self.skill_images[i]:SetActive(true)
            self.skill_images[i]:LoadSprite(HeroUtils.GetSkillIcon(skillId))
        else
            self.skill_images[i]:SetActive(false)
        end
    end
end

local function Show(self)
    self:SetActive(true)
    self.anim:Play("CommonPopup_movein", 0, 0)
end

local function Hide(self)
    self:SetActive(false)
end

UISeasonIntroHero.OnCreate= OnCreate
UISeasonIntroHero.OnDestroy = OnDestroy
UISeasonIntroHero.ComponentDefine = ComponentDefine
UISeasonIntroHero.ComponentDestroy = ComponentDestroy
UISeasonIntroHero.DataDefine = DataDefine
UISeasonIntroHero.DataDestroy = DataDestroy
UISeasonIntroHero.OnEnable = OnEnable
UISeasonIntroHero.OnDisable = OnDisable

UISeasonIntroHero.SetHeroId = SetHeroId
UISeasonIntroHero.Show = Show
UISeasonIntroHero.Hide = Hide

return UISeasonIntroHero