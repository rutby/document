---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Beef.
--- DateTime: 2023/2/28 20:32
---

local UIGloryInfoRankItem = BaseClass("UIGloryInfoRankItem", UIBaseContainer)
local base = UIBaseContainer
local Localization = CS.GameEntry.Localization

local name_path = "Name"
local score_path = "Score"
local alliance_name_path = "AllianceName"
local head_path = "UIPlayerHead/HeadIcon"
local head_fg_path = "UIPlayerHead/Foreground"
local rank_icon_path = "RankIcon"
local rank_path = "Rank"
local sex_path = "Sex"

local function OnCreate(self)
    base.OnCreate(self)
    self:DataDefine()
    self:ComponentDefine()
end

local function OnDestroy(self)
    self:ComponentDestroy()
    self:DataDestroy()
    base.OnDestroy(self)
end

local function ComponentDefine(self)
    self.name_text = self:AddComponent(UIText, name_path)
    self.score_text = self:AddComponent(UIText, score_path)
    self.alliance_name_text = self:AddComponent(UIText, alliance_name_path)
    self.head = self:AddComponent(UIPlayerHead, head_path)
    self.head_fg_image = self:AddComponent(UIImage, head_fg_path)
    self.rank_icon_image = self:AddComponent(UIImage, rank_icon_path)
    self.rank_text = self:AddComponent(UIText, rank_path)
    self.sex_image = self:AddComponent(UIImage, sex_path)
end

local function ComponentDestroy(self)
    self.name_text = nil
    self.score_text = nil
    self.alliance_name_text = nil
    self.head = nil
    self.head_fg_image = nil
    self.rank_icon_image = nil
    self.rank_text = nil
    self.sex_image = nil
end

local function DataDefine(self)
    
end

local function DataDestroy(self)
    
end

local function OnEnable(self)
    base.OnEnable(self)
end

local function OnDisable(self)
    base.OnDisable(self)
end

local function OnAddListener(self)
    base.OnAddListener(self)
end

local function OnRemoveListener(self)
    base.OnRemoveListener(self)
end

local function SetData(self, data)
    self.name_text:SetText(data.name)
    self.score_text:SetText(string.GetFormattedSeperatorNum(data.score))
    self.alliance_name_text:SetText(UIUtil.GetAllianceWholeName(data.serverId, data.abbr, data.alName))
    self.head:SetData(data.uid, data.pic, data.picVer)
    local headFrame = DataCenter.DecorationDataManager:GetHeadFrame(data.headSkinId, data.headSkinET)
    if headFrame then
        self.head_fg_image:SetActive(true)
        self.head_fg_image:LoadSprite(headFrame)
    else
        self.head_fg_image:SetActive(false)
    end
    if data.rank <= 3 then
        self.rank_text:SetActive(false)
        self.rank_icon_image:SetActive(true)
        self.rank_icon_image:LoadSprite("Assets/Main/Sprites/UI/UIAlliance/rank/UIalliance_rankingbg0" .. data.rank)
    else
        self.rank_text:SetActive(true)
        self.rank_text:SetText(data.rank)
        self.rank_icon_image:SetActive(false)
    end
    self.sex_image:LoadSprite(SexUtil.GetSexIconName(data.sex))
end

UIGloryInfoRankItem.OnCreate= OnCreate
UIGloryInfoRankItem.OnDestroy = OnDestroy
UIGloryInfoRankItem.ComponentDefine = ComponentDefine
UIGloryInfoRankItem.ComponentDestroy = ComponentDestroy
UIGloryInfoRankItem.DataDefine = DataDefine
UIGloryInfoRankItem.DataDestroy = DataDestroy
UIGloryInfoRankItem.OnEnable = OnEnable
UIGloryInfoRankItem.OnDisable = OnDisable
UIGloryInfoRankItem.OnAddListener = OnAddListener
UIGloryInfoRankItem.OnRemoveListener = OnRemoveListener

UIGloryInfoRankItem.SetData = SetData

return UIGloryInfoRankItem