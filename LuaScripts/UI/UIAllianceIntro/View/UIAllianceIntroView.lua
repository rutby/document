---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 1.
--- DateTime: 2021/9/15 16:38
---

local base = UIBaseView--Variable
local UIAllianceIntroView = BaseClass("UIAllianceIntroView", base)--Variable
local Localization = CS.GameEntry.Localization

local title_path = "ImgBg/titleText"
local goal_path = "ImgBg/layout1/Goal"
local tip1_path = "ImgBg/tips/tip1"
local tip2_path = "ImgBg/tips/tip2"
local tip3_path = "ImgBg/tips/tip3"
local tip4_path = "ImgBg/tips/tip4"
local joinBtn_path = "ImgBg/joinBtn"
local joinBtnTxt_path = "ImgBg/joinBtn/joinBtnTxt"
local createBtn_path = "ImgBg/createBtn"
local createBtnTxt_path = "ImgBg/createBtn/createBtnTxt"
local closeBtn_path = "ImgBg/CloseBtn"
local panel_path = "panel"

local function OnCreate(self)
    base.OnCreate(self)
    self:ComponentDefine()
    self:ReInit()
end

local function OnDestroy(self)
    self:ComponentDestroy()
    base.OnDestroy(self)
end

local function ComponentDefine(self)
    --self.testN = self:AddComponent(UIBaseContainer, "")
    self.titleN = self:AddComponent(UITextMeshProUGUIEx, title_path)
    self.titleN:SetLocalText(390002) 
    self.goalN = self:AddComponent(UITextMeshProUGUIEx, goal_path)
    self.goalN:SetText(Localization:GetString("130065")..":<color=#482E28>200")
    self.tip1N = self:AddComponent(UITextMeshProUGUIEx, tip1_path)
    self.tip1N:SetLocalText(390851) 
    self.tip2N = self:AddComponent(UITextMeshProUGUIEx, tip2_path)
    self.tip2N:SetLocalText(390852) 
    self.tip3N = self:AddComponent(UITextMeshProUGUIEx, tip3_path)
    self.tip3N:SetLocalText(390853) 
    self.tip4N = self:AddComponent(UITextMeshProUGUIEx, tip4_path)
    self.tip4N:SetLocalText(390853) 
    self.tip4N:SetActive(false)
    self.joinBtnN = self:AddComponent(UIButton, joinBtn_path)
    self.joinBtnN:SetOnClick(function ()
        self:OnClickJoinBtn()
    end)
    self.joinBtnTxtN = self:AddComponent(UITextMeshProUGUIEx, joinBtnTxt_path)
    self.joinBtnTxtN:SetLocalText(110037) 
    self.createBtnN = self:AddComponent(UIButton, createBtn_path)
    self.createBtnN:SetOnClick(function ()
        self:OnClickCreateBtn()
    end)
    self.createBtnTxtN = self:AddComponent(UITextMeshProUGUIEx, createBtnTxt_path)
    self.createBtnTxtN:SetLocalText(100645) 
    self.closeBtnN = self:AddComponent(UIButton, closeBtn_path)
    self.closeBtnN:SetOnClick(function ()
        self:OnClickCloseBtn()
    end)
    self.panel_btn = self:AddComponent(UIButton, panel_path)
    self.panel_btn:SetOnClick(function ()
        self.ctrl:CloseSelf()
    end)
end

local function ComponentDestroy(self)
    --self.testN = nil
    self.goalN = nil
    self.tip1N = nil
    self.tip2N = nil
    self.tip3N = nil
    self.tip4N = nil
    self.joinBtnN = nil
    self.joinBtnTxtN = nil
    self.createBtnN = nil
    self.createBtnTxtN = nil
    self.closeBtnN = nil
end

local function ReInit(self)
    local isArrow = self:GetUserData()
    if isArrow then
        local param = {}
        param.position = self.joinBtnN.transform.position
        param.arrowType = ArrowType.Capacity
        param.positionType = PositionType.Screen
        DataCenter.ArrowManager:ShowArrow(param)
    end
    DataCenter.SecondConfirmManager:SetNoShowSecondConfirm(NoSecondConfirmType.JoinAlliance, true)
    EventManager:GetInstance():Broadcast(EventId.UpdateMainAllianceRedCount)
end

local function OnClickCreateBtn(self)
    self.ctrl:OnClickCreateBtn()
end

local function OnClickJoinBtn(self)
    self.ctrl:OnClickJoinBtn()
end

local function OnClickCloseBtn(self)
    self.ctrl:CloseSelf()
end


--[[
local function OnAddListener(self)
    base.OnAddListener(self)
end

local function OnRemoveListener(self)
    base.OnRemoveListener(self)
end
--]]

UIAllianceIntroView.OnCreate = OnCreate
UIAllianceIntroView.OnDestroy = OnDestroy
--UIAllianceIntroView.OnAddListener = OnAddListener
--UIAllianceIntroView.OnRemoveListener = OnRemoveListener
UIAllianceIntroView.ComponentDefine = ComponentDefine
UIAllianceIntroView.ReInit = ReInit
UIAllianceIntroView.ComponentDestroy = ComponentDestroy
UIAllianceIntroView.OnClickCreateBtn = OnClickCreateBtn
UIAllianceIntroView.OnClickJoinBtn = OnClickJoinBtn
UIAllianceIntroView.OnClickCloseBtn = OnClickCloseBtn
return UIAllianceIntroView